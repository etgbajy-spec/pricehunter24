<!DOCTYPE html>
<html lang="ko">
<head>
  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-T7FT9TLF');</script>
  <!-- End Google Tag Manager -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>1:1 문의 관리 | PriceHunter</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-blue-50 via-emerald-50 to-pink-50 min-h-screen flex items-center justify-center px-2">
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T7FT9TLF"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->
  <main class="w-full max-w-6xl bg-white/90 rounded-3xl shadow-2xl p-8 md:p-12 flex flex-col items-center text-center backdrop-blur-md mt-8 mb-8">
    <h1 class="text-2xl md:text-3xl font-extrabold text-blue-600 mb-6">1:1 문의 관리</h1>
    
    <!-- 회원별 탭 시스템 -->
    <div class="w-full mb-6">
      <div class="flex flex-wrap gap-2 justify-center mb-4">
        <button id="tab-all" class="tab-btn active px-4 py-2 bg-blue-500 text-white rounded-lg font-bold hover:bg-blue-600 transition" onclick="switchTab('all')">
          전체 <span id="count-all" class="ml-1 bg-white text-blue-500 px-2 py-1 rounded text-xs">0</span>
        </button>
        <!-- 회원별 탭은 동적으로 생성됨 -->
      </div>
      
      <!-- 진행상황 필터 -->
      <div class="flex flex-wrap gap-2 justify-center mb-4">
        <button id="filter-all" class="filter-btn active px-3 py-1 bg-gray-500 text-white rounded font-bold hover:bg-gray-600 transition text-sm" onclick="switchFilter('all')">전체</button>
        <button id="filter-new" class="filter-btn px-3 py-1 bg-red-500 text-white rounded font-bold hover:bg-red-600 transition text-sm" onclick="switchFilter('new')">신규문의</button>
        <button id="filter-progress" class="filter-btn px-3 py-1 bg-orange-500 text-white rounded font-bold hover:bg-orange-600 transition text-sm" onclick="switchFilter('progress')">진행중</button>
        <button id="filter-complete" class="filter-btn px-3 py-1 bg-green-500 text-white rounded font-bold hover:bg-green-600 transition text-sm" onclick="switchFilter('complete')">완료</button>
      </div>
    </div>
    
    <div class="w-full mb-8">
      <div class="font-bold text-gray-700 mb-2 text-left">접수된 1:1 문의 목록</div>
      <div class="flex justify-between items-center px-4 py-2 bg-blue-100 rounded-t-xl text-sm font-bold text-blue-700 flex-wrap">
        <span class="w-1/4">문의번호/이름</span>
        <span class="w-1/4 text-center">문의일시</span>
        <span class="w-1/4 text-center">진행상황</span>
        <span class="w-1/4 text-right">답변상태</span>
      </div>
      <ul id="inquiry-list" class="bg-blue-50 rounded-b-xl shadow-inner divide-y divide-blue-100 text-left"></ul>
    </div>
    <!-- 문의 상세 모달 -->
    <div id="inquiry-modal-overlay" class="fixed inset-0 bg-black/40 flex items-center justify-center z-50 hidden">
      <div id="inquiry-modal" class="bg-white rounded-2xl shadow-2xl p-8 w-full max-w-2xl max-h-[90vh] overflow-y-auto relative min-w-0">
        <button id="close-inquiry-modal" class="absolute top-3 right-3 text-gray-400 hover:text-gray-700 text-2xl">&times;</button>
        <h2 class="text-xl font-bold text-blue-700 mb-4">문의 상세</h2>
        <div class="mb-2 text-gray-700"><span class="font-semibold">이름:</span> <span id="modal-name"></span></div>
        <div class="mb-2 text-gray-700"><span class="font-semibold">이메일:</span> <span id="modal-email"></span></div>
        <div class="mb-2 text-gray-700"><span class="font-semibold">휴대폰:</span> <span id="modal-phone"></span></div>
        <div class="mb-4 text-gray-700"><span class="font-semibold">문의 내용:</span><br><span id="modal-content" class="block mt-2 whitespace-pre-line"></span></div>
        <div id="modal-file-wrap" class="mb-4"></div>
        <div class="text-xs text-gray-400 mt-2">문의일시: <span id="modal-date"></span></div>
        <div class="mt-6 text-left w-full">
          <div class="font-bold text-blue-700 mb-2">관리자 답변</div>
          <div id="modal-answer-view" class="mb-2 text-gray-800 whitespace-pre-line"></div>
          <form id="answer-form" class="flex flex-col gap-2 mb-2">
            <textarea id="modal-answer" rows="3" class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-400 focus:outline-none" placeholder="여기에 답변을 입력하세요" aria-label="답변 입력"></textarea>
            <button type="submit" class="py-2 bg-blue-500 text-white rounded-lg font-bold hover:bg-blue-600 transition w-full md:w-auto" aria-label="답변 저장">답변 저장</button>
          </form>
          <button id="delete-inquiry-btn" class="py-2 bg-red-500 text-white rounded-lg font-bold hover:bg-red-600 transition w-full md:w-auto" aria-label="문의 삭제">문의 삭제</button>
          <div class="mt-6 border-t pt-4">
            <div class="font-bold text-blue-700 mb-3 text-lg">💬 추가 댓글</div>
            <div class="bg-gray-50 rounded-lg p-3 mb-3">
              <ul id="modal-comments-list" class="space-y-2"></ul>
            </div>
            <form id="comment-form" class="flex gap-2">
              <input id="modal-comment-input" type="text" class="flex-1 px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-400 focus:outline-none" placeholder="답변을 입력하세요..." aria-label="댓글 입력" />
              <button type="submit" class="px-4 py-2 bg-emerald-500 text-white rounded-lg font-bold hover:bg-emerald-600 transition" aria-label="댓글 추가">답변</button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </main>
  <script>
    // CSS 애니메이션 추가
    const style = document.createElement('style');
    style.textContent = `
      @keyframes pulse {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.5; }
      }
      .tab-btn.active {
        background-color: #3b82f6;
        color: white;
      }
      .filter-btn.active {
        background-color: #6b7280;
        color: white;
      }
    `;
    document.head.appendChild(style);
    
    // 전역 변수
    let currentTab = 'all';
    let currentFilter = 'all';
    let allInquiries = [];
    
    function getInquiryList() {
      const list = [];
      for (let i = 0; i < localStorage.length; i++) {
        const key = localStorage.key(i);
        if (key.startsWith('inquiry-')) {
          const inquiry = JSON.parse(localStorage.getItem(key));
          list.push({ key, ...inquiry });
        }
      }
      // 최신순 정렬(가장 최근이 위로)
      return list.sort((a, b) => (b.date || 0) - (a.date || 0));
    }
    
    function formatDateTime(dt) {
      if (!dt) return '';
      const d = new Date(dt);
      if (isNaN(d.getTime())) return dt;
      const y = d.getFullYear();
      const m = String(d.getMonth()+1).padStart(2,'0');
      const day = String(d.getDate()).padStart(2,'0');
      const h = String(d.getHours()).padStart(2,'0');
      const min = String(d.getMinutes()).padStart(2,'0');
      return `${y}-${m}-${day} ${h}:${min}`;
    }
    
    // 진행상황 판단 함수
    function getInquiryStatus(inq) {
      if (!inq.answer) {
        return { status: 'new', text: '신규문의', color: 'bg-red-500', textColor: 'text-red-500' };
      }
      
      if (inq.comments && inq.comments.length > 0) {
        const lastComment = inq.comments[inq.comments.length - 1];
        if (lastComment.author !== '관리자') {
          return { status: 'progress', text: '진행중', color: 'bg-orange-500', textColor: 'text-orange-500' };
        }
      }
      
      return { status: 'complete', text: '완료', color: 'bg-green-500', textColor: 'text-green-500' };
    }
    
    // 회원별 탭 생성
    function createUserTabs() {
      const users = {};
      allInquiries.forEach(inq => {
        const userName = inq.name || '익명';
        if (!users[userName]) {
          users[userName] = { name: userName, count: 0 };
        }
        users[userName].count++;
      });
      
      const tabContainer = document.querySelector('.flex.flex-wrap.gap-2.justify-center');
      const allTab = tabContainer.querySelector('#tab-all');
      tabContainer.innerHTML = '';
      tabContainer.appendChild(allTab);
      
      Object.values(users).forEach(user => {
        const tab = document.createElement('button');
        tab.className = 'tab-btn px-4 py-2 bg-gray-300 text-gray-700 rounded-lg font-bold hover:bg-gray-400 transition';
        tab.onclick = () => switchTab(user.name);
        tab.innerHTML = `${user.name} <span class="ml-1 bg-white text-gray-700 px-2 py-1 rounded text-xs">${user.count}</span>`;
        tabContainer.appendChild(tab);
      });
    }
    
    // 탭 전환
    function switchTab(userName) {
      currentTab = userName;
      
      // 탭 버튼 활성화
      document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
      event.target.classList.add('active');
      
      renderInquiryList();
    }
    
    // 필터 전환
    function switchFilter(status) {
      currentFilter = status;
      
      // 필터 버튼 활성화
      document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
      event.target.classList.add('active');
      
      renderInquiryList();
    }
    
    function renderInquiryList() {
      allInquiries = getInquiryList();
      
      // 탭별 필터링
      let filteredInquiries = allInquiries;
      if (currentTab !== 'all') {
        filteredInquiries = allInquiries.filter(inq => inq.name === currentTab);
      }
      
      // 진행상황별 필터링
      if (currentFilter !== 'all') {
        filteredInquiries = filteredInquiries.filter(inq => {
          const status = getInquiryStatus(inq);
          return status.status === currentFilter;
        });
      }
      
      // 우선순위 정렬 (신규문의 → 진행중 → 완료)
      filteredInquiries.sort((a, b) => {
        const statusA = getInquiryStatus(a);
        const statusB = getInquiryStatus(b);
        const priority = { new: 3, progress: 2, complete: 1 };
        return priority[statusB.status] - priority[statusA.status];
      });
      
      const ul = document.getElementById('inquiry-list');
      ul.innerHTML = '';
      
      if (filteredInquiries.length === 0) {
        ul.innerHTML = '<li class="py-4 text-center text-gray-400">해당하는 문의가 없습니다.</li>';
        return;
      }
      
      filteredInquiries.forEach(inq => {
        const li = document.createElement('li');
        li.className = 'py-3 px-4 hover:bg-blue-100 cursor-pointer flex justify-between items-center flex-wrap min-h-0';
        
        // 새로운 댓글 확인 로직 (회원 댓글만 체크)
        const newCommentsCount = getNewUserCommentsCount(inq);
        const newCommentBadge = newCommentsCount > 0 ? 
          `<span style="display: inline-block; width: 24px; height: 24px; background-color: #ff0000; color: white; border-radius: 50%; text-align: center; line-height: 24px; font-size: 14px; font-weight: bold; margin-left: 8px; animation: pulse 2s infinite; border: 2px solid #fff; box-shadow: 0 2px 4px rgba(0,0,0,0.3);" title="회원 새 댓글 ${newCommentsCount}개">${newCommentsCount}</span>` : '';
        
        // 진행상황
        const status = getInquiryStatus(inq);
        const statusBadge = `<span class="px-2 py-1 rounded text-xs font-bold text-white ${status.color}">${status.text}</span>`;
        
        // 답변상태
        const answerStatus = inq.answer ? '<span class="text-emerald-600 font-bold">답변완료</span>' : '<span class="text-gray-400">대기</span>';
        
        const htmlContent = `
          <span class="w-1/4 truncate flex items-center" style="min-width: 0;">
            <span class="font-semibold text-blue-600">${inq.key.replace('inquiry-','')}</span> | 
            <span class="text-gray-700">${inq.name || ''}</span>
          </span>
          <span class="w-1/4 text-center text-xs text-gray-400">${formatDateTime(inq.date)}</span>
          <span class="w-1/4 text-center">${statusBadge}</span>
          <span class="w-1/4 text-right flex items-center justify-end gap-2">
            ${answerStatus}
            ${newCommentBadge}
          </span>
        `;
        
        li.innerHTML = htmlContent;
        li.onclick = function() { showInquiryModal(inq); };
        ul.appendChild(li);
      });
      
      // 전체 카운트 업데이트
      updateCounts();
    }
    
    // 카운트 업데이트
    function updateCounts() {
      const counts = { all: 0, new: 0, progress: 0, complete: 0 };
      
      allInquiries.forEach(inq => {
        counts.all++;
        const status = getInquiryStatus(inq);
        counts[status.status]++;
      });
      
      document.getElementById('count-all').textContent = counts.all;
    }
    
    // 회원이 단 새로운 댓글 개수 계산 함수
    function getNewUserCommentsCount(inq) {
      if (!inq.comments || inq.comments.length === 0) return 0;
      
      const lastChecked = inq.lastChecked || 0;
      // 관리자가 아닌 댓글만 필터링 (회원 댓글)
      const userComments = inq.comments.filter(c => c.author !== '관리자');
      
      // 관리자 댓글이 있고, lastChecked가 최신이면 새로운 알림 제거
      const hasAdminComment = inq.comments.some(c => c.author === '관리자');
      const maxUserCommentTime = userComments.length > 0 ? Math.max(...userComments.map(c => c.date || 0)) : 0;
      
      if (hasAdminComment && lastChecked >= maxUserCommentTime) {
        console.log('관리자 댓글 존재 + lastChecked 최신 - 새로운 알림 제거:', inq.key, 'lastChecked:', lastChecked, 'maxUserCommentTime:', maxUserCommentTime);
        return 0;
      }
      
      // lastChecked가 잘못 설정된 경우 감지 (모든 댓글보다 큰 경우)
      const maxCommentTime = Math.max(...userComments.map(c => c.date || 0));
      if (lastChecked > maxCommentTime && userComments.length > 0) {
        // lastChecked를 0으로 초기화하여 모든 댓글을 새로운 댓글로 표시
        const updated = {...inq, lastChecked: 0};
        localStorage.setItem(inq.key, JSON.stringify(updated));
        return userComments.length; // 모든 회원 댓글을 새로운 댓글로 표시
      }
      
      const newUserComments = userComments.filter(c => (c.date || 0) > lastChecked);
      
      console.log('새로운 댓글 체크:', inq.key, 'lastChecked:', lastChecked, '회원댓글:', userComments.length, '새댓글:', newUserComments.length, '회원댓글시간들:', userComments.map(c => c.date));
      
      // 디버깅: 각 댓글의 시간과 lastChecked 비교
      userComments.forEach((c, i) => {
        console.log(`댓글 ${i}: ${c.date} > ${lastChecked} = ${(c.date || 0) > lastChecked}`);
      });
      
      return newUserComments.length;
    }
    
    // 새로운 댓글 확인 함수 (기존 호환성 유지)
    function checkNewComments(inq) {
      return getNewUserCommentsCount(inq) > 0;
    }
    
    // 문의 확인 시 lastChecked 업데이트
    function updateLastChecked(inq) {
      if (inq.comments && inq.comments.length > 0) {
        const lastCommentTime = Math.max(...inq.comments.map(c => c.date || 0));
        const updated = {...inq, lastChecked: lastCommentTime};
        localStorage.setItem(inq.key, JSON.stringify(updated));
      }
    }
    
    // 특정 댓글에 답변하는 함수
    function replyToComment(commentIndex, authorName, commentText) {
      const input = document.getElementById('modal-comment-input');
      input.value = '';
      input.focus();
      
      // 답변 대상 댓글 정보를 전역 변수에 저장
      window.replyingToComment = {
        index: commentIndex,
        author: authorName,
        text: commentText
      };
    }
    
    function showInquiryModal(inq) {
      // 문의를 열 때 lastChecked 업데이트 (새로운 댓글 확인 표시 제거)
      updateLastChecked(inq);
      
      document.getElementById('modal-name').textContent = inq.name || '';
      document.getElementById('modal-email').textContent = inq.email || '';
      document.getElementById('modal-phone').textContent = inq.phone || '';
      document.getElementById('modal-content').textContent = inq.message || inq.content || '';
      document.getElementById('modal-date').textContent = formatDateTime(inq.date);
      // 첨부파일 표시
      var fileWrap = document.getElementById('modal-file-wrap');
      fileWrap.innerHTML = '';
      if (inq.file) {
        if (inq.file.startsWith('data:image/')) {
          fileWrap.innerHTML = '<div class="mb-2"><img src="'+inq.file+'" alt="첨부 이미지" class="max-h-40 rounded-xl border shadow w-full object-contain" /></div>';
        } else {
          // 파일 다운로드 링크 제공
          const fileName = inq.fileName || '첨부파일';
          fileWrap.innerHTML = '<div class="mb-2 text-gray-600">첨부파일: <a href="'+inq.file+'" download="'+fileName+'" class="text-blue-600 underline">'+fileName+'</a></div>';
        }
      }
      // 답변 표시 및 입력
      document.getElementById('modal-answer').value = inq.answer || '';
      document.getElementById('modal-answer-view').textContent = inq.answer ? inq.answer : '(아직 답변이 없습니다)';
      // 답변 저장
      var answerForm = document.getElementById('answer-form');
      answerForm.onsubmit = function(e) {
        e.preventDefault();
        var answer = document.getElementById('modal-answer').value.trim();
        document.getElementById('modal-answer-view').textContent = answer || '(아직 답변이 없습니다)';
        // inquiry-...에 답변 저장
        var updated = {...inq, answer};
        localStorage.setItem(inq.key, JSON.stringify(updated));
        // contact-history에도 동기화
        let history = JSON.parse(localStorage.getItem('contact-history') || '[]');
        let changed = false;
        for (let i = 0; i < history.length; i++) {
          if (history[i].subject === inq.subject && history[i].date === inq.date) {
            history[i].answer = answer;
            changed = true;
            break;
          }
        }
        if (changed) localStorage.setItem('contact-history', JSON.stringify(history));
        alert('답변이 저장되었습니다!');
        document.getElementById('modal-answer').value = '';
        setTimeout(function() {
          document.getElementById('inquiry-modal-overlay').classList.add('hidden');
          renderInquiryList(); // 리스트 새로고침
        }, 1000);
      };
      document.getElementById('delete-inquiry-btn').onclick = function() {
        if (confirm('정말 이 문의를 삭제하시겠습니까?')) {
          // inquiry-에서 삭제
          localStorage.removeItem(inq.key);
          
          // contact-history에서도 동기화하여 삭제
          let history = JSON.parse(localStorage.getItem('contact-history') || '[]');
          history = history.filter(item => !(item.subject === inq.subject && item.date === inq.date));
          localStorage.setItem('contact-history', JSON.stringify(history));
          
          document.getElementById('inquiry-modal-overlay').classList.add('hidden');
          renderInquiryList();
        }
      };
      // 댓글 렌더링
      function renderComments(comments) {
        const ul = document.getElementById('modal-comments-list');
        ul.innerHTML = '';
        if (!comments || comments.length === 0) {
          ul.innerHTML = '<li class="text-gray-400 text-sm italic">아직 댓글이 없습니다.</li>';
          return;
        }
        (comments||[]).forEach((c, index) => {
          const li = document.createElement('li');
          const isAdmin = c.author === '관리자';
          const isUserComment = !isAdmin;
          li.className = `text-sm p-3 rounded ${isAdmin ? 'bg-blue-100 text-blue-800' : 'bg-gray-100 text-gray-700'}`;
          
          // 회원 댓글에만 답변 버튼 표시
          const replyButton = isUserComment ? 
            `<button onclick="replyToComment(${index}, '${c.author}', '${c.text.replace(/'/g, "\\'")}')" class="mt-2 px-2 py-1 bg-emerald-500 text-white text-xs rounded hover:bg-emerald-600 transition">답변</button>` : '';
          
          // 답변 정보 표시
          let replyInfoHtml = '';
          if (c.replyInfo && isAdmin) {
            replyInfoHtml = `
              <div class="mt-2 p-2 bg-yellow-50 border-l-4 border-yellow-400 rounded">
                <div class="text-xs text-yellow-700 font-semibold">↳ ${c.replyInfo.replyTo}님의 댓글에 답변</div>
                <div class="text-xs text-yellow-600 mt-1">"${c.replyInfo.replyToText.substring(0, 50)}${c.replyInfo.replyToText.length > 50 ? '...' : ''}"</div>
              </div>
            `;
          }
          
          li.innerHTML = `
            <div class="font-semibold text-xs ${isAdmin ? 'text-blue-600' : 'text-gray-600'}">${c.author||'익명'}</div>
            ${replyInfoHtml}
            <div class="mt-1">${c.text}</div>
            <div class="text-xs text-gray-400 mt-1">${formatDateTime(c.date)}</div>
            ${replyButton}
          `;
          ul.appendChild(li);
        });
      }
      renderComments(inq.comments);
      // 댓글 추가
      document.getElementById('comment-form').onsubmit = function(e) {
        e.preventDefault();
        const input = document.getElementById('modal-comment-input');
        const text = input.value.trim();
        if (!text) return;
        const author = localStorage.getItem('isAdmin') === 'true' ? '관리자' : (inq.name || '회원');
        
        // 관리자가 댓글을 달면 새로운 댓글 알림 초기화
        const isAdminComment = author === '관리자';
        const currentTime = Date.now();
        
        // 답변 대상 정보가 있으면 댓글에 포함
        let replyInfo = null;
        let cleanText = text; // 실제 저장할 텍스트
        
        if (window.replyingToComment && isAdminComment) {
          replyInfo = {
            replyTo: window.replyingToComment.author,
            replyToText: window.replyingToComment.text,
            replyToIndex: window.replyingToComment.index
          };
          
          // 멘션 텍스트 제거 (@이름 내용... 부분 제거)
          const mentionPattern = /^@[^\s]+\s+[^\s]+.*?\s/;
          cleanText = text.replace(mentionPattern, '').trim();
        }
        
        // 관리자 댓글인 경우 새로운 알림 제거
        let newLastChecked = inq.lastChecked || 0;
        if (isAdminComment) {
          // 관리자가 댓글을 달면 즉시 모든 새로운 알림 제거
          // 현재 시간보다 1초 뒤로 설정하여 모든 기존 댓글을 확인한 것으로 표시
          newLastChecked = currentTime + 1000;
          console.log('관리자 댓글 - 즉시 모든 알림 제거:', '기존 lastChecked:', inq.lastChecked, '새로운 lastChecked:', newLastChecked, '현재시간:', currentTime);
          
          // 추가 디버깅: 회원 댓글들 확인
          const userComments = (inq.comments||[]).filter(c => c.author !== '관리자');
          console.log('회원 댓글들:', userComments.map(c => ({author: c.author, date: c.date, text: c.text.substring(0, 20)})));
        }
        
        const updated = {
          ...inq, 
          comments: (inq.comments||[]).concat({author, text: cleanText, date: currentTime, replyInfo}),
          lastChecked: newLastChecked
        };
        
        console.log('관리자 댓글 추가:', inq.key, 'isAdminComment:', isAdminComment, '기존 lastChecked:', inq.lastChecked, '새로운 lastChecked:', updated.lastChecked);
        
        localStorage.setItem(inq.key, JSON.stringify(updated));
        renderComments(updated.comments);
        input.value = '';
        
        // 답변 대상 정보 초기화
        window.replyingToComment = null;
        
        // 즉시 리스트 새로고침 (새로운 댓글 표시 업데이트)
        renderInquiryList();
      };
      const overlay = document.getElementById('inquiry-modal-overlay');
      overlay.classList.remove('hidden');
    }
    document.getElementById('close-inquiry-modal').onclick = function() {
      document.getElementById('inquiry-modal-overlay').classList.add('hidden');
    };
    document.getElementById('inquiry-modal-overlay').onclick = function(e) {
      if (e.target === this) this.classList.add('hidden');
    };
    
    // 초기화
    window.addEventListener('DOMContentLoaded', function() {
      renderInquiryList();
      createUserTabs();
    });
  </script>
</body>
</html> 