<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ìµœì €ê°€ ìš”ì²­í•˜ê¸° (ìŠ¤í…ë³„ í¼) - PriceHunter</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .fadein-step {
      animation: fadein-step 0.7s cubic-bezier(.4,0,.2,1) both;
    }
    @keyframes fadein-step {
      0% { opacity: 0; transform: translateY(40px) scale(0.98); }
      100% { opacity: 1; transform: translateY(0) scale(1); }
    }
    .slidein-step {
      animation: slidein-step 0.7s cubic-bezier(.4,0,.2,1) both;
    }
    @keyframes slidein-step {
      0% { opacity: 0; transform: translateX(60px) scale(0.98); }
      100% { opacity: 1; transform: translateX(0) scale(1); }
    }
    .stepper-dot-animate {
      transition: background 0.4s, box-shadow 0.4s, transform 0.4s;
    }
    .stepper-dot-active {
      background: linear-gradient(90deg, #f472b6 0%, #fbbf24 100%);
      box-shadow: 0 4px 16px 0 rgba(255, 99, 132, 0.15);
      transform: scale(1.15);
    }
    .stepper-dot {
      background: #d1d5db;
    }
    .input-animate:focus {
      box-shadow: 0 0 0 3px #fbbf24aa;
      transition: box-shadow 0.3s;
    }
    .btn-animate {
      transition: transform 0.2s, box-shadow 0.2s;
    }
    .btn-animate:hover {
      transform: translateY(-2px) scale(1.04);
      box-shadow: 0 8px 32px 0 rgba(236, 72, 153, 0.12);
    }
  </style>
</head>
<body class="bg-gradient-to-br from-gray-100 via-blue-50 to-emerald-50 min-h-screen flex flex-col items-center justify-center py-4 md:py-12">
  <div class="w-full max-w-lg bg-white/90 rounded-2xl shadow-2xl p-4 md:p-8 lg:p-10 backdrop-blur-md">
    <h2 class="text-2xl sm:text-3xl md:text-4xl font-bold text-blue-800 mb-4 md:mb-6 text-center">ìµœì €ê°€ ìš”ì²­í•˜ê¸° <span class="text-pink-500">(ìŠ¤í…ë³„)</span></h2>
    <div id="stepper" class="flex justify-between items-center mb-6 md:mb-8">
      <div class="flex-1 flex flex-col items-center">
        <div class="w-8 h-8 md:w-10 md:h-10 rounded-full flex items-center justify-center font-bold text-white stepper-dot stepper-dot-animate text-sm md:text-base" id="step-1-dot">1</div>
        <div class="text-xs mt-1 hidden sm:block">ì œí’ˆì •ë³´</div>
      </div>
      <div class="flex-1 h-1 bg-gradient-to-r from-blue-300 to-pink-300 mx-1"></div>
      <div class="flex-1 flex flex-col items-center">
        <div class="w-8 h-8 md:w-10 md:h-10 rounded-full flex items-center justify-center font-bold text-white stepper-dot stepper-dot-animate text-sm md:text-base" id="step-2-dot">2</div>
        <div class="text-xs mt-1 hidden sm:block">ì°¸ê³ /ì´ë¯¸ì§€</div>
      </div>
      <div class="flex-1 h-1 bg-gradient-to-r from-blue-300 to-pink-300 mx-1"></div>
      <div class="flex-1 flex flex-col items-center">
        <div class="w-8 h-8 md:w-10 md:h-10 rounded-full flex items-center justify-center font-bold text-white stepper-dot stepper-dot-animate text-sm md:text-base" id="step-3-dot">3</div>
        <div class="text-xs mt-1 hidden sm:block">ì—°ë½ì²˜</div>
      </div>
      <div class="flex-1 h-1 bg-gradient-to-r from-blue-300 to-pink-300 mx-1"></div>
      <div class="flex-1 flex flex-col items-center">
        <div class="w-8 h-8 md:w-10 md:h-10 rounded-full flex items-center justify-center font-bold text-white stepper-dot stepper-dot-animate text-sm md:text-base" id="step-4-dot">4</div>
        <div class="text-xs mt-1 hidden sm:block">í™•ì¸/ì œì¶œ</div>
      </div>
    </div>
    <form id="step-form">
      <!-- Step 1: ì œí’ˆì •ë³´ -->
      <div class="step" id="step-1">
        <div class="mb-4 p-3 rounded-xl bg-blue-50 border border-blue-200 text-blue-800 text-base font-semibold text-center shadow-sm animate-fadein-up">
          ğŸ“ <span class="font-bold">ì–´ë–¤ ì œí’ˆì„ ì°¾ìœ¼ì‹œë‚˜ìš”?</span><br>
          ì œí’ˆì˜ ì¢…ë¥˜, ëª¨ë¸ëª…, ìƒ‰ìƒ, ì›í•˜ëŠ” íŠ¹ì§•ì„ êµ¬ì²´ì ìœ¼ë¡œ ì ì–´ì£¼ì‹œë©´<br>
          ë” ë¹ ë¥´ê³  ì •í™•í•˜ê²Œ ìµœì €ê°€ë¥¼ ì°¾ì•„ë“œë¦´ ìˆ˜ ìˆì–´ìš”!<br>
          <span class="text-pink-600 font-bold">âš ï¸ â€œë¸Œëœë“œ ì œí’ˆâ€(ì˜ˆ: ë‚˜ì´í‚¤, ìƒ¤ë„¬, ì•¼ë§ˆí•˜ ë“±)ì€ ì˜ë¢°ë°›ì§€ ì•ŠìŠµë‹ˆë‹¤.</span><br>
          <span class="text-xs text-gray-500">(ì •í’ˆ ê±°ë˜ ì›ì¹™, ìœ„ì¡°í’ˆ/ì´ë¯¸í…Œì´ì…˜ ë°©ì§€, ë¸Œëœë“œ ì •ì±… ì¤€ìˆ˜ ë“±ìœ¼ë¡œ ì¸í•´<br>ë¸Œëœë“œê°€ ëª…í™•í•œ ì œí’ˆì€ ì¤‘ê°œí•´ë“œë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.)</span><br>
          <span class="block mt-2 text-blue-700">ì˜ˆì‹œ: â€œë¬´ì„  ì´ì–´í°, 2ì„¸ëŒ€, í™”ì´íŠ¸, ë…¸ì´ì¦ˆìº”ìŠ¬ë§ ì§€ì›â€</span>
        </div>
        <label class="block text-gray-700 font-semibold mb-2" for="productName">ì œí’ˆëª…</label>
        <input type="text" id="productName" required class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-400 focus:outline-none transition mb-4 input-animate" placeholder="ì˜ˆ: ë¬´ì„  ì´ì–´í°" />
        <div class="text-xs text-blue-500 mt-1">ğŸ’¡ ë¸Œëœë“œê°€ ì—†ëŠ” ì œí’ˆ, ë˜ëŠ” ë¸Œëœë“œê°€ ì¤‘ìš”í•˜ì§€ ì•Šì€ ì œí’ˆ ìœ„ì£¼ë¡œ ì˜ë¢°í•´ ì£¼ì„¸ìš”!</div>
        <label class="block text-gray-700 font-semibold mb-2" for="productDesc">ì œí’ˆ ì„¤ëª…</label>
        <textarea id="productDesc" required class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-400 focus:outline-none transition mb-4 input-animate" rows="3" placeholder="ì˜ˆ: ë¸Œëœë“œ, ëª¨ë¸ëª…, ìƒ‰ìƒ, ì›í•˜ëŠ” íŠ¹ì§• ë“±"></textarea>
        <label class="block text-gray-700 font-semibold mb-2" for="productPrice">ì˜ˆìƒ ê°€ê²©(ì›)</label>
        <input type="number" id="productPrice" min="1000" step="1" class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-400 focus:outline-none transition mb-2 input-animate" placeholder="ì˜ˆ: 1000 (ì›)" />
        <div class="text-xs text-pink-600 mb-4">â€» ìµœì†Œ ì˜ë¢° ê¸ˆì•¡ì€ <span class="font-bold">1,000ì›</span> ì´ìƒì…ë‹ˆë‹¤.</div>
        <button type="button" class="w-full mt-8 py-3 bg-blue-500 text-white font-bold rounded-lg shadow btn-animate" id="to-step-2">ë‹¤ìŒ</button>
      </div>
      <!-- Step 2: ì°¸ê³ /ì´ë¯¸ì§€ -->
      <div class="step hidden" id="step-2">
        <div class="mb-4 p-3 rounded-xl bg-emerald-50 border border-emerald-200 text-emerald-800 text-base font-semibold text-center shadow-sm animate-fadein-up">
          ğŸ”— <span class="font-bold">ì°¸ê³ í•  ë§Œí•œ ì‚¬ì´íŠ¸(ì‡¼í•‘ëª°, ë¸”ë¡œê·¸ ë“±) ë§í¬ë¥¼ ë‚¨ê²¨ì£¼ì‹œë©´<br>ë” ì •í™•í•˜ê²Œ ì›í•˜ëŠ” ì œí’ˆì„ íŒŒì•…í•  ìˆ˜ ìˆì–´ìš”!</span><br>
          ê³µì‹ ì‡¼í•‘ëª°, ê°€ê²©ë¹„êµ ì‚¬ì´íŠ¸, ë¸”ë¡œê·¸ í›„ê¸° ë“± ì–´ë–¤ ë§í¬ë“  ê´œì°®ì•„ìš”.<br>
          <span class="text-pink-600 font-bold">ë§í¬ëŠ” 1ê°œë§Œ ì…ë ¥í•´ ì£¼ì„¸ìš”.</span><br>
          <span class="text-xs text-gray-500">ğŸ’¡ ì´ë¯¸ì§€ëŠ” ìµœëŒ€ 5ì¥ê¹Œì§€ ì²¨ë¶€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br>ì œí’ˆì˜ ì‹¤ì œ ì‚¬ì§„, ìº¡ì²˜, ì„¤ëª…ì„œ ë“± ì–´ë–¤ ì´ë¯¸ì§€ë“  ë„ì›€ì´ ë©ë‹ˆë‹¤!</span>
        </div>
        <label class="block text-gray-700 font-semibold mb-2" for="productUrl">ì°¸ê³ ì‚¬ì´íŠ¸(ë§í¬ 1ê°œ)</label>
        <input type="text" id="productUrl" name="productUrl" class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-amber-400 focus:outline-none transition" placeholder="ì˜ˆ: https://example.com ë˜ëŠ” www.example.com" />
        <div class="text-xs text-emerald-500 mt-1">ğŸ’¡ http://, https://, www.ë¡œ ì‹œì‘í•˜ëŠ” ë§í¬ë§Œ ì…ë ¥í•´ ì£¼ì„¸ìš”.</div>
        <label class="block text-gray-700 font-semibold mb-2 mt-6" for="productImage">ì œí’ˆ ì´ë¯¸ì§€ ì—…ë¡œë“œ (ìµœëŒ€ 5ì¥)</label>
        <input type="file" id="productImage" name="productImage" accept="image/*" class="w-full" multiple />
        <div id="imagePreview" class="mt-2 flex flex-wrap gap-2"></div>
        <div class="text-xs text-emerald-500 mt-1">ğŸ’¡ ì—¬ëŸ¬ ì¥ ì²¨ë¶€ ì‹œ, ì²« ë²ˆì§¸ ì´ë¯¸ì§€ë¥¼ ëŒ€í‘œ ì´ë¯¸ì§€ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤.</div>
        <button type="button" class="w-full mt-8 py-3 bg-blue-500 text-white font-bold rounded-lg shadow btn-animate" id="to-step-3">ë‹¤ìŒ</button>
        <button type="button" class="w-full mt-2 py-2 bg-gray-200 text-gray-700 rounded-lg shadow btn-animate" id="back-step-1">ì´ì „</button>
      </div>
      <!-- Step 3: ì—°ë½ì²˜/ì´ë¦„/í†µê´€ë²ˆí˜¸ -->
      <div class="step hidden" id="step-3">
        <div class="mb-4 p-3 rounded-xl bg-yellow-50 border border-yellow-200 text-yellow-800 text-base font-semibold text-center shadow-sm animate-fadein-up">
          ğŸ“ <span class="font-bold">ì—°ë½ ê°€ëŠ¥í•œ ì •ë³´ë¥¼ ì •í™•íˆ ì…ë ¥í•´ ì£¼ì„¸ìš”!</span><br>
          ì…ë ¥í•˜ì‹  ì •ë³´ë¡œ ìµœì €ê°€ ì•ˆë‚´ ë° ì¶”ê°€ ë¬¸ì˜ë¥¼ ë“œë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br>
          <span class="text-pink-600 font-bold">ì´ë¦„ì€ â€œíšŒì›ê°€ì… ì‹œ ì…ë ¥í•œ ì´ë¦„â€ê³¼ ë°˜ë“œì‹œ ì¼ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤.</span><br>
          ì „í™”ë²ˆí˜¸, ì´ë©”ì¼, í†µê´€ê³ ìœ ë¶€í˜¸(í•„ìš”ì‹œ) ë“±ì€ ì‹¤ì œë¡œ ì—°ë½ ê°€ëŠ¥í•œ ì •ë³´ë¡œ ì…ë ¥í•´ ì£¼ì„¸ìš”.<br>
          <span class="text-xs text-gray-500">ì…ë ¥í•˜ì‹  ì •ë³´ëŠ” ì˜¤ì§ ì˜ë¢° ì²˜ë¦¬ì™€ ì•ˆë‚´ë¥¼ ìœ„í•´ì„œë§Œ ì‚¬ìš©ë©ë‹ˆë‹¤.</span>
        </div>
        <label class="block text-gray-700 font-semibold mb-2" for="userName">ì´ë¦„</label>
        <input type="text" id="userName" required class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-yellow-400 focus:outline-none transition mb-2 input-animate" placeholder="íšŒì›ê°€ì… ì‹œ ì…ë ¥í•œ ì´ë¦„" />
        <div class="text-xs text-yellow-600 mt-1">ğŸ’¡ íšŒì›ê°€ì… ì‹œ ì…ë ¥í•œ ì´ë¦„ê³¼ ë‹¤ë¥´ë©´ ì˜ë¢°ê°€ ì ‘ìˆ˜ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</div>
        <label class="block text-gray-700 font-semibold mb-2 mt-4" for="userPhone">ì „í™”ë²ˆí˜¸</label>
        <input type="tel" id="userPhone" required class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-yellow-400 focus:outline-none transition mb-2 input-animate" placeholder="ì˜ˆ: 01012345678" />
        <div class="text-xs text-yellow-600 mt-1">ï¿½ï¿½ ì •í™•í•œ ì—°ë½ì²˜ë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”. ì•ˆë‚´ ë° ë¬¸ì˜ì— ê¼­ í•„ìš”í•©ë‹ˆë‹¤.</div>
        <label class="block text-gray-700 font-semibold mb-2 mt-4" for="userCustoms">í†µê´€ê³ ìœ ë¶€í˜¸
          <a href="https://unipass.customs.go.kr/csp/persIndex.do" target="_blank" rel="noopener" class="ml-2 inline-block px-3 py-1 bg-emerald-100 text-emerald-700 rounded-lg shadow hover:bg-emerald-200 transition text-xs font-semibold align-middle">í†µê´€ë²ˆí˜¸ ì¡°íšŒ</a>
        </label>
        <input type="text" id="userCustoms" class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-yellow-400 focus:outline-none transition mb-2 input-animate" placeholder="í•´ì™¸ì§êµ¬ ë“± í†µê´€ì´ í•„ìš”í•œ ê²½ìš°ì—ë§Œ ì…ë ¥" />
        <div class="text-xs text-yellow-600 mt-1">ğŸ’¡ í•´ì™¸ì§êµ¬ ì‹œ ê¼­ í•„ìš”í•˜ë‹ˆ, ë¹ ì§ì—†ì´ ì…ë ¥í•´ ì£¼ì„¸ìš”!</div>
        <label class="block text-gray-700 font-semibold mb-2 mt-4" for="userEmail">ì´ë©”ì¼</label>
        <input type="email" id="userEmail" required class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-yellow-400 focus:outline-none transition mb-2 input-animate" placeholder="ì˜ˆ: user@email.com" />
        <div class="text-xs text-yellow-600 mt-1">ï¿½ï¿½ ì •í™•í•œ ì´ë©”ì¼ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”. ì•ˆë‚´ ë° ë¬¸ì˜ì— ê¼­ í•„ìš”í•©ë‹ˆë‹¤.</div>
        <button type="button" class="w-full mt-8 py-3 bg-blue-500 text-white font-bold rounded-lg shadow btn-animate" id="to-step-4">ë‹¤ìŒ</button>
        <button type="button" class="w-full mt-2 py-2 bg-gray-200 text-gray-700 rounded-lg shadow btn-animate" id="back-step-2">ì´ì „</button>
      </div>
      <!-- Step 4: í™•ì¸ ë° ì œì¶œ -->
      <div class="step hidden" id="step-4">
        <div class="mb-4 p-3 rounded-xl bg-gray-50 border border-gray-200 text-gray-800 text-base font-semibold text-center shadow-sm animate-fadein-up">
          âœ… <span class="font-bold">ì…ë ¥í•˜ì‹  ë‚´ìš©ì„ ë‹¤ì‹œ í•œ ë²ˆ í™•ì¸í•´ ì£¼ì„¸ìš”!</span><br>
          ì œì¶œ í›„ì—ëŠ” ìˆ˜ì •ì´ ì–´ë ¤ìš°ë‹ˆ, ëª¨ë“  ì •ë³´ê°€ ì •í™•í•œì§€ ê¼­ í™•ì¸í•´ ì£¼ì„¸ìš”.<br>
          <span class="text-pink-600 font-bold">ê°œì¸ì •ë³´ ìˆ˜ì§‘ ë° ì´ìš©ì— ë™ì˜í•˜ì…”ì•¼ ì˜ë¢°ê°€ ì™„ë£Œë©ë‹ˆë‹¤.</span><br>
          <span class="text-xs text-gray-500">ì…ë ¥í•˜ì‹  ì •ë³´ëŠ” ì˜¤ì§ ì˜ë¢° ì²˜ë¦¬ì™€ ì•ˆë‚´ë¥¼ ìœ„í•´ì„œë§Œ ì•ˆì „í•˜ê²Œ ì‚¬ìš©ë©ë‹ˆë‹¤.<br>
          ì˜ë¢°ê°€ ì ‘ìˆ˜ë˜ë©´, ì…ë ¥í•˜ì‹  ì—°ë½ì²˜ë¡œ ì•ˆë‚´ë¥¼ ë“œë¦½ë‹ˆë‹¤.</span>
        </div>
        <div class="bg-blue-50 rounded-xl p-4 mb-4 text-sm text-gray-700" id="confirm-summary"></div>
        <div class="flex items-start mt-2 mb-4">
          <input type="checkbox" id="privacyAgree" required class="mt-1 mr-2 w-5 h-5 text-pink-500 border-gray-300 rounded focus:ring-pink-400" />
          <label for="privacyAgree" class="text-gray-700 text-sm select-none">[í•„ìˆ˜] ê°œì¸ì •ë³´ ìˆ˜ì§‘ ë° ì´ìš©ì— ë™ì˜í•©ë‹ˆë‹¤.</label>
        </div>
        <div class="text-xs text-pink-600 mb-4">ğŸ’¡ ë™ì˜í•˜ì§€ ì•Šìœ¼ì‹œë©´ ì˜ë¢°ê°€ ì ‘ìˆ˜ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</div>
        <button type="submit" class="w-full py-3 bg-gradient-to-r from-amber-400 to-pink-500 text-white font-bold rounded-lg shadow-lg btn-animate text-lg" id="submit-btn">ìµœì €ê°€ ì˜ë¢° ì œì¶œí•˜ê¸°</button>
        <button type="button" class="w-full mt-2 py-2 bg-gray-200 text-gray-700 rounded-lg shadow btn-animate" id="back-step-3">ì´ì „</button>
      </div>
    </form>
    <div id="submit-success" class="hidden mt-6 p-4 bg-emerald-50 border border-emerald-200 rounded-xl text-emerald-700 text-center font-bold">ì˜ë¢°ê°€ ì •ìƒì ìœ¼ë¡œ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤!</div>
  </div>
  <script>
    // ìŠ¤í… ê´€ë¦¬
    let currentStep = 1;
    const steps = [1,2,3,4];
    function showStep(n) {
      steps.forEach(s => {
        const el = document.getElementById(`step-${s}`);
        el.classList.toggle('hidden', s !== n);
        const dot = document.getElementById(`step-${s}-dot`);
        dot.className = `w-10 h-10 rounded-full flex items-center justify-center font-bold text-white stepper-dot stepper-dot-animate${s === n ? ' stepper-dot-active' : ''}`;
        if (s === n) {
          el.classList.remove('slidein-step','fadein-step');
          el.classList.add('fadein-step');
        } else {
          el.classList.remove('fadein-step');
        }
      });
      currentStep = n;
    }
    showStep(1);
    // ìŠ¤í… ì´ë™ ë²„íŠ¼
    document.getElementById('to-step-2').onclick = function() {
      // Step 1 ìœ íš¨ì„±
      if (!document.getElementById('productName').value.trim() || !document.getElementById('productDesc').value.trim()) {
        alert('ì œí’ˆëª…ê³¼ ì„¤ëª…ì„ ëª¨ë‘ ì…ë ¥í•´ ì£¼ì„¸ìš”.');
        return;
      }
      const price = Number(document.getElementById('productPrice').value);
      if (isNaN(price) || price < 1000) {
        alert('ìµœì†Œ ì˜ë¢° ê¸ˆì•¡ì€ 1,000ì› ì´ìƒì…ë‹ˆë‹¤. ë” ì €ë ´í•œ ì œí’ˆì€ ì˜ë¢°ê°€ ì–´ë µìŠµë‹ˆë‹¤.');
        return;
      }
      showStep(2);
    };
    document.getElementById('to-step-3').onclick = function() {
      // Step 2 ìœ íš¨ì„±: ì°¸ê³ ì‚¬ì´íŠ¸ ë‹¨ì¼ ë§í¬
      const url = document.getElementById('productUrl').value.trim();
      const urlPattern = /^(https?:\/\/)?(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)$/;
      if (!urlPattern.test(url)) {
        alert('ì°¸ê³ ì‚¬ì´íŠ¸ëŠ” http://, https://, ë˜ëŠ” www.ë¡œ ì‹œì‘í•˜ëŠ” ì˜¬ë°”ë¥¸ ë§í¬ë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”.');
        return;
      }
      showStep(3);
    };
    document.getElementById('to-step-4').onclick = function() {
      // Step 3 ìœ íš¨ì„±
      if (!document.getElementById('userName').value.trim() || !document.getElementById('userPhone').value.trim() || !document.getElementById('userCustoms').value.trim() || !document.getElementById('userEmail').value.trim()) {
        alert('ì—°ë½ì²˜ ì •ë³´ë¥¼ ëª¨ë‘ ì…ë ¥í•´ ì£¼ì„¸ìš”.');
        return;
      }
      // ì´ë¦„ ì¼ì¹˜ ê²€ì¦ (ìŠ¤í… ì´ë™ ì‹œì—ë„)
      const user = JSON.parse(localStorage.getItem('user') || 'null');
      const userName = document.getElementById('userName').value.trim();
      if (!user || !user.name || user.name.trim() !== userName) {
        alert('íšŒì›ê°€ì… ì‹œ ì…ë ¥í•œ ì´ë¦„ê³¼ ë™ì¼í•˜ê²Œ ì…ë ¥í•´ì•¼ í•©ë‹ˆë‹¤.');
        return;
      }
      renderConfirmSummary();
      showStep(4);
    };
    document.getElementById('back-step-1').onclick = function() { showStep(1); };
    document.getElementById('back-step-2').onclick = function() { showStep(2); };
    document.getElementById('back-step-3').onclick = function() { showStep(3); };
    // ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸° ë° ìµœëŒ€ 5ì¥ ì œí•œ
    const imageInput = document.getElementById('productImage');
    const imagePreview = document.getElementById('imagePreview');
    let imageFiles = [];
    if (imageInput) {
      imageInput.addEventListener('change', function(event) {
        const files = Array.from(event.target.files);
        if (files.length + imageFiles.length > 5) {
          alert('ì´ë¯¸ì§€ëŠ” ìµœëŒ€ 5ì¥ê¹Œì§€ ì²¨ë¶€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.');
          imageInput.value = '';
          return;
        }
        files.forEach(file => {
          if (imageFiles.length < 5) {
            imageFiles.push(file);
          }
        });
        renderImagePreview();
        imageInput.value = '';
      });
    }
    function renderImagePreview() {
      imagePreview.innerHTML = '';
      imageFiles.forEach((file, idx) => {
        const reader = new FileReader();
        reader.onload = function(e) {
          const wrapper = document.createElement('div');
          wrapper.className = 'relative';
          wrapper.innerHTML = `<img src="${e.target.result}" alt="ë¯¸ë¦¬ë³´ê¸°" class="max-h-32 rounded-xl shadow-md border border-gray-200" />` +
            `<button type="button" class="absolute top-1 right-1 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs" data-idx="${idx}">&times;</button>`;
          imagePreview.appendChild(wrapper);
          wrapper.querySelector('button').onclick = function() {
            imageFiles.splice(idx, 1);
            renderImagePreview();
          };
        };
        reader.readAsDataURL(file);
      });
    }
    // Step 4: í™•ì¸ ìš”ì•½ ë Œë”ë§
    function renderConfirmSummary() {
      const productName = document.getElementById('productName').value;
      const productDesc = document.getElementById('productDesc').value;
      const productUrl = document.getElementById('productUrl').value.trim();
      const price = document.getElementById('productPrice').value;
      const summary = `
        <div><span class="font-bold">ì œí’ˆëª…:</span> ${productName}</div>
        <div><span class="font-bold">ì œí’ˆ ì„¤ëª…:</span> ${productDesc}</div>
        <div><span class="font-bold">ì˜ˆìƒ ê°€ê²©:</span> ${price ? price + 'ì›' : '(ë¯¸ì…ë ¥)'}</div>
        <div><span class="font-bold">ì°¸ê³ ì‚¬ì´íŠ¸:</span> ${productUrl ? (/^https?:\/\//.test(productUrl) || /^www\./.test(productUrl) ? `<a href='${productUrl}' target='_blank' class='text-blue-600 underline'>${productUrl}</a>` : `<span class='bg-gray-100 rounded px-2 py-1'>${productUrl}</span>`) : '<span class=\'text-gray-400\'>(ì—†ìŒ)</span>'}</div>
        <div><span class="font-bold">ì´ë¦„:</span> ${document.getElementById('userName').value}</div>
        <div><span class="font-bold">ì „í™”ë²ˆí˜¸:</span> ${document.getElementById('userPhone').value}</div>
        <div><span class="font-bold">í†µê´€ë²ˆí˜¸:</span> ${document.getElementById('userCustoms').value}</div>
        <div><span class="font-bold">ì´ë©”ì¼:</span> ${document.getElementById('userEmail').value}</div>
        <div><span class="font-bold">ì´ë¯¸ì§€:</span> <span id='confirm-images'></span></div>
      `;
      document.getElementById('confirm-summary').innerHTML = summary;
      // ì´ë¯¸ì§€ ì¸ë„¤ì¼ ë Œë”ë§
      const imgWrap = document.getElementById('confirm-images');
      if (imageFiles.length > 0) {
        imageFiles.forEach(file => {
          const reader = new FileReader();
          reader.onload = function(e) {
            const img = document.createElement('img');
            img.src = e.target.result;
            img.className = 'inline-block h-12 w-auto rounded-xl border border-gray-200 shadow-sm align-middle mr-2 mb-1';
            imgWrap.appendChild(img);
          };
          reader.readAsDataURL(file);
        });
      } else {
        imgWrap.innerHTML = '<span class="text-gray-400">(ì—†ìŒ)</span>';
      }
    }
    
    // ì˜ë¢° ìƒíƒœ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
    function updateRequestStatus(reqNum, newStatus, newDetail, newProgress) {
      const requestKey = 'request-' + reqNum;
      const requestData = JSON.parse(localStorage.getItem(requestKey) || '{}');
      
      if (requestData.reqNum) {
        requestData.status = newStatus;
        requestData.statusDetail = newDetail;
        requestData.progress = newProgress;
        requestData.lastUpdated = Date.now();
        
        localStorage.setItem(requestKey, JSON.stringify(requestData));
        
        // ìƒíƒœ ë³€ê²½ ì•Œë¦¼ (ë¸Œë¼ìš°ì € ì•Œë¦¼)
        if (Notification.permission === 'granted') {
          new Notification('PriceHunter ì˜ë¢° ìƒíƒœ ì—…ë°ì´íŠ¸', {
            body: `${newStatus}: ${newDetail}`,
            icon: '/favicon.ico'
          });
        }
        
        return true;
      }
      return false;
    }
    
    // ì œì¶œ
    document.getElementById('step-form').addEventListener('submit', function(e) {
      e.preventDefault();
      if (!document.getElementById('privacyAgree').checked) {
        alert('ê°œì¸ì •ë³´ ìˆ˜ì§‘ ë° ì´ìš©ì— ë™ì˜í•˜ì…”ì•¼ ì œì¶œì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.');
        return;
      }
      // ì´ë¦„ ì¼ì¹˜ ê²€ì¦ (ìŠ¤í… ì´ë™ ì‹œì—ë„)
      const user = JSON.parse(localStorage.getItem('user') || 'null');
      const userName = document.getElementById('userName').value.trim();
      if (!user || !user.name || user.name.trim() !== userName) {
        alert('íšŒì›ê°€ì… ì‹œ ì…ë ¥í•œ ì´ë¦„ê³¼ ë™ì¼í•˜ê²Œ ì…ë ¥í•´ì•¼ í•©ë‹ˆë‹¤.');
        return;
      }
      // ì°¸ê³ ì‚¬ì´íŠ¸ ë‹¨ì¼ ë§í¬ ìœ íš¨ì„± ê²€ì‚¬ (ìµœì¢… ì œì¶œ ì‹œì—ë„)
      const url = document.getElementById('productUrl').value.trim();
      const urlPattern = /^(https?:\/\/)?(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)$/;
      if (!urlPattern.test(url)) {
        alert('ì°¸ê³ ì‚¬ì´íŠ¸ëŠ” http://, https://, ë˜ëŠ” www.ë¡œ ì‹œì‘í•˜ëŠ” ì˜¬ë°”ë¥¸ ë§í¬ë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”.');
        return;
      }
      // ì´ë¯¸ì§€ ì´ ìš©ëŸ‰ ì²´í¬ (5MB ì œí•œ)
      function getTotalImageSize(files) {
        return files.reduce((sum, file) => sum + file.size, 0);
      }
      if (getTotalImageSize(imageFiles) > 5 * 1024 * 1024) {
        alert('ì²¨ë¶€í•œ ì´ë¯¸ì§€ì˜ ì´ ìš©ëŸ‰ì´ 5MBë¥¼ ì´ˆê³¼í•©ë‹ˆë‹¤. ë” ì‘ì€ ì´ë¯¸ì§€ë¡œ ì²¨ë¶€í•´ ì£¼ì„¸ìš”.');
        return;
      }
      // í•˜ë£¨ 10ê±´ ì œí•œ (í…ŒìŠ¤íŠ¸ìš©ìœ¼ë¡œ ì™„í™”)
      const today = new Date().toISOString().slice(0,10);
      const userId = user && user.email ? user.email : userName;
      const reqCountKey = `requestCount-${today}-${userId}`;
      const reqCount = Number(localStorage.getItem(reqCountKey) || '0');
      if (reqCount >= 10) {
        alert('í•˜ë£¨ ìµœëŒ€ 10ê±´ê¹Œì§€ë§Œ ì˜ë¢°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‚´ì¼ ë‹¤ì‹œ ì´ìš©í•´ ì£¼ì„¸ìš”!');
        return;
      }
      // ì…ë ¥ê°’ ìˆ˜ì§‘
      const name = document.getElementById('productName').value;
      const desc = document.getElementById('productDesc').value;
      const urls = [url]; // ë‹¨ì¼ ë§í¬ë¡œ ì €ì¥
      const email = document.getElementById('userEmail').value;
      const phone = document.getElementById('userPhone').value;
      
      const customs = document.getElementById('userCustoms').value;
      const price = Number(document.getElementById('productPrice').value);
      // ê³ ìœ  ì˜ë¢°ë²ˆí˜¸ ìƒì„±
      function generateReqNum() {
        const now = new Date();
        const y = now.getFullYear();
        const m = String(now.getMonth()+1).padStart(2,'0');
        const d = String(now.getDate()).padStart(2,'0');
        const rand = String(Math.floor(Math.random()*900)+100);
        return `#PH-${y}${m}${d}${rand}`;
      }
      const reqNum = generateReqNum();
      // ì´ë¯¸ì§€ base64 ë°°ì—´ ì €ì¥
      if (imageFiles.length > 0) {
        const imgArr = [];
        let loaded = 0;
        imageFiles.forEach((file, idx) => {
          const reader = new FileReader();
          reader.onload = function(e2) {
            imgArr[idx] = e2.target.result;
            loaded++;
            if (loaded === imageFiles.length) {
              saveRequest(imgArr);
            }
          };
          reader.readAsDataURL(file);
        });
      } else {
        saveRequest([]);
      }
      function saveRequest(imgArr) {
        const reqData = {
          name, 
          desc, 
          urls, 
          images: imgArr, 
          email, 
          phone, 
   
          customs, 
          price, 
          userName, 
          date: Date.now(),
          reqNum: reqNum,
          status: 'ì ‘ìˆ˜ë¨',
          statusDetail: 'ì˜ë¢°ê°€ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤. ê²€ìƒ‰ì„ ì‹œì‘í•©ë‹ˆë‹¤.',
          estimatedTime: '2-3ì¼ ë‚´ ì™„ë£Œ ì˜ˆì •',
          lastUpdated: Date.now(),
          progress: 10
        };
        localStorage.setItem('request-' + reqNum, JSON.stringify(reqData));
        sessionStorage.setItem('request', JSON.stringify({...reqData, reqNum}));
        document.getElementById('submit-success').classList.remove('hidden');
        setTimeout(() => { window.location.href = 'request-complete.html'; }, 1200);
        // í•˜ë£¨ ì˜ë¢° ì¹´ìš´íŠ¸ ì¦ê°€
        localStorage.setItem(reqCountKey, String(reqCount + 1));
      }
    });
    // ì´ë©”ì¼ ì…ë ¥ë€ ìë™ ì±„ìš°ê¸° ë° ì½ê¸°ì „ìš© ì²˜ë¦¬
    window.addEventListener('DOMContentLoaded', function() {
      var user = JSON.parse(localStorage.getItem('user') || 'null');
      var loggedIn = localStorage.getItem('loggedIn') === 'true';
      var emailInput = document.getElementById('userEmail');
      if (emailInput && user && user.email && loggedIn) {
        emailInput.value = user.email;
        emailInput.readOnly = true;
        emailInput.classList.add('bg-gray-100','cursor-not-allowed');
      }
    });
  </script>
</body>
</html> 