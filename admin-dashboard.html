<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>관리자 대시보드 - PriceHunter</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Firebase SDK -->
    <script type="module">
        // Firebase 설정
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getFirestore, collection, getDocs, addDoc, updateDoc, deleteDoc, doc, query, orderBy, where } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';
        import { getAuth, signInWithEmailAndPassword, signOut, onAuthStateChanged } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';
        
        // Firebase 설정
        const firebaseConfig = {
            apiKey: "AIzaSyDBZxKyMS7eeBTbPnbZkj0WWOZQHNldoL4",
            authDomain: "pricehunter-99a1b.firebaseapp.com",
            projectId: "pricehunter-99a1b",
            storageBucket: "pricehunter-99a1b.firebasestorage.app",
            messagingSenderId: "242265693919",
            appId: "1:242265693919:web:74234d942b82a51541136a",
            measurementId: "G-4BKLV4EVB9"
        };
        
        // Firebase 초기화
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const auth = getAuth(app);
        
        // 전역 변수로 설정
        window.db = db;
        window.auth = auth;
        window.firebaseApp = app;
        
        console.log('✅ Firebase 초기화 완료');
        
        // 인증 상태 확인
        onAuthStateChanged(auth, (user) => {
            if (user) {
                console.log('✅ 관리자 로그인됨:', user.email);
                document.getElementById('admin-info').textContent = user.email;
                document.getElementById('login-section').classList.add('hidden');
                document.getElementById('dashboard-section').classList.remove('hidden');
                loadDashboardData();
            } else {
                console.log('❌ 로그인되지 않음');
                document.getElementById('login-section').classList.remove('hidden');
                document.getElementById('dashboard-section').classList.add('hidden');
            }
        });
        
        // 관리자 로그인 함수
        window.adminLogin = async function() {
            const email = document.getElementById('admin-email').value;
            const password = document.getElementById('admin-password').value;
            
            try {
                const userCredential = await signInWithEmailAndPassword(auth, email, password);
                console.log('✅ 관리자 로그인 성공');
            } catch (error) {
                console.error('❌ 로그인 실패:', error);
                alert('로그인 실패: ' + error.message);
            }
        };
        
        // 테스트 관리자 계정 생성 함수
        window.createAdminAccount = async function() {
            try {
                console.log('🔧 테스트 관리자 계정 생성 시작...');
                
                // Firebase Auth에서 계정 생성
                const { createUserWithEmailAndPassword } = await import('https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js');
                
                const userCredential = await createUserWithEmailAndPassword(auth, 'admin@pricehunter.com', 'admin1234');
                console.log('✅ 테스트 관리자 계정 생성 완료:', userCredential.user.email);
                
                // Firestore에 관리자 정보 저장
                const { doc, setDoc } = await import('https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js');
                await setDoc(doc(db, 'admins', userCredential.user.uid), {
                    email: 'admin@pricehunter.com',
                    role: 'admin',
                    createdAt: new Date(),
                    permissions: ['read', 'write', 'delete', 'admin']
                });
                
                alert('✅ 테스트 관리자 계정이 생성되었습니다!\n\n이메일: admin@pricehunter.com\n비밀번호: admin1234\n\n이제 이 계정으로 로그인할 수 있습니다.');
                
                // 입력 필드에 자동 입력
                document.getElementById('admin-email').value = 'admin@pricehunter.com';
                document.getElementById('admin-password').value = 'admin1234';
                
            } catch (error) {
                console.error('❌ 테스트 계정 생성 실패:', error);
                
                if (error.code === 'auth/email-already-in-use') {
                    alert('이미 존재하는 계정입니다!\n\n이메일: admin@pricehunter.com\n비밀번호: admin1234\n\n이 계정으로 로그인해보세요.');
                    
                    // 입력 필드에 자동 입력
                    document.getElementById('admin-email').value = 'admin@pricehunter.com';
                    document.getElementById('admin-password').value = 'admin1234';
                } else {
                    alert('테스트 계정 생성 실패: ' + error.message);
                }
            }
        };
        
        // 로그아웃 함수
        window.adminLogout = async function() {
            try {
                await signOut(auth);
                console.log('✅ 로그아웃 완료');
            } catch (error) {
                console.error('❌ 로그아웃 실패:', error);
            }
        };
        
        // 대시보드 데이터 로드
        window.loadDashboardData = async function() {
            try {
                console.log('🔄 대시보드 데이터 로드 시작...');
                
                // 통계 데이터 로드
                await loadStatistics();
                
                // 최근 활동 로드
                await loadRecentActivities();
                
                console.log('✅ 대시보드 데이터 로드 완료');
            } catch (error) {
                console.error('❌ 대시보드 데이터 로드 실패:', error);
            }
        };
        
        // 통계 데이터 로드
        async function loadStatistics() {
            try {
                // 의뢰 통계
                const requestsQuery = query(collection(db, 'requests'), orderBy('createdAt', 'desc'));
                const requestsSnapshot = await getDocs(requestsQuery);
                const totalRequests = requestsSnapshot.size;
                
                const completedRequests = requestsSnapshot.docs.filter(doc => 
                    doc.data().status === 'completed'
                ).length;
                
                // 문의 통계
                const inquiriesQuery = query(collection(db, 'inquiries'), orderBy('createdAt', 'desc'));
                const inquiriesSnapshot = await getDocs(inquiriesQuery);
                const totalInquiries = inquiriesSnapshot.size;
                
                const pendingInquiries = inquiriesSnapshot.docs.filter(doc => 
                    !doc.data().answered
                ).length;
                
                // 회원 통계
                const membersQuery = query(collection(db, 'members'), orderBy('createdAt', 'desc'));
                const membersSnapshot = await getDocs(membersQuery);
                const totalMembers = membersSnapshot.size;
                
                // UI 업데이트
                document.getElementById('total-requests').textContent = totalRequests;
                document.getElementById('completed-requests').textContent = completedRequests;
                document.getElementById('total-members').textContent = totalMembers;
                document.getElementById('pending-inquiries').textContent = pendingInquiries;
                
                console.log('✅ 통계 데이터 로드 완료');
            } catch (error) {
                console.error('❌ 통계 데이터 로드 실패:', error);
            }
        }
        
        // 최근 활동 로드
        async function loadRecentActivities() {
            try {
                // 최근 의뢰
                const recentRequestsQuery = query(collection(db, 'requests'), orderBy('createdAt', 'desc'), where('status', '!=', 'deleted'));
                const recentRequestsSnapshot = await getDocs(recentRequestsQuery);
                const recentRequests = recentRequestsSnapshot.docs.slice(0, 5);
                
                const recentRequestsDiv = document.getElementById('recent-requests');
                recentRequestsDiv.innerHTML = recentRequests.map(doc => {
                    const data = doc.data();
                    return `
                        <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                            <div>
                                <p class="font-semibold text-sm">${data.productName || '제품명 없음'}</p>
                                <p class="text-xs text-gray-500">${data.userName || '익명'} • ${data.createdAt ? new Date(data.createdAt.toDate()).toLocaleDateString() : ''}</p>
                            </div>
                            <span class="px-2 py-1 text-xs font-semibold rounded-full ${data.status === 'completed' ? 'bg-green-100 text-green-800' : 'bg-yellow-100 text-yellow-800'}">${data.status || '대기중'}</span>
                        </div>
                    `;
                }).join('');
                
                // 최근 문의
                const recentInquiriesQuery = query(collection(db, 'inquiries'), orderBy('createdAt', 'desc'));
                const recentInquiriesSnapshot = await getDocs(recentInquiriesQuery);
                const recentInquiries = recentInquiriesSnapshot.docs.slice(0, 5);
                
                const recentInquiriesDiv = document.getElementById('recent-inquiries');
                recentInquiriesDiv.innerHTML = recentInquiries.map(doc => {
                    const data = doc.data();
                    return `
                        <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                            <div>
                                <p class="font-semibold text-sm">${data.subject || '제목 없음'}</p>
                                <p class="text-xs text-gray-500">${data.userName || '익명'} • ${data.createdAt ? new Date(data.createdAt.toDate()).toLocaleDateString() : ''}</p>
                            </div>
                            <span class="px-2 py-1 text-xs font-semibold rounded-full ${data.answered ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}">${data.answered ? '답변완료' : '미답변'}</span>
                        </div>
                    `;
                }).join('');
                
                console.log('✅ 최근 활동 로드 완료');
            } catch (error) {
                console.error('❌ 최근 활동 로드 실패:', error);
            }
        }
        
        // 섹션 전환 함수
        window.switchSection = function(section) {
            // 모든 섹션 숨기기
            document.querySelectorAll('.section-content').forEach(el => {
                el.classList.add('hidden');
            });
            
            // 모든 사이드바 아이템 비활성화
            document.querySelectorAll('.sidebar-item').forEach(el => {
                el.classList.remove('active');
            });
            
            // 선택된 섹션 표시
            document.getElementById(section + '-section').classList.remove('hidden');
            
            // 선택된 사이드바 아이템 활성화
            document.querySelectorAll('.sidebar-item').forEach(el => {
                if (el.getAttribute('data-section') === section) {
                    el.classList.add('active');
                }
            });
            
            // 섹션별 데이터 로드
            loadSectionData(section);
        };
        
        // 섹션별 데이터 로드
        async function loadSectionData(section) {
            switch(section) {
                case 'dashboard':
                    await loadDashboardData();
                    break;
                case 'requests':
                    await loadRequestsData();
                    break;
                case 'inquiries':
                    await loadInquiriesData();
                    break;
                case 'members':
                    await loadMembersData();
                    break;
            }
        }
        
        // 의뢰 데이터 로드
        async function loadRequestsData() {
            try {
                console.log('🔄 의뢰 데이터 로드 시작...');
                
                const requestsQuery = query(collection(db, 'requests'), orderBy('createdAt', 'desc'));
                const requestsSnapshot = await getDocs(requestsQuery);
                const requests = requestsSnapshot.docs.map(doc => ({
                    id: doc.id,
                    ...doc.data()
                }));
                
                window.allRequests = requests;
                renderRequestList(requests);
                
                console.log('✅ 의뢰 데이터 로드 완료:', requests.length, '개');
            } catch (error) {
                console.error('❌ 의뢰 데이터 로드 실패:', error);
            }
        }
        
        // 문의 데이터 로드
        async function loadInquiriesData() {
            try {
                console.log('🔄 문의 데이터 로드 시작...');
                
                const inquiriesQuery = query(collection(db, 'inquiries'), orderBy('createdAt', 'desc'));
                const inquiriesSnapshot = await getDocs(inquiriesQuery);
                const inquiries = inquiriesSnapshot.docs.map(doc => ({
                    id: doc.id,
                    ...doc.data()
                }));
                
                window.allInquiries = inquiries;
                renderInquiriesTable(inquiries);
                
                console.log('✅ 문의 데이터 로드 완료:', inquiries.length, '개');
            } catch (error) {
                console.error('❌ 문의 데이터 로드 실패:', error);
            }
        }
        
        // 회원 데이터 로드
        async function loadMembersData() {
            try {
                console.log('🔄 회원 데이터 로드 시작...');
                
                const membersQuery = query(collection(db, 'members'), orderBy('createdAt', 'desc'));
                const membersSnapshot = await getDocs(membersQuery);
                const members = membersSnapshot.docs.map(doc => ({
                    id: doc.id,
                    ...doc.data()
                }));
                
                window.allMembers = members;
                renderMembersTable(members);
                
                console.log('✅ 회원 데이터 로드 완료:', members.length, '개');
            } catch (error) {
                console.error('❌ 회원 데이터 로드 실패:', error);
            }
        }
        
        // 의뢰 목록 렌더링
        function renderRequestList(requests) {
            const listContainer = document.getElementById('request-list');
            if (!listContainer) return;
            
            listContainer.innerHTML = requests.map(request => `
                <li class="flex items-center p-4 hover:bg-pink-100 transition cursor-pointer" onclick="showRequestDetail('${request.id}')">
                    <div class="col-span-1">
                        <input type="checkbox" class="request-checkbox w-4 h-4 text-pink-600" value="${request.id}">
                    </div>
                    <div class="col-span-2">
                        <div class="font-semibold">${request.productName || '제품명 없음'}</div>
                        <div class="text-sm text-gray-600">${request.userName || '익명'}</div>
                    </div>
                    <div class="col-span-1 text-center text-sm text-gray-600">
                        ${request.createdAt ? new Date(request.createdAt.toDate()).toLocaleDateString() : ''}
                    </div>
                    <div class="col-span-1 text-center">
                        <span class="px-2 py-1 text-xs font-semibold rounded-full ${getStatusColor(request.status)}">${request.status || '대기중'}</span>
                    </div>
                    <div class="col-span-1 text-center text-sm text-gray-600">
                        ${request.purchaseMethod || '일반구매'}
                    </div>
                    <div class="col-span-1 text-center">
                        <span class="px-2 py-1 text-xs font-semibold rounded-full ${getPurchaseStatusColor(request.purchaseStatus)}">${request.purchaseStatus || '미구매'}</span>
                    </div>
                    <div class="col-span-1 text-center">
                        <span class="px-2 py-1 text-xs font-semibold rounded-full ${request.notified ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}">${request.notified ? '알림완료' : '미알림'}</span>
                    </div>
                </li>
            `).join('');
        }
        
        // 문의 테이블 렌더링
        function renderInquiriesTable(inquiries) {
            const tableBody = document.getElementById('inquiries-table-body');
            if (!tableBody) return;
            
            tableBody.innerHTML = inquiries.map(inquiry => `
                <tr class="hover:bg-gray-50">
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${inquiry.id}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${inquiry.userName || '익명'}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${inquiry.subject || '제목 없음'}</td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="px-2 py-1 text-xs font-semibold rounded-full ${inquiry.answered ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}">${inquiry.answered ? '답변완료' : '대기중'}</span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                        ${inquiry.createdAt ? new Date(inquiry.createdAt.toDate()).toLocaleDateString() : ''}
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                        <button onclick="showInquiryDetail('${inquiry.id}')" class="text-blue-600 hover:text-blue-900">상세보기</button>
                    </td>
                </tr>
            `).join('');
        }
        
        // 회원 테이블 렌더링
        function renderMembersTable(members) {
            const tableBody = document.getElementById('members-table-body');
            if (!tableBody) return;
            
            tableBody.innerHTML = members.map(member => `
                <tr class="hover:bg-gray-50">
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="flex items-center">
                            <div class="h-10 w-10 flex-shrink-0">
                                <img class="h-10 w-10 rounded-full" src="${member.profileImage || 'https://via.placeholder.com/40'}" alt="">
                            </div>
                        </div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">${member.name || '이름 없음'}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                        <span class="px-2 py-1 text-xs font-semibold rounded-full ${member.loginType === 'kakao' ? 'bg-yellow-100 text-yellow-800' : 'bg-blue-100 text-blue-800'}">${member.loginType === 'kakao' ? '카카오' : '일반'}</span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${member.email}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${member.phone || '-'}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                        ${member.createdAt ? new Date(member.createdAt.toDate()).toLocaleDateString() : ''}
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${member.requestCount || 0}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                        <button onclick="showMemberDetail('${member.id}')" class="text-blue-600 hover:text-blue-900">상세보기</button>
                    </td>
                </tr>
            `).join('');
        }
        
        // 상태별 색상 반환
        function getStatusColor(status) {
            switch(status) {
                case 'completed': return 'bg-green-100 text-green-800';
                case 'in-progress': return 'bg-yellow-100 text-yellow-800';
                case 'pending': return 'bg-red-100 text-red-800';
                default: return 'bg-gray-100 text-gray-800';
            }
        }
        
        // 구매 상태별 색상 반환
        function getPurchaseStatusColor(status) {
            switch(status) {
                case 'purchased': return 'bg-green-100 text-green-800';
                case 'cancelled': return 'bg-red-100 text-red-800';
                default: return 'bg-gray-100 text-gray-800';
            }
        }
        
        // 의뢰 상세 보기
        window.showRequestDetail = function(requestId) {
            const request = window.allRequests.find(r => r.id === requestId);
            if (!request) return;
            
            // 상세 정보 표시 로직
            document.getElementById('detail-num').textContent = request.id;
            document.getElementById('detail-name').textContent = request.productName || '제품명 없음';
            document.getElementById('detail-desc').textContent = request.description || '설명 없음';
            document.getElementById('detail-url').textContent = request.url || 'URL 없음';
            document.getElementById('detail-price').textContent = request.price || '가격 없음';
            document.getElementById('detail-username').textContent = request.userName || '이름 없음';
            document.getElementById('detail-email').textContent = request.email || '이메일 없음';
            document.getElementById('detail-phone').textContent = request.phone || '전화번호 없음';
            
            document.getElementById('detail-section').classList.remove('hidden');
        };
        
        // 문의 상세 보기
        window.showInquiryDetail = function(inquiryId) {
            const inquiry = window.allInquiries.find(i => i.id === inquiryId);
            if (!inquiry) return;
            
            // 상세 정보 표시 로직
            document.getElementById('inquiry-id').textContent = inquiry.id;
            document.getElementById('inquiry-title').textContent = inquiry.subject || '제목 없음';
            document.getElementById('inquiry-username').textContent = inquiry.userName || '이름 없음';
            document.getElementById('inquiry-email').textContent = inquiry.email || '이메일 없음';
            document.getElementById('inquiry-phone').textContent = inquiry.phone || '전화번호 없음';
            document.getElementById('inquiry-date').textContent = inquiry.createdAt ? new Date(inquiry.createdAt.toDate()).toLocaleString() : '';
            document.getElementById('inquiry-content').textContent = inquiry.message || '내용 없음';
            
            document.getElementById('inquiry-detail-section').classList.remove('hidden');
        };
        
        // 회원 상세 보기
        window.showMemberDetail = function(memberId) {
            const member = window.allMembers.find(m => m.id === memberId);
            if (!member) return;
            
            // 회원 상세 정보 표시 로직
            alert(`회원 상세 정보\n이름: ${member.name}\n이메일: ${member.email}\n가입일: ${member.createdAt ? new Date(member.createdAt.toDate()).toLocaleDateString() : ''}`);
        };
        
        // 페이지 이동 함수
        window.goToPage = function(page) {
            window.location.href = page;
        };
        
        // Firebase 연결 테스트
        window.testFirebaseConnection = function() {
            console.log('🔥 Firebase 연결 테스트 시작...');
            console.log('Firebase 앱:', window.firebaseApp);
            console.log('Firestore:', window.db);
            console.log('Auth:', window.auth);
            
            // 간단한 Firestore 읽기 테스트
            getDocs(collection(db, 'test')).then(() => {
                console.log('✅ Firestore 읽기 테스트 성공');
                alert('Firebase 연결이 정상입니다!');
            }).catch(error => {
                console.log('❌ Firestore 읽기 테스트 실패:', error);
                alert('Firebase 연결에 문제가 있습니다: ' + error.message);
            });
        };
        
        console.log('🚀 Firebase 모듈 로드 완료');
    </script>
    
    <style>
        body { font-family: 'Inter', 'Noto Sans KR', sans-serif; }
        .sidebar-item.active { background-color: #ec4899; color: white; }
        .tab-btn.active { background-color: #ec4899; color: white; }
        .filter-btn.active { background-color: #6b7280; color: white; }
    </style>
</head>
<body class="bg-gradient-to-br from-gray-50 via-blue-50 to-emerald-50 min-h-screen">
    <!-- 로그인 섹션 -->
    <div id="login-section" class="min-h-screen flex items-center justify-center">
        <div class="bg-white rounded-xl shadow-2xl p-8 w-full max-w-md">
            <div class="text-center mb-8">
                <h1 class="text-3xl font-bold text-pink-600">PriceHunter</h1>
                <p class="text-gray-600">관리자 로그인</p>
            </div>
            
            <form onsubmit="event.preventDefault(); adminLogin();" class="space-y-6">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">이메일</label>
                    <input type="email" id="admin-email" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-400 focus:outline-none" placeholder="admin@pricehunter.com">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">비밀번호</label>
                    <input type="password" id="admin-password" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-400 focus:outline-none" placeholder="비밀번호">
                </div>
                
                <button type="submit" class="w-full bg-gradient-to-r from-pink-500 to-purple-500 text-white font-bold py-3 px-4 rounded-lg hover:from-pink-600 hover:to-purple-600 transition shadow-lg">
                    🔐 로그인
                </button>
            </form>
            
            <div class="mt-6 text-center space-y-3">
                <button onclick="goToPage('index.html')" class="text-pink-600 hover:text-pink-700 text-sm block w-full">
                    🏠 메인페이지로 돌아가기
                </button>
                <button onclick="createAdminAccount()" class="text-blue-600 hover:text-blue-700 text-sm block w-full">
                    🔧 테스트 관리자 계정 생성
                </button>
                <div class="text-xs text-gray-500 mt-2">
                    테스트용 계정: admin@pricehunter.com / admin1234
                </div>
            </div>
        </div>
    </div>

    <!-- 대시보드 섹션 -->
    <div id="dashboard-section" class="hidden">
        <div class="flex h-screen">
            <!-- 사이드바 -->
            <div class="w-64 bg-white shadow-lg">
                <div class="p-6 border-b">
                    <h1 class="text-xl font-bold text-pink-600">PriceHunter</h1>
                    <p class="text-sm text-gray-500">관리자 대시보드</p>
                    <p id="admin-info" class="text-xs text-gray-400 mt-1"></p>
                </div>
                
                <nav class="p-4">
                    <div class="space-y-2">
                        <button class="sidebar-item w-full text-left px-4 py-3 rounded-lg font-semibold hover:bg-pink-50 transition active" data-section="dashboard">
                            📊 대시보드
                        </button>
                        <button class="sidebar-item w-full text-left px-4 py-3 rounded-lg font-semibold hover:bg-pink-50 transition" data-section="requests">
                            📋 의뢰 관리
                        </button>
                        <button class="sidebar-item w-full text-left px-4 py-3 rounded-lg font-semibold hover:bg-pink-50 transition" data-section="inquiries">
                            💬 1:1 문의
                        </button>
                        <button class="sidebar-item w-full text-left px-4 py-3 rounded-lg font-semibold hover:bg-pink-50 transition" data-section="members">
                            👥 회원 관리
                        </button>
                    </div>
                </nav>
                
                <div class="absolute bottom-4 left-4 right-4">
                    <button onclick="adminLogout()" class="w-full px-4 py-2 bg-red-500 text-white rounded-lg font-semibold hover:bg-red-600 transition">
                        🔓 로그아웃
                    </button>
                </div>
            </div>

            <!-- 메인 콘텐츠 -->
            <div class="flex-1 overflow-auto">
                <!-- 대시보드 섹션 -->
                <div id="dashboard-section" class="section-content p-8">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-gray-800">📊 대시보드</h2>
                        <div class="flex gap-2">
                            <button onclick="goToPage('index.html')" class="px-4 py-2 bg-blue-500 text-white rounded-lg font-semibold hover:bg-blue-600 transition">
                                🏠 메인페이지로
                            </button>
                            <button onclick="goToPage('member-dashboard.html')" class="px-4 py-2 bg-green-500 text-white rounded-lg font-semibold hover:bg-green-600 transition">
                                👤 회원대시보드로
                            </button>
                            <button onclick="testFirebaseConnection()" class="px-4 py-2 bg-purple-500 text-white rounded-lg font-semibold hover:bg-purple-600 transition">
                                🔥 Firebase 연결 테스트
                            </button>
                        </div>
                    </div>
                    
                    <!-- 통계 카드 -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                        <div class="bg-white rounded-xl shadow-lg p-6">
                            <div class="flex items-center">
                                <div class="p-3 bg-blue-100 rounded-lg">
                                    <span class="text-2xl">📋</span>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm text-gray-500">총 의뢰</p>
                                    <p class="text-2xl font-bold text-gray-800" id="total-requests">0</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-white rounded-xl shadow-lg p-6">
                            <div class="flex items-center">
                                <div class="p-3 bg-green-100 rounded-lg">
                                    <span class="text-2xl">✅</span>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm text-gray-500">완료된 의뢰</p>
                                    <p class="text-2xl font-bold text-gray-800" id="completed-requests">0</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-white rounded-xl shadow-lg p-6">
                            <div class="flex items-center">
                                <div class="p-3 bg-orange-100 rounded-lg">
                                    <span class="text-2xl">👥</span>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm text-gray-500">총 회원</p>
                                    <p class="text-2xl font-bold text-gray-800" id="total-members">0</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-white rounded-xl shadow-lg p-6">
                            <div class="flex items-center">
                                <div class="p-3 bg-purple-100 rounded-lg">
                                    <span class="text-2xl">💬</span>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm text-gray-500">미답변 문의</p>
                                    <p class="text-2xl font-bold text-gray-800" id="pending-inquiries">0</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 최근 활동 -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div class="bg-white rounded-xl shadow-lg p-6">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4">최근 의뢰</h3>
                            <div id="recent-requests" class="space-y-3">
                                <!-- 동적으로 생성됨 -->
                            </div>
                        </div>
                        
                        <div class="bg-white rounded-xl shadow-lg p-6">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4">최근 문의</h3>
                            <div id="recent-inquiries" class="space-y-3">
                                <!-- 동적으로 생성됨 -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 의뢰 관리 섹션 -->
                <div id="requests-section" class="section-content p-8 hidden">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-gray-800">📋 의뢰 관리</h2>
                        <div class="flex gap-2">
                            <button onclick="goToPage('index.html')" class="px-4 py-2 bg-blue-500 text-white rounded-lg font-semibold hover:bg-blue-600 transition">
                                🏠 메인페이지로
                            </button>
                            <button onclick="goToPage('request.html')" class="px-4 py-2 bg-green-500 text-white rounded-lg font-semibold hover:bg-green-600 transition">
                                📝 의뢰페이지로
                            </button>
                        </div>
                    </div>
                    
                    <!-- 의뢰 목록 -->
                    <div class="bg-white rounded-xl shadow-lg overflow-hidden">
                        <div class="font-bold text-gray-700 p-4 border-b">접수된 의뢰 목록</div>
                        <div class="grid grid-cols-8 gap-2 px-4 py-2 bg-pink-100 text-sm font-bold text-pink-700">
                            <div class="col-span-1">선택</div>
                            <div class="col-span-2">의뢰번호/회원명</div>
                            <div class="col-span-1 text-center">의뢰일시</div>
                            <div class="col-span-1 text-center">진행상황</div>
                            <div class="col-span-1 text-center">구매방식</div>
                            <div class="col-span-1 text-center">구매상태</div>
                            <div class="col-span-1 text-center">알림상태</div>
                        </div>
                        <ul id="request-list" class="bg-pink-50 divide-y divide-pink-100">
                            <!-- 동적으로 생성됨 -->
                        </ul>
                    </div>
                    
                    <!-- 의뢰 상세 및 결과 입력 -->
                    <div id="detail-section" class="w-full hidden mt-6">
                        <div class="bg-white rounded-xl shadow-lg p-6 mb-4">
                            <div class="mb-2 text-gray-700 font-bold">의뢰 상세</div>
                            <div class="grid grid-cols-2 gap-4 text-sm">
                                <div><span class="font-semibold">의뢰번호:</span> <span id="detail-num"></span></div>
                                <div><span class="font-semibold">제품명:</span> <span id="detail-name"></span></div>
                                <div><span class="font-semibold">제품설명:</span> <span id="detail-desc"></span></div>
                                <div><span class="font-semibold">참고사이트:</span> <span id="detail-url"></span></div>
                                <div><span class="font-semibold">가격:</span> <span id="detail-price"></span></div>
                                <div><span class="font-semibold">이름:</span> <span id="detail-username"></span></div>
                                <div><span class="font-semibold">이메일:</span> <span id="detail-email"></span></div>
                                <div><span class="font-semibold">휴대폰:</span> <span id="detail-phone"></span></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 1:1 문의 섹션 -->
                <div id="inquiries-section" class="section-content p-8 hidden">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-gray-800">💬 1:1 문의 관리</h2>
                        <div class="flex gap-2">
                            <button onclick="goToPage('index.html')" class="px-4 py-2 bg-blue-500 text-white rounded-lg font-semibold hover:bg-blue-600 transition">
                                🏠 메인페이지로
                            </button>
                            <button onclick="goToPage('support.html')" class="px-4 py-2 bg-green-500 text-white rounded-lg font-semibold hover:bg-green-600 transition">
                                💬 문의페이지로
                            </button>
                        </div>
                    </div>
                    
                    <!-- 문의 목록 -->
                    <div class="bg-white rounded-xl shadow-lg overflow-hidden">
                        <div class="overflow-x-auto">
                            <table class="w-full">
                                <thead class="bg-blue-50">
                                    <tr>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-blue-700 uppercase tracking-wider">문의번호</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-blue-700 uppercase tracking-wider">회원명</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-blue-700 uppercase tracking-wider">제목</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-blue-700 uppercase tracking-wider">상태</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-blue-700 uppercase tracking-wider">등록일시</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-blue-700 uppercase tracking-wider">작업</th>
                                    </tr>
                                </thead>
                                <tbody id="inquiries-table-body" class="bg-white divide-y divide-gray-200">
                                    <!-- 동적으로 생성됨 -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <!-- 문의 상세 및 답변 -->
                    <div id="inquiry-detail-section" class="w-full hidden mt-6">
                        <div class="bg-white rounded-xl shadow-lg p-6 mb-4">
                            <div class="mb-4">
                                <h3 class="text-lg font-bold text-gray-800 mb-2">문의 상세</h3>
                                <div class="grid grid-cols-2 gap-4 text-sm">
                                    <div><span class="font-semibold">문의번호:</span> <span id="inquiry-id"></span></div>
                                    <div><span class="font-semibold">제목:</span> <span id="inquiry-title"></span></div>
                                    <div><span class="font-semibold">회원명:</span> <span id="inquiry-username"></span></div>
                                    <div><span class="font-semibold">이메일:</span> <span id="inquiry-email"></span></div>
                                    <div><span class="font-semibold">전화번호:</span> <span id="inquiry-phone"></span></div>
                                    <div><span class="font-semibold">문의일시:</span> <span id="inquiry-date"></span></div>
                                </div>
                            </div>
                            
                            <div class="mb-4">
                                <h4 class="font-semibold text-gray-700 mb-2">문의 내용</h4>
                                <div id="inquiry-content" class="bg-gray-50 p-4 rounded-lg text-gray-700"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 회원 관리 섹션 -->
                <div id="members-section" class="section-content p-8 hidden">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-gray-800">👥 회원 관리</h2>
                        <div class="flex gap-2">
                            <button onclick="goToPage('index.html')" class="px-4 py-2 bg-blue-500 text-white rounded-lg font-semibold hover:bg-blue-600 transition">
                                🏠 메인페이지로
                            </button>
                            <button onclick="goToPage('member-dashboard.html')" class="px-4 py-2 bg-green-500 text-white rounded-lg font-semibold hover:bg-green-600 transition">
                                👤 회원대시보드로
                            </button>
                        </div>
                    </div>
                    
                    <!-- 회원 목록 -->
                    <div class="bg-white rounded-xl shadow-lg overflow-hidden">
                        <div class="overflow-x-auto">
                            <table class="w-full">
                                <thead class="bg-green-50">
                                    <tr>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-green-700 uppercase tracking-wider">프로필</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-green-700 uppercase tracking-wider">회원명</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-green-700 uppercase tracking-wider">로그인 방식</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-green-700 uppercase tracking-wider">이메일</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-green-700 uppercase tracking-wider">휴대폰</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-green-700 uppercase tracking-wider">가입일</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-green-700 uppercase tracking-wider">의뢰수</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-green-700 uppercase tracking-wider">작업</th>
                                    </tr>
                                </thead>
                                <tbody id="members-table-body" class="bg-white divide-y divide-gray-200">
                                    <!-- 동적으로 생성됨 -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 사이드바 클릭 이벤트
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('.sidebar-item').forEach(item => {
                item.addEventListener('click', function() {
                    const section = this.getAttribute('data-section');
                    switchSection(section);
                });
            });
        });
    </script>
</body>
</html>
