<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ - PriceHunter</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ¯</text></svg>">
    
    <!-- CSPëŠ” ì„œë²„ì—ì„œ ì„¤ì •ë¨ - HTML ë©”íƒ€ëŠ” ì œê±°í•˜ì—¬ ì¶©ëŒ ë°©ì§€ -->
    
    <!-- Tailwind CSS (ì •ì  ë¡œë”© - CSP í˜¸í™˜) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Tailwind CSS ë¡œë“œ ì‹¤íŒ¨ ì‹œ ëŒ€ì²´ ìŠ¤íƒ€ì¼ */
        body { font-family: system-ui, -apple-system, sans-serif; }
        .bg-gradient-to-br { background: linear-gradient(135deg, #f3f4f6, #dbeafe, #d1fae5); }
        .min-h-screen { min-height: 100vh; }
        .flex { display: flex; }
        .items-center { align-items: center; }
        .justify-center { justify-content: center; }
        .bg-white { background-color: white; }
        .rounded-xl { border-radius: 0.75rem; }
        .shadow-2xl { box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25); }
        .p-8 { padding: 2rem; }
        .w-full { width: 100%; }
        .max-w-md { max-width: 28rem; }
        .text-center { text-align: center; }
        .mb-8 { margin-bottom: 2rem; }
        .text-3xl { font-size: 1.875rem; }
        .font-bold { font-weight: 700; }
        .text-pink-600 { color: #db2777; }
        .text-gray-600 { color: #4b5563; }
        .space-y-6 > * + * { margin-top: 1.5rem; }
        .block { display: block; }
        .text-sm { font-size: 0.875rem; }
        .font-medium { font-weight: 500; }
        .text-gray-700 { color: #374151; }
        .mb-2 { margin-bottom: 0.5rem; }
        .px-4 { padding-left: 1rem; padding-right: 1rem; }
        .py-3 { padding-top: 0.75rem; padding-bottom: 0.75rem; }
        .border { border-width: 1px; }
        .border-gray-300 { border-color: #d1d5db; }
        .rounded-lg { border-radius: 0.5rem; }
        .focus\\:ring-2:focus { box-shadow: 0 0 0 2px rgba(236, 72, 153, 0.5); }
        .focus\\:ring-pink-400:focus { box-shadow: 0 0 0 2px rgba(244, 114, 182, 0.5); }
        .focus\\:outline-none:focus { outline: none; }
        .bg-gradient-to-r { background: linear-gradient(to right, #ec4899, #8b5cf6); }
        .text-white { color: white; }
        .hover\\:from-pink-600:hover { background: linear-gradient(to right, #db2777, #7c3aed); }
        .hover\\:to-purple-600:hover { background: linear-gradient(to right, #ec4899, #7c3aed); }
        .transition { transition: all 0.15s ease-in-out; }
        .shadow-lg { box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1); }
        .mt-6 { margin-top: 1.5rem; }
        .text-pink-600 { color: #db2777; }
        .hover\\:text-pink-700:hover { color: #be185d; }
        .text-blue-600 { color: #2563eb; }
        .hover\\:text-blue-700:hover { color: #1d4ed8; }
        .text-xs { font-size: 0.75rem; }
        .text-gray-500 { color: #6b7280; }
        .mt-2 { margin-top: 0.5rem; }
    </style>
    
    <!-- Firebase 8.x SDK (CSP í˜¸í™˜) -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    
    <!-- Firebase ì„¤ì • (ë‹¨ì¼ ì§„ì‹¤ ì†ŒìŠ¤) -->
    <script src="firebase-config.js?v=20241220-2"></script>
    
    <!-- ìŠ¤í¬ë¦½íŠ¸ëŠ” body ëìœ¼ë¡œ ì´ë™ë¨ -->
        
        // Firebase ì˜¤ë¥˜ í‘œì‹œ í•¨ìˆ˜ (CSP ìµœì í™” ë²„ì „)
        function showFirebaseError(message) {
            const errorDiv = document.createElement('div');
            errorDiv.className = 'fixed top-4 right-4 bg-red-500 text-white p-4 rounded-lg shadow-lg z-50 max-w-md';
            errorDiv.innerHTML = `
                <div class="font-bold mb-2">ğŸ”¥ Firebase ì˜¤ë¥˜</div>
                <div class="text-sm mb-2">${message}</div>
                <div class="text-xs mb-3 p-2 bg-red-600 rounded">
                    <strong>CSP í•´ê²° ë°©ë²•:</strong><br>
                    1. DevTools â†’ Network â†’ Response Headers í™•ì¸<br>
                    2. content-security-policyì— www.gstatic.com í¬í•¨ í™•ì¸<br>
                    3. ì„œë²„ ì¬ì‹œì‘ í›„ ìƒˆë¡œê³ ì¹¨<br>
                    4. ë¸Œë¼ìš°ì € ìºì‹œ ì™„ì „ ì‚­ì œ<br>
                    5. ì„œë¹„ìŠ¤ì›Œì»¤ ë“±ë¡ í•´ì œ
                </div>
                <div class="flex gap-2 flex-wrap">
                    <button onclick="location.reload()" class="px-3 py-1 bg-white text-red-500 rounded text-xs font-bold hover:bg-gray-100">
                        ğŸ”„ ìƒˆë¡œê³ ì¹¨
                    </button>
                    <button onclick="testFirebaseConnection()" class="px-3 py-1 bg-yellow-500 text-white rounded text-xs font-bold hover:bg-yellow-600">
                        ğŸ§ª ì—°ê²° í…ŒìŠ¤íŠ¸
                    </button>
                    <button onclick="clearCacheAndReload()" class="px-3 py-1 bg-orange-500 text-white rounded text-xs font-bold hover:bg-orange-600">
                        ğŸ§¹ ìºì‹œ ì •ë¦¬
                    </button>
                    <button onclick="this.parentElement.parentElement.remove()" class="px-3 py-1 bg-gray-500 text-white rounded text-xs font-bold hover:bg-gray-600">
                        âœ• ë‹«ê¸°
                    </button>
                </div>
            `;
            document.body.appendChild(errorDiv);
            
            // 20ì´ˆ í›„ ìë™ ì œê±° (CSP ë¬¸ì œëŠ” í•´ê²° ì‹œê°„ì´ ë” í•„ìš”)
            setTimeout(() => {
                if (errorDiv.parentElement) {
                    errorDiv.remove();
                }
            }, 20000);
        }
        
        // ê´€ë¦¬ì ê¶Œí•œ ì²´ê³„ ì„¤ì •
        const ADMIN_WHITELIST = [
            'admin@pricehunter.com',
            'manager@pricehunter.com',
            'staff@pricehunter.com',
            'q886654@naver.com'  // ì‹¤ì œ ì‚¬ìš©ì ì´ë©”ì¼ ì¶”ê°€
        ];

        // ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ ì„¤ì •
        function setupAdminDashboard() {
            console.log('ğŸ”§ ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ ì„¤ì • ì‹œì‘...');
            
            // Firebase ìƒíƒœ ì¬í™•ì¸
            if (!window.auth || !window.firestore) {
                console.error('âŒ Firebase ì„œë¹„ìŠ¤ê°€ ì´ˆê¸°í™”ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');
                console.error('âŒ Firebase ìƒíƒœ:', {
                    auth: !!window.auth,
                    firestore: !!window.firestore,
                    firebase: !!window.firebase
                });
                showFirebaseError('Firebase ì„œë¹„ìŠ¤ ì´ˆê¸°í™”ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
                return;
            }
            
            console.log('âœ… Firebase ì„œë¹„ìŠ¤ ì´ˆê¸°í™” í™•ì¸ë¨');
            console.log('âœ… Firebase ìƒíƒœ:', {
                auth: !!window.auth,
                firestore: !!window.firestore,
                firebase: !!window.firebase
            });
            
            // Firebase í”„ë¡œì íŠ¸ í™•ì¸
            if (window.firebase && window.firebase.apps.length > 0) {
                const projectId = window.firebase.app().options.projectId;
                console.log('ğŸ” admin-dashboard.html Firebase í”„ë¡œì íŠ¸ ID:', projectId);
            }
            
            // ì¸ì¦ ìƒíƒœ ê°ì‹œ ë° ê¶Œí•œ í™•ì¸
            console.log('ğŸ”„ setupAuthGuard í˜¸ì¶œ ì‹œì‘...');
            setupAuthGuard();
            console.log('ğŸ”„ setupAuthGuard í˜¸ì¶œ ì™„ë£Œ');
            
            console.log('âœ… ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ ì„¤ì • ì™„ë£Œ');
        }

        // ì¸ì¦ ê°€ë“œ ì„¤ì •
        function setupAuthGuard() {
            console.log('ğŸ” ì¸ì¦ ê°€ë“œ ì„¤ì • ì‹œì‘...');
            console.log('ğŸ” window.auth ìƒíƒœ:', !!window.auth);
            
            if (!window.auth) {
                console.error('âŒ window.authê°€ ì—†ìŠµë‹ˆë‹¤!');
                return;
            }
            
            console.log('ğŸ”„ onAuthStateChanged ë¦¬ìŠ¤ë„ˆ ë“±ë¡ ì¤‘...');
            window.auth.onAuthStateChanged(async (user) => {
                console.log('ğŸ”„ onAuthStateChanged ì½œë°± í˜¸ì¶œë¨');
                console.log('ğŸ” ì‚¬ìš©ì ìƒíƒœ:', user ? `ë¡œê·¸ì¸ë¨ (${user.email})` : 'ë¡œê·¸ì•„ì›ƒë¨');
                
                if (user) {
                    console.log('ğŸ‘¤ ì‚¬ìš©ì ë¡œê·¸ì¸ ê°ì§€:', user.email);
                    console.log('ğŸ‘¤ ì‚¬ìš©ì UID:', user.uid);
                    
                    // ê´€ë¦¬ì ê¶Œí•œ í™•ì¸
                    console.log('ğŸ”„ ê´€ë¦¬ì ê¶Œí•œ í™•ì¸ ì‹œì‘...');
                    const isAdmin = await checkAdminPermission(user);
                    console.log('ğŸ”„ ê´€ë¦¬ì ê¶Œí•œ í™•ì¸ ê²°ê³¼:', isAdmin);
                    
                    if (isAdmin) {
                        console.log('âœ… ê´€ë¦¬ì ê¶Œí•œ í™•ì¸ë¨ - ë¦¬ìŠ¤ë„ˆ ì‹œì‘');
                        showDashboard(user);
                        // ê´€ë¦¬ì ê°€ë“œ í†µê³¼ í›„ì—ë§Œ ë¦¬ìŠ¤ë„ˆ ì‹œì‘
                        setupRealtimeListeners();
                    } else {
                        console.log('âŒ ê´€ë¦¬ì ê¶Œí•œ ì—†ìŒ - ë¦¬ìŠ¤ë„ˆ ì‹œì‘ ì•ˆí•¨');
                        showAccessDenied(user.email);
                    }
                } else {
                    console.log('ğŸ‘¤ ì‚¬ìš©ì ë¡œê·¸ì•„ì›ƒ ê°ì§€');
                    showLoginForm();
                }
            });
            console.log('âœ… onAuthStateChanged ë¦¬ìŠ¤ë„ˆ ë“±ë¡ ì™„ë£Œ');
        }

        // ê´€ë¦¬ì ê¶Œí•œ í™•ì¸
        async function checkAdminPermission(user) {
            try {
                console.log('ğŸ” ê´€ë¦¬ì ê¶Œí•œ í™•ì¸ ì‹œì‘:', user.email);
                console.log('ğŸ” ê´€ë¦¬ì í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸:', ADMIN_WHITELIST);
                
                // 1. í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸ í™•ì¸
                if (ADMIN_WHITELIST.includes(user.email)) {
                    console.log('âœ… í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸ì—ì„œ ê´€ë¦¬ì í™•ì¸ë¨:', user.email);
                    return true;
                }

                // 2. Custom Claims í™•ì¸ (ID í† í°ì—ì„œ)
                console.log('ğŸ” Custom Claims í™•ì¸ ì¤‘...');
                const idTokenResult = await user.getIdTokenResult();
                const claims = idTokenResult.claims;
                
                console.log('ğŸ” í† í° í´ë ˆì„ ìƒì„¸:', claims);
                console.log('ğŸ” í† í° ë°œê¸‰ ì‹œê°„:', idTokenResult.issuedAtTime);
                console.log('ğŸ” í† í° ë§Œë£Œ ì‹œê°„:', idTokenResult.expirationTime);
                
                if (claims.role === 'admin') {
                    console.log('âœ… Custom Claimsì—ì„œ ê´€ë¦¬ì í™•ì¸ë¨:', user.email);
                    return true;
                }

                console.log('âŒ ê´€ë¦¬ì ê¶Œí•œ ì—†ìŒ:', user.email);
                console.log('âŒ Claims:', claims);
                console.log('âŒ í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸ì— í¬í•¨ë˜ì§€ ì•ŠìŒ');
                return false;
                
            } catch (error) {
                console.error('âŒ ê¶Œí•œ í™•ì¸ ì¤‘ ì˜¤ë¥˜:', error);
                return false;
            }
        }
        
        // ë³´ì•ˆ ê·œì¹™ í…ŒìŠ¤íŠ¸ í•¨ìˆ˜
        async function testSecurityRules() {
            console.log('ğŸ§ª ë³´ì•ˆ ê·œì¹™ í…ŒìŠ¤íŠ¸ ì‹œì‘...');
            
            if (!window.auth.currentUser) {
                console.error('âŒ ë¡œê·¸ì¸ë˜ì§€ ì•Šì€ ì‚¬ìš©ìì…ë‹ˆë‹¤.');
                return;
            }
            
            const user = window.auth.currentUser;
            console.log('ğŸ‘¤ í…ŒìŠ¤íŠ¸ ì‚¬ìš©ì:', user.email, user.uid);
            
            try {
                // 1. ë³¸ì¸ ë¬¸ì„œ ì½ê¸° í…ŒìŠ¤íŠ¸
                console.log('ğŸ” ë³¸ì¸ ë¬¸ì„œ ì½ê¸° í…ŒìŠ¤íŠ¸...');
                const ownDoc = await window.firestore.collection('members').doc(user.uid).get();
                if (ownDoc.exists) {
                    console.log('âœ… ë³¸ì¸ ë¬¸ì„œ ì½ê¸° ì„±ê³µ:', ownDoc.data());
                } else {
                    console.log('âš ï¸ ë³¸ì¸ ë¬¸ì„œê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŒ');
                }
                
                // 2. ì»¬ë ‰ì…˜ ì¿¼ë¦¬ í…ŒìŠ¤íŠ¸
                console.log('ğŸ” ì»¬ë ‰ì…˜ ì¿¼ë¦¬ í…ŒìŠ¤íŠ¸...');
                const membersSnapshot = await window.firestore.collection('members').limit(5).get();
                console.log('âœ… ì»¬ë ‰ì…˜ ì¿¼ë¦¬ ì„±ê³µ:', membersSnapshot.size, 'ê°œ ë¬¸ì„œ');
                
                // 3. ê´€ë¦¬ì ê¶Œí•œ í™•ì¸
                const isAdmin = await checkAdminPermission(user);
                console.log('ğŸ” ê´€ë¦¬ì ê¶Œí•œ:', isAdmin);
                
            } catch (error) {
                console.error('âŒ ë³´ì•ˆ ê·œì¹™ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨:', error);
                console.error('âŒ ì˜¤ë¥˜ ì½”ë“œ:', error.code);
                console.error('âŒ ì˜¤ë¥˜ ë©”ì‹œì§€:', error.message);
            }
        }

        // ëŒ€ì‹œë³´ë“œ í‘œì‹œ
        function showDashboard(user) {
            document.getElementById('login-section').classList.add('hidden');
            document.getElementById('dashboard-section').classList.remove('hidden');
            
            // ê´€ë¦¬ì ì •ë³´ í‘œì‹œ
            if (document.getElementById('admin-info')) {
                document.getElementById('admin-info').textContent = user.email;
            }
            
            // ì‚¬ìš©ì ì—­í•  í‘œì‹œ
            updateUserRoleDisplay(user);
            
            // ëŒ€ì‹œë³´ë“œ ë°ì´í„° ë¡œë“œ
            loadDashboardData();
        }

        // ë¡œê·¸ì¸ í¼ í‘œì‹œ
        function showLoginForm() {
            document.getElementById('login-section').classList.remove('hidden');
            document.getElementById('dashboard-section').classList.add('hidden');
        }

        // ì ‘ê·¼ ê±°ë¶€ í‘œì‹œ
        function showAccessDenied(email) {
            document.getElementById('login-section').classList.add('hidden');
            document.getElementById('dashboard-section').classList.add('hidden');
            
            // ì ‘ê·¼ ê±°ë¶€ ì˜¤ë²„ë ˆì´ í‘œì‹œ
            const accessDeniedDiv = document.createElement('div');
            accessDeniedDiv.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            accessDeniedDiv.innerHTML = `
                <div class="bg-white rounded-xl shadow-2xl p-8 max-w-md mx-4">
                    <div class="text-center">
                        <div class="text-6xl mb-4">ğŸš«</div>
                        <h2 class="text-2xl font-bold text-red-600 mb-4">ì ‘ê·¼ ê±°ë¶€</h2>
                        <p class="text-gray-600 mb-6">
                            ê´€ë¦¬ì ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤.<br>
                            í˜„ì¬ ê³„ì •: <strong>${email}</strong>
                        </p>
                        <div class="space-y-3">
                            <button onclick="adminLogout()" class="w-full px-4 py-2 bg-red-500 text-white rounded-lg font-semibold hover:bg-red-600 transition">
                                ğŸ”“ ë¡œê·¸ì•„ì›ƒ
                            </button>
                            <button onclick="goToPage('index.html')" class="w-full px-4 py-2 bg-gray-500 text-white rounded-lg font-semibold hover:bg-gray-600 transition">
                                ğŸ  ë©”ì¸í˜ì´ì§€ë¡œ
                            </button>
                        </div>
                    </div>
                </div>
            `;
            document.body.appendChild(accessDeniedDiv);
        }

        // ì‚¬ìš©ì ì—­í•  í‘œì‹œ ì—…ë°ì´íŠ¸
        function updateUserRoleDisplay(user) {
            const roleDisplay = document.getElementById('user-role-display');
            if (roleDisplay) {
                if (ADMIN_WHITELIST.includes(user.email)) {
                    roleDisplay.innerHTML = '<span class="bg-red-100 text-red-800 px-2 py-1 rounded-full text-xs font-bold">ADMIN</span>';
                } else {
                    roleDisplay.innerHTML = '<span class="bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs font-bold">STAFF</span>';
                }
            }
            
            // ê¶Œí•œë³„ ë©”ë‰´ í‘œì‹œ/ìˆ¨ê¹€
            updateMenuVisibility(user);
        }

        // ê¶Œí•œë³„ ë©”ë‰´ í‘œì‹œ/ìˆ¨ê¹€
        function updateMenuVisibility(user) {
            const isAdmin = ADMIN_WHITELIST.includes(user.email);
            
            // ê´€ë¦¬ì ì „ìš© ë©”ë‰´ë“¤
            const adminOnlyMenus = [
                'data-management',
                'sync-settings'
            ];
            
            adminOnlyMenus.forEach(menuId => {
                const menuButton = document.querySelector(`[data-section="${menuId}"]`);
                if (menuButton) {
                    if (isAdmin) {
                        menuButton.classList.remove('hidden');
                        menuButton.disabled = false;
                    } else {
                        menuButton.classList.add('hidden');
                        menuButton.disabled = true;
                    }
                }
            });
            
            // ê´€ë¦¬ì ì „ìš© ê¸°ëŠ¥ë“¤
            const adminOnlyElements = [
                'new-request-form',
                'csv-upload-section',
                'sync-configs-section'
            ];
            
            adminOnlyElements.forEach(elementId => {
                const element = document.getElementById(elementId);
                if (element) {
                    if (isAdmin) {
                        element.classList.remove('hidden');
                    } else {
                        element.classList.add('hidden');
                    }
                }
            });
        }
        
        // ê´€ë¦¬ì ë¡œê·¸ì¸ í•¨ìˆ˜
        window.adminLogin = async function() {
            console.log('ğŸ” ê´€ë¦¬ì ë¡œê·¸ì¸ ì‹œë„...');
            
            const email = document.getElementById('admin-email').value;
            const password = document.getElementById('admin-password').value;
            
            if (!email || !password) {
                alert('ì´ë©”ì¼ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            // Firebase ê°€ë“œ í™•ì¸
            if (typeof firebase === 'undefined') {
                alert('Firebase SDKê°€ ë¡œë“œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ì„œë²„ CSP í—¤ë”ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            if (!window.auth) {
                console.error('âŒ Firebase Authê°€ ì´ˆê¸°í™”ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');
                alert('Firebase Auth ì´ˆê¸°í™”ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            try {
                console.log('ğŸ”¥ ë¡œê·¸ì¸ ì‹œë„:', email);
                const userCredential = await window.auth.signInWithEmailAndPassword(email, password);
                console.log('âœ… ë¡œê·¸ì¸ ì„±ê³µ:', userCredential.user.email);
                
                // onAuthStateChangedê°€ ìë™ìœ¼ë¡œ ê¶Œí•œ í™•ì¸ ë° ëŒ€ì‹œë³´ë“œ í‘œì‹œë¥¼ ì²˜ë¦¬í•¨
                
            } catch (error) {
                console.error('âŒ ë¡œê·¸ì¸ ì‹¤íŒ¨:', error);
                let errorMessage = 'ë¡œê·¸ì¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.';
                
                switch (error.code) {
                    case 'auth/user-not-found':
                        errorMessage = 'ë“±ë¡ë˜ì§€ ì•Šì€ ì´ë©”ì¼ì…ë‹ˆë‹¤.';
                        break;
                    case 'auth/wrong-password':
                        errorMessage = 'ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.';
                        break;
                    case 'auth/invalid-email':
                        errorMessage = 'ì˜¬ë°”ë¥´ì§€ ì•Šì€ ì´ë©”ì¼ í˜•ì‹ì…ë‹ˆë‹¤.';
                        break;
                    case 'auth/too-many-requests':
                        errorMessage = 'ë„ˆë¬´ ë§ì€ ë¡œê·¸ì¸ ì‹œë„ê°€ ìˆì—ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.';
                        break;
                    default:
                        errorMessage = error.message;
                }
                
                alert(errorMessage);
            }
        };

        // ê´€ë¦¬ì ë¡œê·¸ì•„ì›ƒ í•¨ìˆ˜
        window.adminLogout = async function() {
            try {
                console.log('ğŸ”“ ë¡œê·¸ì•„ì›ƒ ì‹œë„...');
                await window.auth.signOut();
                console.log('âœ… ë¡œê·¸ì•„ì›ƒ ì™„ë£Œ');
                
                // ì ‘ê·¼ ê±°ë¶€ ì˜¤ë²„ë ˆì´ ì œê±°
                const accessDeniedDiv = document.querySelector('.fixed.inset-0.bg-black');
                if (accessDeniedDiv) {
                    accessDeniedDiv.remove();
                }
                
                // onAuthStateChangedê°€ ìë™ìœ¼ë¡œ ë¡œê·¸ì¸ í¼ í‘œì‹œë¥¼ ì²˜ë¦¬í•¨
                
            } catch (error) {
                console.error('âŒ ë¡œê·¸ì•„ì›ƒ ì‹¤íŒ¨:', error);
                alert('ë¡œê·¸ì•„ì›ƒì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: ' + error.message);
            }
        };
        
        // í…ŒìŠ¤íŠ¸ ê´€ë¦¬ì ê³„ì • ìƒì„± í•¨ìˆ˜
        window.createAdminAccount = async function() {
            try {
                console.log('ğŸ”§ í…ŒìŠ¤íŠ¸ ê´€ë¦¬ì ê³„ì • ìƒì„± ì‹œì‘...');
                
                if (!firebase.auth) { 
                    alert("Firebase Auth ì´ˆê¸°í™” ì‹¤íŒ¨"); 
                    throw new Error("Auth not initialized"); 
                }
                
                if (!window.auth) {
                    alert('Firebaseê°€ ì´ˆê¸°í™”ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•´ì£¼ì„¸ìš”.');
                    return;
                }
                
                const userCredential = await window.auth.createUserWithEmailAndPassword('admin@pricehunter.com', 'admin1234');
                console.log('âœ… í…ŒìŠ¤íŠ¸ ê´€ë¦¬ì ê³„ì • ìƒì„± ì™„ë£Œ:', userCredential.user.email);
                
                // Firestoreì— ê´€ë¦¬ì ì •ë³´ ì €ì¥
                if (window.firestore) {
                    await window.firestore.collection('admins').doc(userCredential.user.uid).set({
                        email: 'admin@pricehunter.com',
                        role: 'admin',
                        createdAt: new Date(),
                        permissions: ['read', 'write', 'delete', 'admin']
                    });
                    console.log('âœ… ê´€ë¦¬ì ì •ë³´ Firestore ì €ì¥ ì™„ë£Œ');
                }
                
                alert('âœ… í…ŒìŠ¤íŠ¸ ê´€ë¦¬ì ê³„ì •ì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤!\n\nì´ë©”ì¼: admin@pricehunter.com\në¹„ë°€ë²ˆí˜¸: admin1234\n\nì´ì œ ì´ ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.');
                
                // ì…ë ¥ í•„ë“œì— ìë™ ì…ë ¥
                document.getElementById('admin-email').value = 'admin@pricehunter.com';
                document.getElementById('admin-password').value = 'admin1234';
                
            } catch (error) {
                console.error('âŒ í…ŒìŠ¤íŠ¸ ê³„ì • ìƒì„± ì‹¤íŒ¨:', error);
                
                if (error.code === 'auth/email-already-in-use') {
                    alert('ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ê³„ì •ì…ë‹ˆë‹¤!\n\nì´ë©”ì¼: admin@pricehunter.com\në¹„ë°€ë²ˆí˜¸: admin1234\n\nì´ ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸í•´ë³´ì„¸ìš”.');
                    
                    // ì…ë ¥ í•„ë“œì— ìë™ ì…ë ¥
                    document.getElementById('admin-email').value = 'admin@pricehunter.com';
                    document.getElementById('admin-password').value = 'admin1234';
                } else {
                    alert('ê³„ì • ìƒì„± ì‹¤íŒ¨: ' + error.message);
                }
            }
        };
        
        // ëŒ€ì‹œë³´ë“œ ë°ì´í„° ë¡œë“œ í•¨ìˆ˜
        function loadDashboardData() {
            console.log('ğŸ“Š ëŒ€ì‹œë³´ë“œ ë°ì´í„° ë¡œë“œ ì‹œì‘...');
            
            if (!window.firestore) {
                console.error('âŒ Firestoreê°€ ì´ˆê¸°í™”ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');
                return;
            }
            
            // ì‹¤ì‹œê°„ ë¦¬ìŠ¤ë„ˆ ì„¤ì •
            setupRealtimeListeners();
            
            console.log('âœ… ëŒ€ì‹œë³´ë“œ ë°ì´í„° ë¡œë“œ ì™„ë£Œ');
        }

        // ì‹¤ì‹œê°„ ë¦¬ìŠ¤ë„ˆ ì„¤ì •
        function setupRealtimeListeners() {
            console.log('ğŸ”„ ì‹¤ì‹œê°„ ë¦¬ìŠ¤ë„ˆ ì„¤ì • ì‹œì‘...');
            console.log('ğŸ” í˜„ì¬ ì‚¬ìš©ì:', window.auth.currentUser);
            console.log('ğŸ” Firestore ìƒíƒœ:', !!window.firestore);
            console.log('ğŸ” Firebase ì•± ìƒíƒœ:', !!window.firebaseApp);
            
            // ì˜ë¢° ë°ì´í„° ì‹¤ì‹œê°„ ê°ì‹œ
            setupRequestsListener();
            
            // ë¬¸ì˜ ë°ì´í„° ì‹¤ì‹œê°„ ê°ì‹œ
            setupInquiriesListener();
            
            // íšŒì› ë°ì´í„° ì‹¤ì‹œê°„ ê°ì‹œ
            setupMembersListener();
            
            console.log('âœ… ì‹¤ì‹œê°„ ë¦¬ìŠ¤ë„ˆ ì„¤ì • ì™„ë£Œ');
        }

        // ì˜ë¢° ë¦¬ìŠ¤ë„ˆ ì„¤ì •
        function setupRequestsListener() {
            if (!window.firestore) {
                console.warn('âš ï¸ Firestoreê°€ ì´ˆê¸°í™”ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');
                return;
            }

            window.firestore.collection('requests')
                .orderBy('createdAt', 'desc')
                .limit(100)
                .onSnapshot((snapshot) => {
                    console.log(`ğŸ“‹ ì˜ë¢° ë°ì´í„° ìˆ˜ì‹ : ${snapshot.size}ê°œ ë¬¸ì„œ`);
                    
                    const requests = [];
                    snapshot.forEach((doc) => {
                        const data = doc.data();
                        requests.push({
                            id: doc.id,
                            ...data,
                            createdAt: data.createdAt?.toDate?.() || new Date(),
                            updatedAt: data.updatedAt?.toDate?.() || new Date()
                        });
                    });
                    
                    updateRequestsTable(requests);
                    updateRequestStats(requests);
                    updateRecentRequests(requests.slice(0, 5));
                }, (error) => {
                    console.error('âŒ ì˜ë¢° ë¦¬ìŠ¤ë„ˆ ì˜¤ë¥˜:', error);
                });
        }

        // ë¬¸ì˜ ë¦¬ìŠ¤ë„ˆ ì„¤ì •
        function setupInquiriesListener() {
            if (!window.firestore) {
                console.warn('âš ï¸ Firestoreê°€ ì´ˆê¸°í™”ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');
                return;
            }

            window.firestore.collection('inquiries')
                .orderBy('createdAt', 'desc')
                .limit(100)
                .onSnapshot((snapshot) => {
                    console.log(`ğŸ’¬ ë¬¸ì˜ ë°ì´í„° ìˆ˜ì‹ : ${snapshot.size}ê°œ ë¬¸ì„œ`);
                    
                    const inquiries = [];
                    snapshot.forEach((doc) => {
                        const data = doc.data();
                        inquiries.push({
                            id: doc.id,
                            ...data,
                            createdAt: data.createdAt?.toDate?.() || new Date(),
                            updatedAt: data.updatedAt?.toDate?.() || new Date()
                        });
                    });
                    
                    updateInquiriesTable(inquiries);
                    updateInquiryStats(inquiries);
                    updateRecentInquiries(inquiries.slice(0, 5));
                }, (error) => {
                    console.error('âŒ ë¬¸ì˜ ë¦¬ìŠ¤ë„ˆ ì˜¤ë¥˜:', error);
                });
        }

        // íšŒì› ë¦¬ìŠ¤ë„ˆ ì„¤ì •
        function setupMembersListener() {
            if (!window.firestore) {
                console.warn('âš ï¸ Firestoreê°€ ì´ˆê¸°í™”ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');
                return;
            }

            console.log('ğŸ” íšŒì› ë¦¬ìŠ¤ë„ˆ ì„¤ì • ì‹œì‘...');
            console.log('ğŸ” í˜„ì¬ ì‚¬ìš©ì UID:', window.auth.currentUser?.uid);
            console.log('ğŸ” í˜„ì¬ ì‚¬ìš©ì ì´ë©”ì¼:', window.auth.currentUser?.email);
            
            // createdAtìœ¼ë¡œ ì •ë ¬ ì‹œë„, ì‹¤íŒ¨í•˜ë©´ updatedAtìœ¼ë¡œ í´ë°±
            window.firestore.collection('members')
                .orderBy('createdAt', 'desc')
                .limit(100)
                .onSnapshot((snapshot) => {
                    console.log(`ğŸ‘¥ íšŒì› ë°ì´í„° ìˆ˜ì‹ : ${snapshot.size}ê°œ ë¬¸ì„œ`);
                    console.log('ğŸ“Š íšŒì› ë°ì´í„° ìƒì„¸:', snapshot.docs.map(doc => ({
                        id: doc.id,
                        data: doc.data()
                    })));
                    
                    // ì²« ë²ˆì§¸ ë¬¸ì„œ ì •ë³´ ë¡œê¹…
                    if (snapshot.size > 0) {
                        const firstDoc = snapshot.docs[0];
                        console.log('ğŸ“„ ì²« ë²ˆì§¸ íšŒì› ë¬¸ì„œ:', {
                            id: firstDoc.id,
                            data: firstDoc.data()
                        });
                    }
                    
                    const members = [];
                    snapshot.forEach((doc) => {
                        const data = doc.data();
                        members.push({
                            id: doc.id,
                            ...data,
                            createdAt: data.createdAt?.toDate?.() || new Date(),
                            updatedAt: data.updatedAt?.toDate?.() || new Date()
                        });
                    });
                    
                    console.log('ğŸ“‹ ì²˜ë¦¬ëœ íšŒì› ë°ì´í„°:', members);
                    updateMembersTable(members);
                    updateMemberStats(members);
                }, (error) => {
                    console.error('âŒ íšŒì› ë¦¬ìŠ¤ë„ˆ ì˜¤ë¥˜ (createdAt):', error);
                    
                    // createdAt ì •ë ¬ ì‹¤íŒ¨ ì‹œ updatedAtìœ¼ë¡œ í´ë°±
                    if (error.code === 'failed-precondition') {
                        console.log('ğŸ”„ updatedAtìœ¼ë¡œ í´ë°± ì‹œë„...');
                        window.firestore.collection('members')
                            .orderBy('updatedAt', 'desc')
                            .limit(100)
                            .onSnapshot((snapshot) => {
                                console.log(`ğŸ‘¥ íšŒì› ë°ì´í„° ìˆ˜ì‹  (í´ë°±): ${snapshot.size}ê°œ ë¬¸ì„œ`);
                                
                                const members = [];
                                snapshot.forEach((doc) => {
                                    const data = doc.data();
                                    members.push({
                                        id: doc.id,
                                        ...data,
                                        createdAt: data.createdAt?.toDate?.() || new Date(),
                                        updatedAt: data.updatedAt?.toDate?.() || new Date()
                                    });
                                });
                                
                                updateMembersTable(members);
                                updateMemberStats(members);
                            }, (fallbackError) => {
                                console.error('âŒ íšŒì› ë¦¬ìŠ¤ë„ˆ í´ë°± ì˜¤ë¥˜:', fallbackError);
                            });
                    }
                });
        }




        // í†µê³„ ì—…ë°ì´íŠ¸ í•¨ìˆ˜ë“¤
        function updateRequestStats(requests) {
            const total = requests.length;
            const completed = requests.filter(r => r.status === 'done').length;
            const pending = requests.filter(r => r.status === 'pending').length;
            
            const totalElement = document.getElementById('total-requests');
            const completedElement = document.getElementById('completed-requests');
            const pendingElement = document.getElementById('pending-requests');
            
            if (totalElement) totalElement.textContent = total;
            if (completedElement) completedElement.textContent = completed;
            if (pendingElement) pendingElement.textContent = pending;
        }

        function updateInquiryStats(inquiries) {
            const total = inquiries.length;
            const pending = inquiries.filter(i => i.status === 'new').length;
            const answered = inquiries.filter(i => i.status === 'answered').length;
            
            const totalElement = document.getElementById('total-inquiries');
            const pendingElement = document.getElementById('pending-inquiries');
            const answeredElement = document.getElementById('answered-inquiries');
            
            if (totalElement) totalElement.textContent = total;
            if (pendingElement) pendingElement.textContent = pending;
            if (answeredElement) answeredElement.textContent = answered;
        }

        function updateMemberStats(members) {
            const total = members.length;
            const active = members.filter(m => m.status === 'active').length;
            const blocked = members.filter(m => m.status === 'blocked').length;
            
            const totalElement = document.getElementById('total-members');
            const activeElement = document.getElementById('active-members');
            const blockedElement = document.getElementById('blocked-members');
            
            if (totalElement) totalElement.textContent = total;
            if (activeElement) activeElement.textContent = active;
            if (blockedElement) blockedElement.textContent = blocked;
        }

        // ìµœê·¼ í™œë™ ì—…ë°ì´íŠ¸ í•¨ìˆ˜ë“¤
        function updateRecentRequests(requests) {
            const container = document.getElementById('recent-requests');
            if (!container) return;
            
            if (requests.length === 0) {
                container.innerHTML = '<p class="text-gray-500 text-sm">ìµœê·¼ ì˜ë¢°ê°€ ì—†ìŠµë‹ˆë‹¤.</p>';
                return;
            }
            
            container.innerHTML = requests.map(request => `
                <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                    <div>
                        <p class="font-semibold text-sm">${request.title || 'ì œëª© ì—†ìŒ'}</p>
                        <p class="text-xs text-gray-500">${request.email || 'ì´ë©”ì¼ ì—†ìŒ'}</p>
                    </div>
                    <div class="text-right">
                        <span class="inline-block px-2 py-1 text-xs rounded-full ${
                            request.status === 'done' ? 'bg-green-100 text-green-800' :
                            request.status === 'in_progress' ? 'bg-blue-100 text-blue-800' :
                            'bg-yellow-100 text-yellow-800'
                        }">
                            ${getStatusText(request.status)}
                        </span>
                        <p class="text-xs text-gray-500 mt-1">${formatDate(request.createdAt)}</p>
                    </div>
                </div>
            `).join('');
        }

        function updateRecentInquiries(inquiries) {
            const container = document.getElementById('recent-inquiries');
            if (!container) return;
            
            if (inquiries.length === 0) {
                container.innerHTML = '<p class="text-gray-500 text-sm">ìµœê·¼ ë¬¸ì˜ê°€ ì—†ìŠµë‹ˆë‹¤.</p>';
                return;
            }
            
            container.innerHTML = inquiries.map(inquiry => `
                <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                    <div>
                        <p class="font-semibold text-sm">${inquiry.title || 'ì œëª© ì—†ìŒ'}</p>
                        <p class="text-xs text-gray-500">${inquiry.email || 'ì´ë©”ì¼ ì—†ìŒ'}</p>
                    </div>
                    <div class="text-right">
                        <span class="inline-block px-2 py-1 text-xs rounded-full ${
                            inquiry.status === 'answered' ? 'bg-green-100 text-green-800' :
                            inquiry.status === 'closed' ? 'bg-gray-100 text-gray-800' :
                            'bg-red-100 text-red-800'
                        }">
                            ${getInquiryStatusText(inquiry.status)}
                        </span>
                        <p class="text-xs text-gray-500 mt-1">${formatDate(inquiry.createdAt)}</p>
                    </div>
                </div>
            `).join('');
        }

        // í…Œì´ë¸” ì—…ë°ì´íŠ¸ í•¨ìˆ˜ë“¤
        function updateRequestsTable(requests) {
            const tbody = document.getElementById('request-list');
            if (!tbody) return;
            
            if (requests.length === 0) {
                tbody.innerHTML = '<li class="p-4 text-center text-gray-500">ì˜ë¢°ê°€ ì—†ìŠµë‹ˆë‹¤.</li>';
                return;
            }
            
            tbody.innerHTML = requests.map(request => `
                <li class="p-4 hover:bg-pink-100 cursor-pointer" onclick="showRequestDetail('${request.id}')">
                    <div class="grid grid-cols-8 gap-2 items-center text-sm">
                        <div class="col-span-1">
                            <input type="checkbox" class="rounded">
                        </div>
                        <div class="col-span-2">
                            <div class="font-semibold">#${request.id.substring(0, 8)}</div>
                            <div class="text-xs text-gray-500">${request.email || 'ì´ë©”ì¼ ì—†ìŒ'}</div>
                        </div>
                        <div class="col-span-1 text-center text-xs text-gray-500">
                            ${formatDate(request.createdAt)}
                        </div>
                        <div class="col-span-1 text-center">
                            <span class="inline-block px-2 py-1 text-xs rounded-full ${
                                request.status === 'done' ? 'bg-green-100 text-green-800' :
                                request.status === 'in_progress' ? 'bg-blue-100 text-blue-800' :
                                'bg-yellow-100 text-yellow-800'
                            }">
                                ${getStatusText(request.status)}
                            </span>
                        </div>
                        <div class="col-span-1 text-center text-xs text-gray-500">
                            ${request.purchaseMethod || '-'}
                        </div>
                        <div class="col-span-1 text-center text-xs text-gray-500">
                            ${request.purchaseStatus || '-'}
                        </div>
                        <div class="col-span-1 text-center text-xs text-gray-500">
                            ${request.notificationStatus || '-'}
                        </div>
                    </div>
                </li>
            `).join('');
        }

        function updateInquiriesTable(inquiries) {
            const tbody = document.getElementById('inquiries-table-body');
            if (!tbody) return;
            
            if (inquiries.length === 0) {
                tbody.innerHTML = '<tr><td colspan="6" class="px-6 py-4 text-center text-gray-500">ë¬¸ì˜ê°€ ì—†ìŠµë‹ˆë‹¤.</td></tr>';
                return;
            }
            
            tbody.innerHTML = inquiries.map(inquiry => `
                <tr class="hover:bg-gray-50">
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">
                        #${inquiry.id.substring(0, 8)}
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                        ${inquiry.name || 'ì´ë¦„ ì—†ìŒ'}
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                        ${inquiry.title || 'ì œëª© ì—†ìŒ'}
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full ${
                            inquiry.status === 'answered' ? 'bg-green-100 text-green-800' :
                            inquiry.status === 'closed' ? 'bg-gray-100 text-gray-800' :
                            'bg-red-100 text-red-800'
                        }">
                            ${getInquiryStatusText(inquiry.status)}
                        </span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                        ${formatDate(inquiry.createdAt)}
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                        <button onclick="showInquiryDetail('${inquiry.id}')" class="text-pink-600 hover:text-pink-900">
                            ìƒì„¸ë³´ê¸°
                        </button>
                    </td>
                </tr>
            `).join('');
        }

        function updateMembersTable(members) {
            console.log('ğŸ”„ updateMembersTable í˜¸ì¶œë¨:', members);
            
            const tbody = document.getElementById('members-table-body');
            if (!tbody) {
                console.error('âŒ members-table-body ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                return;
            }
            
            console.log('ğŸ“Š íšŒì› í…Œì´ë¸” ì—…ë°ì´íŠ¸:', members.length, 'ëª…');
            
            if (members.length === 0) {
                tbody.innerHTML = '<tr><td colspan="8" class="px-6 py-4 text-center text-gray-500">íšŒì›ì´ ì—†ìŠµë‹ˆë‹¤.</td></tr>';
                return;
            }
            
            tbody.innerHTML = members.map(member => `
                <tr class="hover:bg-gray-50">
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="flex-shrink-0 h-10 w-10">
                            <div class="h-10 w-10 rounded-full bg-pink-100 flex items-center justify-center">
                                <span class="text-sm font-medium text-pink-600">
                                    ${(member.name || member.email || 'U').charAt(0).toUpperCase()}
                                </span>
                            </div>
                        </div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">
                        ${member.name || 'ì´ë¦„ ì—†ìŒ'}
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                        ${member.provider || 'email'}
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                        ${member.email || 'ì´ë©”ì¼ ì—†ìŒ'}
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                        ${member.phone || '-'}
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                        ${formatDate(member.createdAt)}
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                        ${member.requestCount || 0}
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                        <button onclick="showMemberDetail('${member.id}')" class="text-pink-600 hover:text-pink-900">
                            ìƒì„¸ë³´ê¸°
                        </button>
                    </td>
                </tr>
            `).join('');
        }

        // ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë“¤
        function getStatusText(status) {
            const statusMap = {
                'pending': 'ëŒ€ê¸°ì¤‘',
                'in_progress': 'ì§„í–‰ì¤‘',
                'done': 'ì™„ë£Œ',
                'rejected': 'ê±°ì ˆ'
            };
            return statusMap[status] || status;
        }

        function getInquiryStatusText(status) {
            const statusMap = {
                'new': 'ì‹ ê·œ',
                'answered': 'ë‹µë³€ì™„ë£Œ',
                'closed': 'ì¢…ë£Œ'
            };
            return statusMap[status] || status;
        }

        function formatDate(date) {
            if (!date) return '-';
            const d = new Date(date);
            return d.toLocaleDateString('ko-KR') + ' ' + d.toLocaleTimeString('ko-KR', { hour: '2-digit', minute: '2-digit' });
        }

        // ìƒì„¸ë³´ê¸° í•¨ìˆ˜ë“¤ (ì„ì‹œ)
        function showRequestDetail(requestId) {
            console.log('ì˜ë¢° ìƒì„¸ë³´ê¸°:', requestId);
            // TODO: ì˜ë¢° ìƒì„¸ ëª¨ë‹¬ êµ¬í˜„
        }

        function showInquiryDetail(inquiryId) {
            console.log('ë¬¸ì˜ ìƒì„¸ë³´ê¸°:', inquiryId);
            // TODO: ë¬¸ì˜ ìƒì„¸ ëª¨ë‹¬ êµ¬í˜„
        }

        function showMemberDetail(memberId) {
            console.log('íšŒì› ìƒì„¸ë³´ê¸°:', memberId);
            // TODO: íšŒì› ìƒì„¸ ëª¨ë‹¬ êµ¬í˜„
        }

        // CSV ì—…ë¡œë“œ í•¨ìˆ˜
        window.uploadCSV = async function() {
            const fileInput = document.getElementById('csv-file');
            const collectionSelect = document.getElementById('upload-collection');
            const resultDiv = document.getElementById('upload-result');
            
            if (!fileInput.files[0]) {
                alert('CSV íŒŒì¼ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
                return;
            }
            
            const file = fileInput.files[0];
            const collectionType = collectionSelect.value;
            
            try {
                // íŒŒì¼ ì½ê¸°
                const csvData = await readFileAsText(file);
                
                // í˜„ì¬ ì‚¬ìš©ì í† í° ê°€ì ¸ì˜¤ê¸°
                const user = window.auth.currentUser;
                if (!user) {
                    alert('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.');
                    return;
                }
                
                const idToken = await user.getIdToken();
                
                // ì—…ë¡œë“œ ì‹œì‘ í‘œì‹œ
                resultDiv.innerHTML = '<div class="p-4 bg-blue-100 text-blue-800 rounded-lg">ğŸ“¤ CSV ì—…ë¡œë“œ ì¤‘...</div>';
                resultDiv.classList.remove('hidden');
                
                // Netlify Function í˜¸ì¶œ
                const response = await fetch('/.netlify/functions/upload-csv', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${idToken}`
                    },
                    body: JSON.stringify({
                        csvData: csvData,
                        collectionType: collectionType
                    })
                });
                
                const result = await response.json();
                
                if (response.ok && result.success) {
                    // ì„±ê³µ í‘œì‹œ
                    resultDiv.innerHTML = `
                        <div class="p-4 bg-green-100 text-green-800 rounded-lg">
                            <h4 class="font-bold">âœ… ì—…ë¡œë“œ ì™„ë£Œ</h4>
                            <p>ì´ ${result.summary.totalRows}ê°œ í–‰ ì¤‘ ${result.summary.savedCount}ê°œ ì €ì¥ë¨</p>
                            ${result.summary.errorCount > 0 ? `<p class="text-red-600">ì˜¤ë¥˜: ${result.summary.errorCount}ê°œ</p>` : ''}
                        </div>
                    `;
                } else {
                    // ì˜¤ë¥˜ í‘œì‹œ
                    resultDiv.innerHTML = `
                        <div class="p-4 bg-red-100 text-red-800 rounded-lg">
                            <h4 class="font-bold">âŒ ì—…ë¡œë“œ ì‹¤íŒ¨</h4>
                            <p>${result.error || 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.'}</p>
                        </div>
                    `;
                }
                
            } catch (error) {
                console.error('CSV ì—…ë¡œë“œ ì˜¤ë¥˜:', error);
                resultDiv.innerHTML = `
                    <div class="p-4 bg-red-100 text-red-800 rounded-lg">
                        <h4 class="font-bold">âŒ ì—…ë¡œë“œ ì‹¤íŒ¨</h4>
                        <p>${error.message}</p>
                    </div>
                `;
            }
        };

        // íŒŒì¼ì„ í…ìŠ¤íŠ¸ë¡œ ì½ê¸°
        function readFileAsText(file) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.onload = (e) => resolve(e.target.result);
                reader.onerror = (e) => reject(e);
                reader.readAsText(file);
            });
        }

        // ë°ì´í„° ë‚´ë³´ë‚´ê¸° í•¨ìˆ˜
        window.exportData = async function() {
            const collectionSelect = document.getElementById('export-collection');
            const collectionType = collectionSelect.value;
            
            try {
                // í˜„ì¬ ì‚¬ìš©ì í† í° ê°€ì ¸ì˜¤ê¸°
                const user = window.auth.currentUser;
                if (!user) {
                    alert('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.');
                    return;
                }
                
                // Firestoreì—ì„œ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
                const snapshot = await window.firestore.collection(collectionType).get();
                const data = [];
                
                snapshot.forEach(doc => {
                    data.push({
                        id: doc.id,
                        ...doc.data()
                    });
                });
                
                // CSV ë³€í™˜
                const csv = convertToCSV(data);
                
                // íŒŒì¼ ë‹¤ìš´ë¡œë“œ
                downloadCSV(csv, `${collectionType}_export_${new Date().toISOString().split('T')[0]}.csv`);
                
            } catch (error) {
                console.error('ë°ì´í„° ë‚´ë³´ë‚´ê¸° ì˜¤ë¥˜:', error);
                alert('ë°ì´í„° ë‚´ë³´ë‚´ê¸°ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: ' + error.message);
            }
        };

        // ë°ì´í„°ë¥¼ CSVë¡œ ë³€í™˜
        function convertToCSV(data) {
            if (data.length === 0) return '';
            
            const headers = Object.keys(data[0]);
            const csvRows = [];
            
            // í—¤ë” ì¶”ê°€
            csvRows.push(headers.join(','));
            
            // ë°ì´í„° ì¶”ê°€
            data.forEach(row => {
                const values = headers.map(header => {
                    const value = row[header];
                    // ë‚ ì§œ ê°ì²´ ì²˜ë¦¬
                    if (value && typeof value.toDate === 'function') {
                        return value.toDate().toISOString();
                    }
                    // ë¬¸ìì—´ì— ì‰¼í‘œê°€ ìˆìœ¼ë©´ ë”°ì˜´í‘œë¡œ ê°ì‹¸ê¸°
                    if (typeof value === 'string' && value.includes(',')) {
                        return `"${value.replace(/"/g, '""')}"`;
                    }
                    return value || '';
                });
                csvRows.push(values.join(','));
            });
            
            return csvRows.join('\n');
        }

        // CSV íŒŒì¼ ë‹¤ìš´ë¡œë“œ
        function downloadCSV(csv, filename) {
            const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            
            if (link.download !== undefined) {
                const url = URL.createObjectURL(blob);
                link.setAttribute('href', url);
                link.setAttribute('download', filename);
                link.style.visibility = 'hidden';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            }
        }

        // ìƒˆ ì˜ë¢° ì¶”ê°€ í•¨ìˆ˜
        window.addNewRequest = async function() {
            const title = document.getElementById('new-request-title').value;
            const url = document.getElementById('new-request-url').value;
            const status = document.getElementById('new-request-status').value;
            const priority = document.getElementById('new-request-priority').value;
            const email = document.getElementById('new-request-email').value;
            const note = document.getElementById('new-request-note').value;
            
            if (!title || !url || !email) {
                alert('í•„ìˆ˜ í•„ë“œë¥¼ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            try {
                // í˜„ì¬ ì‚¬ìš©ì í™•ì¸
                const user = window.auth.currentUser;
                if (!user) {
                    alert('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.');
                    return;
                }
                
                // Firestoreì— ì˜ë¢° ì¶”ê°€
                const requestData = {
                    title: title,
                    url: url,
                    status: status,
                    priority: priority,
                    email: email,
                    note: note,
                    createdAt: new Date(),
                    updatedAt: new Date(),
                    createdBy: user.email
                };
                
                await window.firestore.collection('requests').add(requestData);
                
                // í¼ ì´ˆê¸°í™”
                document.getElementById('new-request-title').value = '';
                document.getElementById('new-request-url').value = '';
                document.getElementById('new-request-status').value = 'pending';
                document.getElementById('new-request-priority').value = 'normal';
                document.getElementById('new-request-email').value = '';
                document.getElementById('new-request-note').value = '';
                
                // ì„±ê³µ ë©”ì‹œì§€
                showToast('âœ… ì˜ë¢°ê°€ ì„±ê³µì ìœ¼ë¡œ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
                
            } catch (error) {
                console.error('ì˜ë¢° ì¶”ê°€ ì˜¤ë¥˜:', error);
                showToast('âŒ ì˜ë¢° ì¶”ê°€ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: ' + error.message, 'error');
            }
        };

        // í† ìŠ¤íŠ¸ ë©”ì‹œì§€ í‘œì‹œ
        function showToast(message, type = 'info') {
            const toast = document.createElement('div');
            toast.className = `fixed top-4 right-4 p-4 rounded-lg shadow-lg z-50 max-w-md ${
                type === 'success' ? 'bg-green-500 text-white' :
                type === 'error' ? 'bg-red-500 text-white' :
                'bg-blue-500 text-white'
            }`;
            toast.textContent = message;
            
            document.body.appendChild(toast);
            
            // 3ì´ˆ í›„ ìë™ ì œê±°
            setTimeout(() => {
                if (toast.parentElement) {
                    toast.remove();
                }
            }, 3000);
        }

        // ë™ê¸°í™” ì„¤ì • ëª¨ë‹¬ í‘œì‹œ
        window.showAddSyncConfigModal = function() {
            // TODO: ë™ê¸°í™” ì„¤ì • ëª¨ë‹¬ êµ¬í˜„
            alert('ë™ê¸°í™” ì„¤ì • ëª¨ë‹¬ì„ êµ¬í˜„í•´ì•¼ í•©ë‹ˆë‹¤.');
        };
        
        // Firebase ì—°ê²° í…ŒìŠ¤íŠ¸ í•¨ìˆ˜
        window.testFirebaseConnection = function() {
            console.log('ğŸ”¥ Firebase ì—°ê²° í…ŒìŠ¤íŠ¸ ì‹œì‘...');
            
            if (typeof firebase === 'undefined') {
                alert('âŒ Firebase SDKê°€ ë¡œë“œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\n\nì„œë²„ CSP í—¤ë”ì— www.gstatic.comì´ í¬í•¨ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.');
                return false;
            }
            
            if (!firebase.auth) { 
                alert("Firebase Auth ì´ˆê¸°í™” ì‹¤íŒ¨"); 
                return false;
            }
            
            if (!firebase.firestore) { 
                alert("Firebase Firestore ì´ˆê¸°í™” ì‹¤íŒ¨"); 
                return false;
            }
            
            if (window.firebaseApp && window.firestore && window.auth) {
                alert('âœ… Firebase ì—°ê²° ì„±ê³µ!\n\nëª¨ë“  ì„œë¹„ìŠ¤ê°€ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•©ë‹ˆë‹¤.');
                return true;
            } else {
                alert('âŒ Firebase ì—°ê²° ì‹¤íŒ¨!\n\nì´ˆê¸°í™”ë¥¼ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
                return false;
            }
        };
        
        // CSP í—¤ë” í™•ì¸ í•¨ìˆ˜
        window.checkCSPHeaders = function() {
            console.log('ğŸ” CSP í—¤ë” í™•ì¸ ì‹œì‘...');
            
            // í˜„ì¬ í˜ì´ì§€ì˜ Response Headers í™•ì¸
            fetch(window.location.href, { method: 'HEAD' })
                .then(response => {
                    const cspHeader = response.headers.get('content-security-policy');
                    const serverHeader = response.headers.get('server');
                    const cfRay = response.headers.get('cf-ray');
                    const xVercelId = response.headers.get('x-vercel-id');
                    const xCloudTrace = response.headers.get('x-cloud-trace-context');
                    
                    console.log('ğŸ“‹ Response Headers ë¶„ì„:');
                    console.log('Server:', serverHeader);
                    console.log('CF-Ray:', cfRay);
                    console.log('X-Vercel-ID:', xVercelId);
                    console.log('X-Cloud-Trace:', xCloudTrace);
                    console.log('CSP Header:', cspHeader);
                    
                    // CSP ì£¼ì… ì£¼ì²´ íŒë³„
                    let cspSource = 'Unknown';
                    if (cfRay || response.headers.get('cf-cache-status')) {
                        cspSource = 'Cloudflare';
                    } else if (serverHeader && serverHeader.includes('nginx')) {
                        cspSource = 'Nginx';
                    } else if (serverHeader && serverHeader.includes('apache')) {
                        cspSource = 'Apache';
                    } else if (xVercelId) {
                        cspSource = 'Vercel';
                    } else if (serverHeader && serverHeader.includes('Firebase')) {
                        cspSource = 'Firebase Hosting';
                    }
                    
                    // Firebase ë„ë©”ì¸ í¬í•¨ ì—¬ë¶€ í™•ì¸
                    const hasFirebaseDomains = cspHeader && (
                        cspHeader.includes('www.gstatic.com') || 
                        cspHeader.includes('www.gstatic.com/firebasejs')
                    );
                    
                    const result = `
ğŸ” CSP í—¤ë” ë¶„ì„ ê²°ê³¼:

ğŸ“¡ CSP ì£¼ì… ì£¼ì²´: ${cspSource}
ğŸ”’ CSP í—¤ë” ì¡´ì¬: ${cspHeader ? 'Yes' : 'No'}
ğŸ”¥ Firebase ë„ë©”ì¸ í¬í•¨: ${hasFirebaseDomains ? 'Yes' : 'No'}

${cspHeader ? `ğŸ“‹ í˜„ì¬ CSP ì •ì±…:
${cspHeader.substring(0, 200)}...` : 'âŒ CSP í—¤ë”ê°€ ì—†ìŠµë‹ˆë‹¤.'}

${!hasFirebaseDomains ? 'âš ï¸ Firebase ë„ë©”ì¸ì´ CSPì— í¬í•¨ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤!' : 'âœ… Firebase ë„ë©”ì¸ì´ CSPì— í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤.'}
                    `;
                    
                    alert(result);
                    console.log('CSP ë¶„ì„ ì™„ë£Œ:', result);
                })
                .catch(error => {
                    console.error('âŒ CSP í—¤ë” í™•ì¸ ì‹¤íŒ¨:', error);
                    alert('âŒ CSP í—¤ë” í™•ì¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\n\në¸Œë¼ìš°ì € DevTools â†’ Network â†’ Response Headersë¥¼ ì§ì ‘ í™•ì¸í•˜ì„¸ìš”.');
                });
        };
        
        // ìºì‹œ ë° ì„œë¹„ìŠ¤ì›Œì»¤ ì •ë¦¬ í•¨ìˆ˜ (CSP ì™„ì „ ì •ë¦¬)
        window.clearCacheAndReload = function() {
            console.log('ğŸ§¹ ìºì‹œ ë° ì„œë¹„ìŠ¤ì›Œì»¤ ì™„ì „ ì •ë¦¬ ì‹œì‘...');
            
            let cleanupPromises = [];
            
            // ì„œë¹„ìŠ¤ì›Œì»¤ ë“±ë¡ í•´ì œ
            if ('serviceWorker' in navigator) {
                const swPromise = navigator.serviceWorker.getRegistrations().then(function(registrations) {
                    const unregisterPromises = registrations.map(registration => {
                        console.log('ğŸ—‘ï¸ ì„œë¹„ìŠ¤ì›Œì»¤ ë“±ë¡ í•´ì œ:', registration.scope);
                        return registration.unregister();
                    });
                    return Promise.all(unregisterPromises);
                });
                cleanupPromises.push(swPromise);
            }
            
            // ìºì‹œ ìŠ¤í† ë¦¬ì§€ ì •ë¦¬
            if ('caches' in window) {
                const cachePromise = caches.keys().then(function(cacheNames) {
                    return Promise.all(
                        cacheNames.map(function(cacheName) {
                            console.log('ğŸ—‘ï¸ ìºì‹œ ì‚­ì œ:', cacheName);
                            return caches.delete(cacheName);
                        })
                    );
                });
                cleanupPromises.push(cachePromise);
            }
            
            // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ì •ë¦¬
            try {
                localStorage.clear();
                sessionStorage.clear();
                console.log('âœ… ë¡œì»¬/ì„¸ì…˜ ìŠ¤í† ë¦¬ì§€ê°€ ì •ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤.');
            } catch (e) {
                console.log('âš ï¸ ìŠ¤í† ë¦¬ì§€ ì •ë¦¬ ì¤‘ ì˜¤ë¥˜:', e);
            }
            
            // IndexedDB ì •ë¦¬
            if ('indexedDB' in window) {
                try {
                    indexedDB.databases().then(databases => {
                        databases.forEach(db => {
                            indexedDB.deleteDatabase(db.name);
                            console.log('ğŸ—‘ï¸ IndexedDB ì‚­ì œ:', db.name);
                        });
                    });
                } catch (e) {
                    console.log('âš ï¸ IndexedDB ì •ë¦¬ ì¤‘ ì˜¤ë¥˜:', e);
                }
            }
            
            // ëª¨ë“  ì •ë¦¬ ì‘ì—… ì™„ë£Œ í›„ ìƒˆë¡œê³ ì¹¨
            Promise.all(cleanupPromises).then(() => {
                console.log('âœ… ëª¨ë“  ìºì‹œ ì •ë¦¬ ì™„ë£Œ');
                // ê°•ì œ ìƒˆë¡œê³ ì¹¨ (ìºì‹œ ë¬´ì‹œ + íƒ€ì„ìŠ¤íƒ¬í”„)
                const timestamp = Date.now();
                const url = new URL(window.location);
                url.searchParams.set('v', timestamp);
                url.searchParams.set('cache', 'clear');
                window.location.href = url.toString();
            }).catch(error => {
                console.error('âŒ ìºì‹œ ì •ë¦¬ ì¤‘ ì˜¤ë¥˜:', error);
                // ì˜¤ë¥˜ê°€ ìˆì–´ë„ ìƒˆë¡œê³ ì¹¨
                const timestamp = Date.now();
                const url = new URL(window.location);
                url.searchParams.set('v', timestamp);
                url.searchParams.set('cache', 'clear');
                window.location.href = url.toString();
            });
        };
        
        // í˜ì´ì§€ ì´ë™ í•¨ìˆ˜
        window.goToPage = function(page) {
            window.location.href = page;
        };
        
        // ì‚¬ì´ë“œë°” ì„¹ì…˜ ì „í™˜ í•¨ìˆ˜
        function switchSection(sectionName) {
            console.log('ğŸ”„ ì„¹ì…˜ ì „í™˜:', sectionName);
            
            // ëª¨ë“  ì„¹ì…˜ ìˆ¨ê¸°ê¸°
            document.querySelectorAll('.section-content').forEach(section => {
                section.classList.add('hidden');
            });
            
            // ëª¨ë“  ì‚¬ì´ë“œë°” ì•„ì´í…œ ë¹„í™œì„±í™”
            document.querySelectorAll('.sidebar-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // ì„ íƒëœ ì„¹ì…˜ í‘œì‹œ
            const targetSection = document.getElementById(sectionName + '-section');
            if (targetSection) {
                targetSection.classList.remove('hidden');
            }
            
            // ì„ íƒëœ ì‚¬ì´ë“œë°” ì•„ì´í…œ í™œì„±í™”
            const activeItem = document.querySelector(`[data-section="${sectionName}"]`);
            if (activeItem) {
                activeItem.classList.add('active');
            }
        }
        
        // ì „ì—­ í•¨ìˆ˜ë¡œ ë…¸ì¶œ
        window.switchSection = switchSection;
        
        console.log('ğŸš€ ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ ì™„ë£Œ');
    </script>
    
    <style>
        body { font-family: 'Inter', 'Noto Sans KR', sans-serif; }
        .sidebar-item.active { background-color: #ec4899; color: white; }
        .tab-btn.active { background-color: #ec4899; color: white; }
        .filter-btn.active { background-color: #6b7280; color: white; }
    </style>
</head>
<body class="bg-gradient-to-br from-gray-50 via-blue-50 to-emerald-50 min-h-screen">
    <!-- ë¡œê·¸ì¸ ì„¹ì…˜ -->
    <div id="login-section" class="min-h-screen flex items-center justify-center">
        <div class="bg-white rounded-xl shadow-2xl p-8 w-full max-w-md">
            <div class="text-center mb-8">
                <h1 class="text-3xl font-bold text-pink-600">PriceHunter</h1>
                <p class="text-gray-600">ê´€ë¦¬ì ë¡œê·¸ì¸</p>
            </div>
            
            <form onsubmit="event.preventDefault(); adminLogin();" class="space-y-6">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">ì´ë©”ì¼</label>
                    <input type="email" id="admin-email" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-400 focus:outline-none" placeholder="admin@pricehunter.com">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">ë¹„ë°€ë²ˆí˜¸</label>
                    <input type="password" id="admin-password" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-400 focus:outline-none" placeholder="ë¹„ë°€ë²ˆí˜¸">
                </div>
                
                <button type="submit" class="w-full bg-gradient-to-r from-pink-500 to-purple-500 text-white font-bold py-3 px-4 rounded-lg hover:from-pink-600 hover:to-purple-600 transition shadow-lg">
                    ğŸ” ë¡œê·¸ì¸
                </button>
            </form>
            
            <div class="mt-6 text-center space-y-3">
                <button onclick="goToPage('index.html')" class="text-pink-600 hover:text-pink-700 text-sm block w-full">
                    ğŸ  ë©”ì¸í˜ì´ì§€ë¡œ ëŒì•„ê°€ê¸°
                </button>
                <button onclick="createAdminAccount()" class="text-blue-600 hover:text-blue-700 text-sm block w-full">
                    ğŸ”§ í…ŒìŠ¤íŠ¸ ê´€ë¦¬ì ê³„ì • ìƒì„±
                </button>
                <div class="text-xs text-gray-500 mt-2">
                    í…ŒìŠ¤íŠ¸ìš© ê³„ì •: admin@pricehunter.com / admin1234
                </div>
            </div>
        </div>
    </div>

    <!-- ëŒ€ì‹œë³´ë“œ ì„¹ì…˜ -->
    <div id="dashboard-section" class="hidden">
        <div class="flex h-screen">
            <!-- ì‚¬ì´ë“œë°” -->
            <div class="w-64 bg-white shadow-lg">
                <div class="p-6 border-b">
                    <h1 class="text-xl font-bold text-pink-600">PriceHunter</h1>
                    <p class="text-sm text-gray-500">ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ</p>
                    <div class="flex items-center justify-between mt-2">
                        <p id="admin-info" class="text-xs text-gray-400"></p>
                        <div id="user-role-display"></div>
                    </div>
                </div>
                
                <nav class="p-4">
                    <div class="space-y-2">
                        <button class="sidebar-item w-full text-left px-4 py-3 rounded-lg font-semibold hover:bg-pink-50 transition active" data-section="dashboard">
                            ğŸ“Š ëŒ€ì‹œë³´ë“œ
                        </button>
                        <button class="sidebar-item w-full text-left px-4 py-3 rounded-lg font-semibold hover:bg-pink-50 transition" data-section="requests">
                            ğŸ“‹ ì˜ë¢° ê´€ë¦¬
                        </button>
                        <button class="sidebar-item w-full text-left px-4 py-3 rounded-lg font-semibold hover:bg-pink-50 transition" data-section="inquiries">
                            ğŸ’¬ 1:1 ë¬¸ì˜
                        </button>
                        <button class="sidebar-item w-full text-left px-4 py-3 rounded-lg font-semibold hover:bg-pink-50 transition" data-section="members">
                            ğŸ‘¥ íšŒì› ê´€ë¦¬
                        </button>
                        <button class="sidebar-item w-full text-left px-4 py-3 rounded-lg font-semibold hover:bg-pink-50 transition" data-section="data-management">
                            ğŸ“ ë°ì´í„° ê´€ë¦¬
                        </button>
                        <button class="sidebar-item w-full text-left px-4 py-3 rounded-lg font-semibold hover:bg-pink-50 transition" data-section="sync-settings">
                            ğŸ”„ ë™ê¸°í™” ì„¤ì •
                        </button>
                    </div>
                </nav>
                
                <div class="absolute bottom-4 left-4 right-4">
                    <button onclick="adminLogout()" class="w-full px-4 py-2 bg-red-500 text-white rounded-lg font-semibold hover:bg-red-600 transition">
                        ğŸ”“ ë¡œê·¸ì•„ì›ƒ
                    </button>
                </div>
            </div>

            <!-- ë©”ì¸ ì½˜í…ì¸  -->
            <div class="flex-1 overflow-auto">
                <!-- ëŒ€ì‹œë³´ë“œ ì„¹ì…˜ -->
                <div id="dashboard-section" class="section-content p-8">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-gray-800">ğŸ“Š ëŒ€ì‹œë³´ë“œ</h2>
                        <div class="flex gap-2 flex-wrap">
                            <button onclick="goToPage('index.html')" class="px-4 py-2 bg-blue-500 text-white rounded-lg font-semibold hover:bg-blue-600 transition">
                                ğŸ  ë©”ì¸í˜ì´ì§€ë¡œ
                            </button>
                            <button onclick="goToPage('member-dashboard.html')" class="px-4 py-2 bg-green-500 text-white rounded-lg font-semibold hover:bg-green-600 transition">
                                ğŸ‘¤ íšŒì›ëŒ€ì‹œë³´ë“œë¡œ
                            </button>
                            <button onclick="testFirebaseConnection()" class="px-4 py-2 bg-purple-500 text-white rounded-lg font-semibold hover:bg-purple-600 transition">
                                ğŸ”¥ Firebase ì—°ê²° í…ŒìŠ¤íŠ¸
                            </button>
                            <button onclick="checkCSPHeaders()" class="px-4 py-2 bg-indigo-500 text-white rounded-lg font-semibold hover:bg-indigo-600 transition">
                                ğŸ” CSP í—¤ë” í™•ì¸
                            </button>
                            <button onclick="clearCacheAndReload()" class="px-4 py-2 bg-orange-500 text-white rounded-lg font-semibold hover:bg-orange-600 transition">
                                ğŸ§¹ ìºì‹œ ì •ë¦¬ & ìƒˆë¡œê³ ì¹¨
                            </button>
                        </div>
                    </div>
                    
                    <!-- í†µê³„ ì¹´ë“œ -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                        <div class="bg-white rounded-xl shadow-lg p-6">
                            <div class="flex items-center">
                                <div class="p-3 bg-blue-100 rounded-lg">
                                    <span class="text-2xl">ğŸ“‹</span>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm text-gray-500">ì´ ì˜ë¢°</p>
                                    <p class="text-2xl font-bold text-gray-800" id="total-requests">0</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-white rounded-xl shadow-lg p-6">
                            <div class="flex items-center">
                                <div class="p-3 bg-green-100 rounded-lg">
                                    <span class="text-2xl">âœ…</span>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm text-gray-500">ì™„ë£Œëœ ì˜ë¢°</p>
                                    <p class="text-2xl font-bold text-gray-800" id="completed-requests">0</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-white rounded-xl shadow-lg p-6">
                            <div class="flex items-center">
                                <div class="p-3 bg-orange-100 rounded-lg">
                                    <span class="text-2xl">ğŸ‘¥</span>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm text-gray-500">ì´ íšŒì›</p>
                                    <p class="text-2xl font-bold text-gray-800" id="total-members">0</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-white rounded-xl shadow-lg p-6">
                            <div class="flex items-center">
                                <div class="p-3 bg-purple-100 rounded-lg">
                                    <span class="text-2xl">ğŸ’¬</span>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm text-gray-500">ë¯¸ë‹µë³€ ë¬¸ì˜</p>
                                    <p class="text-2xl font-bold text-gray-800" id="pending-inquiries">0</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ìµœê·¼ í™œë™ -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div class="bg-white rounded-xl shadow-lg p-6">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4">ìµœê·¼ ì˜ë¢°</h3>
                            <div id="recent-requests" class="space-y-3">
                                <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë¨ -->
                            </div>
                        </div>
                        
                        <div class="bg-white rounded-xl shadow-lg p-6">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4">ìµœê·¼ ë¬¸ì˜</h3>
                            <div id="recent-inquiries" class="space-y-3">
                                <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë¨ -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ì˜ë¢° ê´€ë¦¬ ì„¹ì…˜ -->
                <div id="requests-section" class="section-content p-8 hidden">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-gray-800">ğŸ“‹ ì˜ë¢° ê´€ë¦¬</h2>
                        <div class="flex gap-2">
                            <button onclick="goToPage('index.html')" class="px-4 py-2 bg-blue-500 text-white rounded-lg font-semibold hover:bg-blue-600 transition">
                                ğŸ  ë©”ì¸í˜ì´ì§€ë¡œ
                            </button>
                            <button onclick="goToPage('request.html')" class="px-4 py-2 bg-green-500 text-white rounded-lg font-semibold hover:bg-green-600 transition">
                                ğŸ“ ì˜ë¢°í˜ì´ì§€ë¡œ
                            </button>
                        </div>
                    </div>
                    
                    <!-- ì˜ë¢° ëª©ë¡ -->
                    <div class="bg-white rounded-xl shadow-lg overflow-hidden">
                        <div class="font-bold text-gray-700 p-4 border-b">ì ‘ìˆ˜ëœ ì˜ë¢° ëª©ë¡</div>
                        <div class="grid grid-cols-8 gap-2 px-4 py-2 bg-pink-100 text-sm font-bold text-pink-700">
                            <div class="col-span-1">ì„ íƒ</div>
                            <div class="col-span-2">ì˜ë¢°ë²ˆí˜¸/íšŒì›ëª…</div>
                            <div class="col-span-1 text-center">ì˜ë¢°ì¼ì‹œ</div>
                            <div class="col-span-1 text-center">ì§„í–‰ìƒí™©</div>
                            <div class="col-span-1 text-center">êµ¬ë§¤ë°©ì‹</div>
                            <div class="col-span-1 text-center">êµ¬ë§¤ìƒíƒœ</div>
                            <div class="col-span-1 text-center">ì•Œë¦¼ìƒíƒœ</div>
                        </div>
                        <ul id="request-list" class="bg-pink-50 divide-y divide-pink-100">
                            <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë¨ -->
                        </ul>
                    </div>
                    
                    <!-- ì˜ë¢° ì¶”ê°€ í¼ -->
                    <div id="new-request-form" class="bg-white rounded-xl shadow-lg p-6 mb-6">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4">ğŸ“ ìƒˆ ì˜ë¢° ì¶”ê°€</h3>
                        <form onsubmit="event.preventDefault(); addNewRequest();" class="space-y-4">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">ì œëª©</label>
                                    <input type="text" id="new-request-title" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-400 focus:outline-none" placeholder="ì˜ë¢° ì œëª©">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">URL</label>
                                    <input type="url" id="new-request-url" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-400 focus:outline-none" placeholder="https://example.com">
                                </div>
                            </div>
                            
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">ìƒíƒœ</label>
                                    <select id="new-request-status" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-400 focus:outline-none">
                                        <option value="pending">ëŒ€ê¸°ì¤‘</option>
                                        <option value="in_progress">ì§„í–‰ì¤‘</option>
                                        <option value="done">ì™„ë£Œ</option>
                                        <option value="rejected">ê±°ì ˆ</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">ìš°ì„ ìˆœìœ„</label>
                                    <select id="new-request-priority" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-400 focus:outline-none">
                                        <option value="low">ë‚®ìŒ</option>
                                        <option value="normal" selected>ë³´í†µ</option>
                                        <option value="high">ë†’ìŒ</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">ì´ë©”ì¼</label>
                                    <input type="email" id="new-request-email" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-400 focus:outline-none" placeholder="user@example.com">
                                </div>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">ë©”ëª¨</label>
                                <textarea id="new-request-note" rows="3" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-400 focus:outline-none" placeholder="ì¶”ê°€ ë©”ëª¨"></textarea>
                            </div>
                            
                            <button type="submit" class="w-full bg-gradient-to-r from-pink-500 to-purple-500 text-white font-bold py-3 px-4 rounded-lg hover:from-pink-600 hover:to-purple-600 transition shadow-lg">
                                ğŸ“ ì˜ë¢° ì¶”ê°€
                            </button>
                        </form>
                    </div>

                    <!-- ì˜ë¢° ìƒì„¸ ë° ê²°ê³¼ ì…ë ¥ -->
                    <div id="detail-section" class="w-full hidden mt-6">
                        <div class="bg-white rounded-xl shadow-lg p-6 mb-4">
                            <div class="mb-2 text-gray-700 font-bold">ì˜ë¢° ìƒì„¸</div>
                            <div class="grid grid-cols-2 gap-4 text-sm">
                                <div><span class="font-semibold">ì˜ë¢°ë²ˆí˜¸:</span> <span id="detail-num"></span></div>
                                <div><span class="font-semibold">ì œí’ˆëª…:</span> <span id="detail-name"></span></div>
                                <div><span class="font-semibold">ì œí’ˆì„¤ëª…:</span> <span id="detail-desc"></span></div>
                                <div><span class="font-semibold">ì°¸ê³ ì‚¬ì´íŠ¸:</span> <span id="detail-url"></span></div>
                                <div><span class="font-semibold">ê°€ê²©:</span> <span id="detail-price"></span></div>
                                <div><span class="font-semibold">ì´ë¦„:</span> <span id="detail-username"></span></div>
                                <div><span class="font-semibold">ì´ë©”ì¼:</span> <span id="detail-email"></span></div>
                                <div><span class="font-semibold">íœ´ëŒ€í°:</span> <span id="detail-phone"></span></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 1:1 ë¬¸ì˜ ì„¹ì…˜ -->
                <div id="inquiries-section" class="section-content p-8 hidden">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-gray-800">ğŸ’¬ 1:1 ë¬¸ì˜ ê´€ë¦¬</h2>
                        <div class="flex gap-2">
                            <button onclick="goToPage('index.html')" class="px-4 py-2 bg-blue-500 text-white rounded-lg font-semibold hover:bg-blue-600 transition">
                                ğŸ  ë©”ì¸í˜ì´ì§€ë¡œ
                            </button>
                            <button onclick="goToPage('support.html')" class="px-4 py-2 bg-green-500 text-white rounded-lg font-semibold hover:bg-green-600 transition">
                                ğŸ’¬ ë¬¸ì˜í˜ì´ì§€ë¡œ
                            </button>
                        </div>
                    </div>
                    
                    <!-- ë¬¸ì˜ ëª©ë¡ -->
                    <div class="bg-white rounded-xl shadow-lg overflow-hidden">
                        <div class="overflow-x-auto">
                            <table class="w-full">
                                <thead class="bg-blue-50">
                                    <tr>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-blue-700 uppercase tracking-wider">ë¬¸ì˜ë²ˆí˜¸</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-blue-700 uppercase tracking-wider">íšŒì›ëª…</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-blue-700 uppercase tracking-wider">ì œëª©</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-blue-700 uppercase tracking-wider">ìƒíƒœ</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-blue-700 uppercase tracking-wider">ë“±ë¡ì¼ì‹œ</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-blue-700 uppercase tracking-wider">ì‘ì—…</th>
                                    </tr>
                                </thead>
                                <tbody id="inquiries-table-body" class="bg-white divide-y divide-gray-200">
                                    <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë¨ -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <!-- ë¬¸ì˜ ìƒì„¸ ë° ë‹µë³€ -->
                    <div id="inquiry-detail-section" class="w-full hidden mt-6">
                        <div class="bg-white rounded-xl shadow-lg p-6 mb-4">
                            <div class="mb-4">
                                <h3 class="text-lg font-bold text-gray-800 mb-2">ë¬¸ì˜ ìƒì„¸</h3>
                                <div class="grid grid-cols-2 gap-4 text-sm">
                                    <div><span class="font-semibold">ë¬¸ì˜ë²ˆí˜¸:</span> <span id="inquiry-id"></span></div>
                                    <div><span class="font-semibold">ì œëª©:</span> <span id="inquiry-title"></span></div>
                                    <div><span class="font-semibold">íšŒì›ëª…:</span> <span id="inquiry-username"></span></div>
                                    <div><span class="font-semibold">ì´ë©”ì¼:</span> <span id="inquiry-email"></span></div>
                                    <div><span class="font-semibold">ì „í™”ë²ˆí˜¸:</span> <span id="inquiry-phone"></span></div>
                                    <div><span class="font-semibold">ë¬¸ì˜ì¼ì‹œ:</span> <span id="inquiry-date"></span></div>
                                </div>
                            </div>
                            
                            <div class="mb-4">
                                <h4 class="font-semibold text-gray-700 mb-2">ë¬¸ì˜ ë‚´ìš©</h4>
                                <div id="inquiry-content" class="bg-gray-50 p-4 rounded-lg text-gray-700"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- íšŒì› ê´€ë¦¬ ì„¹ì…˜ -->
                <div id="members-section" class="section-content p-8 hidden">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-gray-800">ğŸ‘¥ íšŒì› ê´€ë¦¬</h2>
                        <div class="flex gap-2">
                            <button onclick="goToPage('index.html')" class="px-4 py-2 bg-blue-500 text-white rounded-lg font-semibold hover:bg-blue-600 transition">
                                ğŸ  ë©”ì¸í˜ì´ì§€ë¡œ
                            </button>
                            <button onclick="goToPage('member-dashboard.html')" class="px-4 py-2 bg-green-500 text-white rounded-lg font-semibold hover:bg-green-600 transition">
                                ğŸ‘¤ íšŒì›ëŒ€ì‹œë³´ë“œë¡œ
                            </button>
                        </div>
                    </div>
                    
                    <!-- íšŒì› ëª©ë¡ -->
                    <div class="bg-white rounded-xl shadow-lg overflow-hidden">
                        <div class="overflow-x-auto">
                            <table class="w-full">
                                <thead class="bg-green-50">
                                    <tr>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-green-700 uppercase tracking-wider">í”„ë¡œí•„</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-green-700 uppercase tracking-wider">íšŒì›ëª…</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-green-700 uppercase tracking-wider">ë¡œê·¸ì¸ ë°©ì‹</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-green-700 uppercase tracking-wider">ì´ë©”ì¼</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-green-700 uppercase tracking-wider">íœ´ëŒ€í°</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-green-700 uppercase tracking-wider">ê°€ì…ì¼</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-green-700 uppercase tracking-wider">ì˜ë¢°ìˆ˜</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-green-700 uppercase tracking-wider">ì‘ì—…</th>
                                    </tr>
                                </thead>
                                <tbody id="members-table-body" class="bg-white divide-y divide-gray-200">
                                    <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë¨ -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- ë°ì´í„° ê´€ë¦¬ ì„¹ì…˜ -->
                <div id="data-management-section" class="section-content p-8 hidden">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-gray-800">ğŸ“ ë°ì´í„° ê´€ë¦¬</h2>
                        <div class="flex gap-2">
                            <button onclick="goToPage('index.html')" class="px-4 py-2 bg-blue-500 text-white rounded-lg font-semibold hover:bg-blue-600 transition">
                                ğŸ  ë©”ì¸í˜ì´ì§€ë¡œ
                            </button>
                        </div>
                    </div>
                    
                    <!-- CSV ì—…ë¡œë“œ -->
                    <div id="csv-upload-section" class="bg-white rounded-xl shadow-lg p-6 mb-6">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4">ğŸ“¤ CSV ëŒ€ëŸ‰ ì—…ë¡œë“œ</h3>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">ì»¬ë ‰ì…˜ ì„ íƒ</label>
                                <select id="upload-collection" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-400 focus:outline-none">
                                    <option value="requests">ì˜ë¢° (requests)</option>
                                    <option value="inquiries">ë¬¸ì˜ (inquiries)</option>
                                    <option value="members">íšŒì› (members)</option>
                                </select>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">CSV íŒŒì¼</label>
                                <input type="file" id="csv-file" accept=".csv" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-400 focus:outline-none">
                                <p class="text-xs text-gray-500 mt-1">CSV íŒŒì¼ì„ ì„ íƒí•˜ì„¸ìš”. ì²« ë²ˆì§¸ í–‰ì€ í—¤ë”ë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤.</p>
                            </div>
                            
                            <button onclick="uploadCSV()" class="w-full bg-gradient-to-r from-pink-500 to-purple-500 text-white font-bold py-3 px-4 rounded-lg hover:from-pink-600 hover:to-purple-600 transition shadow-lg">
                                ğŸ“¤ CSV ì—…ë¡œë“œ
                            </button>
                        </div>
                        
                        <!-- ì—…ë¡œë“œ ê²°ê³¼ -->
                        <div id="upload-result" class="mt-4 hidden">
                            <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë¨ -->
                        </div>
                    </div>
                    
                    <!-- ë°ì´í„° ë‚´ë³´ë‚´ê¸° -->
                    <div class="bg-white rounded-xl shadow-lg p-6">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4">ğŸ“¥ ë°ì´í„° ë‚´ë³´ë‚´ê¸°</h3>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">ì»¬ë ‰ì…˜ ì„ íƒ</label>
                                <select id="export-collection" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-400 focus:outline-none">
                                    <option value="requests">ì˜ë¢° (requests)</option>
                                    <option value="inquiries">ë¬¸ì˜ (inquiries)</option>
                                    <option value="members">íšŒì› (members)</option>
                                </select>
                            </div>
                            
                            <button onclick="exportData()" class="w-full bg-gradient-to-r from-green-500 to-blue-500 text-white font-bold py-3 px-4 rounded-lg hover:from-green-600 hover:to-blue-600 transition shadow-lg">
                                ğŸ“¥ ë°ì´í„° ë‚´ë³´ë‚´ê¸°
                            </button>
                        </div>
                    </div>
                </div>

                <!-- ë™ê¸°í™” ì„¤ì • ì„¹ì…˜ -->
                <div id="sync-settings-section" class="section-content p-8 hidden">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-gray-800">ğŸ”„ ë™ê¸°í™” ì„¤ì •</h2>
                        <div class="flex gap-2">
                            <button onclick="goToPage('index.html')" class="px-4 py-2 bg-blue-500 text-white rounded-lg font-semibold hover:bg-blue-600 transition">
                                ğŸ  ë©”ì¸í˜ì´ì§€ë¡œ
                            </button>
                        </div>
                    </div>
                    
                    <!-- ë™ê¸°í™” ì„¤ì • ëª©ë¡ -->
                    <div id="sync-configs-section" class="bg-white rounded-xl shadow-lg p-6 mb-6">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-lg font-semibold text-gray-800">ë™ê¸°í™” ì„¤ì • ëª©ë¡</h3>
                            <button onclick="showAddSyncConfigModal()" class="px-4 py-2 bg-pink-500 text-white rounded-lg font-semibold hover:bg-pink-600 transition">
                                â• ìƒˆ ì„¤ì • ì¶”ê°€
                            </button>
                        </div>
                        
                        <div id="sync-configs-list" class="space-y-4">
                            <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë¨ -->
                        </div>
                    </div>
                    
                    <!-- ë™ê¸°í™” ë¡œê·¸ -->
                    <div class="bg-white rounded-xl shadow-lg p-6">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4">ë™ê¸°í™” ë¡œê·¸</h3>
                        <div id="sync-logs" class="space-y-2 max-h-64 overflow-y-auto">
                            <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë¨ -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ì‚¬ì´ë“œë°” í´ë¦­ ì´ë²¤íŠ¸
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('.sidebar-item').forEach(item => {
                item.addEventListener('click', function() {
                    const section = this.getAttribute('data-section');
                    switchSection(section);
                });
            });
        });
    </script>

    <!-- ë©”ì¸ ìŠ¤í¬ë¦½íŠ¸ (body ëì— ìœ„ì¹˜) -->
    <script>
        // ì¦‰ì‹œ ì‹¤í–‰ìœ¼ë¡œ ìŠ¤í¬ë¦½íŠ¸ ë¡œë”© í™•ì¸
        console.log('ğŸš€ admin-dashboard.html ìŠ¤í¬ë¦½íŠ¸ ë¡œë”© ì‹œì‘...');
        console.log('ğŸ• í˜„ì¬ ì‹œê°„:', new Date().toISOString());
        console.log('ğŸŒ í˜„ì¬ URL:', window.location.href);
        console.log('ğŸ“„ ë¬¸ì„œ ìƒíƒœ:', document.readyState);
        
        // Firebase ì´ˆê¸°í™” ë° ì„¤ì • (ë¡œì»¬ ì„±ê³µ ë°©ì‹)
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸš€ ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ ì´ˆê¸°í™” ì‹œì‘...');
            
            // Firebase SDK ë¡œë”© ëŒ€ê¸° ë° ì´ˆê¸°í™”
            waitForFirebaseAndInitialize();
        });
        
        // DOMContentLoadedê°€ ì´ë¯¸ ë°œìƒí–ˆì„ ê²½ìš°ë¥¼ ëŒ€ë¹„í•œ ì¦‰ì‹œ ì‹¤í–‰
        if (document.readyState === 'loading') {
            console.log('ğŸ“„ DOM ë¡œë”© ì¤‘ - DOMContentLoaded ëŒ€ê¸°');
        } else {
            console.log('ğŸ“„ DOM ì´ë¯¸ ë¡œë“œë¨ - ì¦‰ì‹œ ì´ˆê¸°í™” ì‹¤í–‰');
            console.log('ğŸš€ ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ ì¦‰ì‹œ ì´ˆê¸°í™” ì‹œì‘...');
            waitForFirebaseAndInitialize();
        }
    </script>
</body>
</html>
