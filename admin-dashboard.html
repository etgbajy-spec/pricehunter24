<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>관리자 대시보드 - PriceHunter</title>
    
    <!-- CSP는 서버에서 설정됨 - HTML 메타는 제거하여 충돌 방지 -->
    
    <!-- Tailwind CSS (개선된 로딩 방식) -->
    <script>
        // Tailwind CSS 동적 로딩
        function loadTailwindCSS() {
            return new Promise((resolve, reject) => {
                const script = document.createElement('script');
                script.src = 'https://cdn.tailwindcss.com';
                script.onload = () => {
                    console.log('✅ Tailwind CSS 로드됨');
                    resolve();
                };
                script.onerror = (error) => {
                    console.error('❌ Tailwind CSS 로드 실패:', error);
                    // Tailwind 로드 실패 시 기본 스타일 적용
                    applyFallbackStyles();
                    reject(error);
                };
                document.head.appendChild(script);
            });
        }
        
        // Tailwind 로드 실패 시 대체 스타일
        function applyFallbackStyles() {
            const style = document.createElement('style');
            style.textContent = `
                body { font-family: system-ui, -apple-system, sans-serif; }
                .bg-gradient-to-br { background: linear-gradient(135deg, #f3f4f6, #dbeafe, #d1fae5); }
                .min-h-screen { min-height: 100vh; }
                .flex { display: flex; }
                .items-center { align-items: center; }
                .justify-center { justify-content: center; }
                .bg-white { background-color: white; }
                .rounded-xl { border-radius: 0.75rem; }
                .shadow-2xl { box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25); }
                .p-8 { padding: 2rem; }
                .w-full { width: 100%; }
                .max-w-md { max-width: 28rem; }
                .text-center { text-align: center; }
                .mb-8 { margin-bottom: 2rem; }
                .text-3xl { font-size: 1.875rem; }
                .font-bold { font-weight: 700; }
                .text-pink-600 { color: #db2777; }
                .text-gray-600 { color: #4b5563; }
                .space-y-6 > * + * { margin-top: 1.5rem; }
                .block { display: block; }
                .text-sm { font-size: 0.875rem; }
                .font-medium { font-weight: 500; }
                .text-gray-700 { color: #374151; }
                .mb-2 { margin-bottom: 0.5rem; }
                .px-4 { padding-left: 1rem; padding-right: 1rem; }
                .py-3 { padding-top: 0.75rem; padding-bottom: 0.75rem; }
                .border { border-width: 1px; }
                .border-gray-300 { border-color: #d1d5db; }
                .rounded-lg { border-radius: 0.5rem; }
                .focus\\:ring-2:focus { box-shadow: 0 0 0 2px rgba(236, 72, 153, 0.5); }
                .focus\\:ring-pink-400:focus { box-shadow: 0 0 0 2px rgba(244, 114, 182, 0.5); }
                .focus\\:outline-none:focus { outline: none; }
                .bg-gradient-to-r { background: linear-gradient(to right, #ec4899, #8b5cf6); }
                .text-white { color: white; }
                .hover\\:from-pink-600:hover { background: linear-gradient(to right, #db2777, #7c3aed); }
                .hover\\:to-purple-600:hover { background: linear-gradient(to right, #ec4899, #7c3aed); }
                .transition { transition: all 0.15s ease-in-out; }
                .shadow-lg { box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1); }
                .mt-6 { margin-top: 1.5rem; }
                .text-pink-600 { color: #db2777; }
                .hover\\:text-pink-700:hover { color: #be185d; }
                .text-blue-600 { color: #2563eb; }
                .hover\\:text-blue-700:hover { color: #1d4ed8; }
                .text-xs { font-size: 0.75rem; }
                .text-gray-500 { color: #6b7280; }
                .mt-2 { margin-top: 0.5rem; }
            `;
            document.head.appendChild(style);
            console.log('⚠️ Tailwind CSS 대체 스타일 적용됨');
        }
        
        // Tailwind CSS 로딩 시작
        loadTailwindCSS().catch(() => {
            console.log('⚠️ Tailwind CSS 로딩 실패, 대체 스타일 사용');
        });
    </script>
    
    <!-- Firebase 8.x SDK (최적화된 로딩 방식) -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    
    <!-- Firebase 설정 (단일 진실 소스) -->
    <script src="firebase-config.js"></script>
    
    <script>
        // Firebase 초기화 및 설정 (단순화된 버전)
        document.addEventListener('DOMContentLoaded', function() {
            console.log('🚀 관리자 대시보드 초기화 시작...');
            
            // Firebase SDK 로딩 대기 및 초기화
            waitForFirebaseAndInitialize();
        });
        
        // Firebase SDK 로딩 대기 함수 (개선된 버전)
        function waitForFirebaseAndInitialize() {
            const maxAttempts = 15; // 15초 대기 (CSP 환경에서 더 여유있게)
            let attempts = 0;
            
            const checkFirebase = () => {
                attempts++;
                console.log(`🔍 Firebase SDK 확인 시도 ${attempts}/${maxAttempts}`);
                
                // Firebase SDK 로드 확인 (더 엄격한 검증)
                if (typeof firebase !== 'undefined' && 
                    firebase.apps !== undefined && 
                    firebase.auth !== undefined && 
                    firebase.firestore !== undefined) {
                    
                    console.log('✅ Firebase SDK 완전 로드됨');
                    console.log('Firebase 버전:', firebase.SDK_VERSION);
                    console.log('Firebase 앱 수:', firebase.apps.length);
                    
                    // Firebase 초기화 시도
                    try {
                        const initResult = initializeFirebase();
                        if (initResult) {
                            console.log('✅ Firebase 초기화 완료');
                            setupAdminDashboard();
                        } else {
                            console.error('❌ Firebase 초기화 실패');
                            showFirebaseError('Firebase 초기화에 실패했습니다. 서버 CSP 헤더를 확인해주세요.');
                        }
                    } catch (error) {
                        console.error('❌ Firebase 초기화 중 오류:', error);
                        showFirebaseError('Firebase 초기화 중 오류가 발생했습니다: ' + error.message);
                    }
                } else if (attempts < maxAttempts) {
                    console.log('⏳ Firebase SDK 로딩 대기 중...');
                    console.log('현재 상태:', {
                        firebase: typeof firebase,
                        apps: typeof firebase !== 'undefined' ? firebase.apps : 'undefined',
                        auth: typeof firebase !== 'undefined' ? typeof firebase.auth : 'undefined',
                        firestore: typeof firebase !== 'undefined' ? typeof firebase.firestore : 'undefined'
                    });
                    setTimeout(checkFirebase, 1000);
                } else {
                    console.error('❌ Firebase SDK 로딩 시간 초과');
                    console.error('🔒 CSP 관련 문제일 가능성이 높습니다.');
                    showFirebaseError('Firebase SDK 로딩 시간이 초과되었습니다.\n\n서버 CSP 정책에서 다음 도메인들이 허용되어야 합니다:\n- https://www.gstatic.com\n- https://www.gstatic.com/firebasejs\n\n브라우저 DevTools → Network → Response Headers에서 CSP를 확인하세요.');
                }
            };
            
            checkFirebase();
        }
        
        // Firebase 오류 표시 함수 (CSP 최적화 버전)
        function showFirebaseError(message) {
            const errorDiv = document.createElement('div');
            errorDiv.className = 'fixed top-4 right-4 bg-red-500 text-white p-4 rounded-lg shadow-lg z-50 max-w-md';
            errorDiv.innerHTML = `
                <div class="font-bold mb-2">🔥 Firebase 오류</div>
                <div class="text-sm mb-2">${message}</div>
                <div class="text-xs mb-3 p-2 bg-red-600 rounded">
                    <strong>CSP 해결 방법:</strong><br>
                    1. DevTools → Network → Response Headers 확인<br>
                    2. content-security-policy에 www.gstatic.com 포함 확인<br>
                    3. 서버 재시작 후 새로고침<br>
                    4. 브라우저 캐시 완전 삭제<br>
                    5. 서비스워커 등록 해제
                </div>
                <div class="flex gap-2 flex-wrap">
                    <button onclick="location.reload()" class="px-3 py-1 bg-white text-red-500 rounded text-xs font-bold hover:bg-gray-100">
                        🔄 새로고침
                    </button>
                    <button onclick="testFirebaseConnection()" class="px-3 py-1 bg-yellow-500 text-white rounded text-xs font-bold hover:bg-yellow-600">
                        🧪 연결 테스트
                    </button>
                    <button onclick="clearCacheAndReload()" class="px-3 py-1 bg-orange-500 text-white rounded text-xs font-bold hover:bg-orange-600">
                        🧹 캐시 정리
                    </button>
                    <button onclick="this.parentElement.parentElement.remove()" class="px-3 py-1 bg-gray-500 text-white rounded text-xs font-bold hover:bg-gray-600">
                        ✕ 닫기
                    </button>
                </div>
            `;
            document.body.appendChild(errorDiv);
            
            // 20초 후 자동 제거 (CSP 문제는 해결 시간이 더 필요)
            setTimeout(() => {
                if (errorDiv.parentElement) {
                    errorDiv.remove();
                }
            }, 20000);
        }
        
        // 관리자 대시보드 설정
        function setupAdminDashboard() {
            console.log('🔧 관리자 대시보드 설정 시작...');
            
            // Firebase 상태 재확인
            if (!window.auth || !window.firestore) {
                console.error('❌ Firebase 서비스가 초기화되지 않았습니다.');
                showFirebaseError('Firebase 서비스 초기화에 실패했습니다.');
                return;
            }
            
            console.log('✅ 관리자 대시보드 설정 완료');
        }
        
        // 관리자 로그인 함수
        window.adminLogin = async function() {
            console.log('🔐 관리자 로그인 시도...');
            
            const email = document.getElementById('admin-email').value;
            const password = document.getElementById('admin-password').value;
            
            if (!email || !password) {
                alert('이메일과 비밀번호를 입력해주세요.');
                return;
            }
            
            // Firebase 가드 확인
            if (typeof firebase === 'undefined') {
                alert('Firebase SDK가 로드되지 않았습니다. 서버 CSP 헤더를 확인해주세요.');
                return;
            }
            
            if (!window.auth) {
                console.error('❌ Firebase Auth가 초기화되지 않았습니다.');
                alert('Firebase Auth 초기화에 실패했습니다. 페이지를 새로고침해주세요.');
                return;
            }
            
            try {
                console.log('🔥 로그인 시도:', email);
                const userCredential = await window.auth.signInWithEmailAndPassword(email, password);
                console.log('✅ 관리자 로그인 성공:', userCredential.user.email);
                
                // 로그인 성공 시 대시보드 표시
                document.getElementById('login-section').classList.add('hidden');
                document.getElementById('dashboard-section').classList.remove('hidden');
                
                // 관리자 정보 표시
                if (document.getElementById('admin-info')) {
                    document.getElementById('admin-info').textContent = userCredential.user.email;
                }
                
                // 대시보드 데이터 로드
                loadDashboardData();
                
            } catch (error) {
                console.error('❌ 로그인 실패:', error);
                let errorMessage = '로그인에 실패했습니다.';
                
                switch (error.code) {
                    case 'auth/user-not-found':
                        errorMessage = '등록되지 않은 이메일입니다.';
                        break;
                    case 'auth/wrong-password':
                        errorMessage = '비밀번호가 올바르지 않습니다.';
                        break;
                    case 'auth/invalid-email':
                        errorMessage = '올바르지 않은 이메일 형식입니다.';
                        break;
                    case 'auth/too-many-requests':
                        errorMessage = '너무 많은 로그인 시도가 있었습니다. 잠시 후 다시 시도해주세요.';
                        break;
                    default:
                        errorMessage = error.message;
                }
                
                alert(errorMessage);
            }
        };
        
        // 테스트 관리자 계정 생성 함수
        window.createAdminAccount = async function() {
            try {
                console.log('🔧 테스트 관리자 계정 생성 시작...');
                
                if (!firebase.auth) { 
                    alert("Firebase Auth 초기화 실패"); 
                    throw new Error("Auth not initialized"); 
                }
                
                if (!window.auth) {
                    alert('Firebase가 초기화되지 않았습니다. 페이지를 새로고침해주세요.');
                    return;
                }
                
                const userCredential = await window.auth.createUserWithEmailAndPassword('admin@pricehunter.com', 'admin1234');
                console.log('✅ 테스트 관리자 계정 생성 완료:', userCredential.user.email);
                
                // Firestore에 관리자 정보 저장
                if (window.firestore) {
                    await window.firestore.collection('admins').doc(userCredential.user.uid).set({
                        email: 'admin@pricehunter.com',
                        role: 'admin',
                        createdAt: new Date(),
                        permissions: ['read', 'write', 'delete', 'admin']
                    });
                    console.log('✅ 관리자 정보 Firestore 저장 완료');
                }
                
                alert('✅ 테스트 관리자 계정이 생성되었습니다!\n\n이메일: admin@pricehunter.com\n비밀번호: admin1234\n\n이제 이 계정으로 로그인할 수 있습니다.');
                
                // 입력 필드에 자동 입력
                document.getElementById('admin-email').value = 'admin@pricehunter.com';
                document.getElementById('admin-password').value = 'admin1234';
                
            } catch (error) {
                console.error('❌ 테스트 계정 생성 실패:', error);
                
                if (error.code === 'auth/email-already-in-use') {
                    alert('이미 존재하는 계정입니다!\n\n이메일: admin@pricehunter.com\n비밀번호: admin1234\n\n이 계정으로 로그인해보세요.');
                    
                    // 입력 필드에 자동 입력
                    document.getElementById('admin-email').value = 'admin@pricehunter.com';
                    document.getElementById('admin-password').value = 'admin1234';
                } else {
                    alert('계정 생성 실패: ' + error.message);
                }
            }
        };
        
        // 대시보드 데이터 로드 함수
        function loadDashboardData() {
            console.log('📊 대시보드 데이터 로드 시작...');
            
            if (!firebase.firestore) { 
                alert("Firebase Firestore 초기화 실패"); 
                throw new Error("Firestore not initialized"); 
            }
            
            if (!window.firestore) {
                console.error('❌ Firestore가 초기화되지 않았습니다.');
                return;
            }
            
            // 여기에 대시보드 데이터 로드 로직 추가
            console.log('✅ 대시보드 데이터 로드 완료');
        }
        
        // Firebase 연결 테스트 함수
        window.testFirebaseConnection = function() {
            console.log('🔥 Firebase 연결 테스트 시작...');
            
            if (typeof firebase === 'undefined') {
                alert('❌ Firebase SDK가 로드되지 않았습니다.\n\n서버 CSP 헤더에 www.gstatic.com이 포함되어 있는지 확인하세요.');
                return false;
            }
            
            if (!firebase.auth) { 
                alert("Firebase Auth 초기화 실패"); 
                return false;
            }
            
            if (!firebase.firestore) { 
                alert("Firebase Firestore 초기화 실패"); 
                return false;
            }
            
            if (window.firebaseApp && window.firestore && window.auth) {
                alert('✅ Firebase 연결 성공!\n\n모든 서비스가 정상적으로 작동합니다.');
                return true;
            } else {
                alert('❌ Firebase 연결 실패!\n\n초기화를 다시 시도해주세요.');
                return false;
            }
        };
        
        // 캐시 및 서비스워커 정리 함수 (CSP 최적화)
        window.clearCacheAndReload = function() {
            console.log('🧹 캐시 및 서비스워커 정리 시작...');
            
            let cleanupPromises = [];
            
            // 서비스워커 등록 해제
            if ('serviceWorker' in navigator) {
                const swPromise = navigator.serviceWorker.getRegistrations().then(function(registrations) {
                    const unregisterPromises = registrations.map(registration => {
                        console.log('🗑️ 서비스워커 등록 해제:', registration.scope);
                        return registration.unregister();
                    });
                    return Promise.all(unregisterPromises);
                });
                cleanupPromises.push(swPromise);
            }
            
            // 캐시 스토리지 정리
            if ('caches' in window) {
                const cachePromise = caches.keys().then(function(cacheNames) {
                    return Promise.all(
                        cacheNames.map(function(cacheName) {
                            console.log('🗑️ 캐시 삭제:', cacheName);
                            return caches.delete(cacheName);
                        })
                    );
                });
                cleanupPromises.push(cachePromise);
            }
            
            // 로컬 스토리지 정리
            try {
                localStorage.clear();
                sessionStorage.clear();
                console.log('✅ 로컬/세션 스토리지가 정리되었습니다.');
            } catch (e) {
                console.log('⚠️ 스토리지 정리 중 오류:', e);
            }
            
            // 모든 정리 작업 완료 후 새로고침
            Promise.all(cleanupPromises).then(() => {
                console.log('✅ 모든 캐시 정리 완료');
                // 강제 새로고침 (캐시 무시)
                window.location.href = window.location.href + '?v=' + Date.now();
            }).catch(error => {
                console.error('❌ 캐시 정리 중 오류:', error);
                // 오류가 있어도 새로고침
                window.location.href = window.location.href + '?v=' + Date.now();
            });
        };
        
        // 페이지 이동 함수
        window.goToPage = function(page) {
            window.location.href = page;
        };
        
        // 사이드바 섹션 전환 함수
        function switchSection(sectionName) {
            console.log('🔄 섹션 전환:', sectionName);
            
            // 모든 섹션 숨기기
            document.querySelectorAll('.section-content').forEach(section => {
                section.classList.add('hidden');
            });
            
            // 모든 사이드바 아이템 비활성화
            document.querySelectorAll('.sidebar-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // 선택된 섹션 표시
            const targetSection = document.getElementById(sectionName + '-section');
            if (targetSection) {
                targetSection.classList.remove('hidden');
            }
            
            // 선택된 사이드바 아이템 활성화
            const activeItem = document.querySelector(`[data-section="${sectionName}"]`);
            if (activeItem) {
                activeItem.classList.add('active');
            }
        }
        
        // 전역 함수로 노출
        window.switchSection = switchSection;
        
        console.log('🚀 관리자 대시보드 스크립트 로드 완료');
    </script>
    
    <style>
        body { font-family: 'Inter', 'Noto Sans KR', sans-serif; }
        .sidebar-item.active { background-color: #ec4899; color: white; }
        .tab-btn.active { background-color: #ec4899; color: white; }
        .filter-btn.active { background-color: #6b7280; color: white; }
    </style>
</head>
<body class="bg-gradient-to-br from-gray-50 via-blue-50 to-emerald-50 min-h-screen">
    <!-- 로그인 섹션 -->
    <div id="login-section" class="min-h-screen flex items-center justify-center">
        <div class="bg-white rounded-xl shadow-2xl p-8 w-full max-w-md">
            <div class="text-center mb-8">
                <h1 class="text-3xl font-bold text-pink-600">PriceHunter</h1>
                <p class="text-gray-600">관리자 로그인</p>
            </div>
            
            <form onsubmit="event.preventDefault(); adminLogin();" class="space-y-6">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">이메일</label>
                    <input type="email" id="admin-email" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-400 focus:outline-none" placeholder="admin@pricehunter.com">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">비밀번호</label>
                    <input type="password" id="admin-password" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-400 focus:outline-none" placeholder="비밀번호">
                </div>
                
                <button type="submit" class="w-full bg-gradient-to-r from-pink-500 to-purple-500 text-white font-bold py-3 px-4 rounded-lg hover:from-pink-600 hover:to-purple-600 transition shadow-lg">
                    🔐 로그인
                </button>
            </form>
            
            <div class="mt-6 text-center space-y-3">
                <button onclick="goToPage('index.html')" class="text-pink-600 hover:text-pink-700 text-sm block w-full">
                    🏠 메인페이지로 돌아가기
                </button>
                <button onclick="createAdminAccount()" class="text-blue-600 hover:text-blue-700 text-sm block w-full">
                    🔧 테스트 관리자 계정 생성
                </button>
                <div class="text-xs text-gray-500 mt-2">
                    테스트용 계정: admin@pricehunter.com / admin1234
                </div>
            </div>
        </div>
    </div>

    <!-- 대시보드 섹션 -->
    <div id="dashboard-section" class="hidden">
        <div class="flex h-screen">
            <!-- 사이드바 -->
            <div class="w-64 bg-white shadow-lg">
                <div class="p-6 border-b">
                    <h1 class="text-xl font-bold text-pink-600">PriceHunter</h1>
                    <p class="text-sm text-gray-500">관리자 대시보드</p>
                    <p id="admin-info" class="text-xs text-gray-400 mt-1"></p>
                </div>
                
                <nav class="p-4">
                    <div class="space-y-2">
                        <button class="sidebar-item w-full text-left px-4 py-3 rounded-lg font-semibold hover:bg-pink-50 transition active" data-section="dashboard">
                            📊 대시보드
                        </button>
                        <button class="sidebar-item w-full text-left px-4 py-3 rounded-lg font-semibold hover:bg-pink-50 transition" data-section="requests">
                            📋 의뢰 관리
                        </button>
                        <button class="sidebar-item w-full text-left px-4 py-3 rounded-lg font-semibold hover:bg-pink-50 transition" data-section="inquiries">
                            💬 1:1 문의
                        </button>
                        <button class="sidebar-item w-full text-left px-4 py-3 rounded-lg font-semibold hover:bg-pink-50 transition" data-section="members">
                            👥 회원 관리
                        </button>
                    </div>
                </nav>
                
                <div class="absolute bottom-4 left-4 right-4">
                    <button onclick="adminLogout()" class="w-full px-4 py-2 bg-red-500 text-white rounded-lg font-semibold hover:bg-red-600 transition">
                        🔓 로그아웃
                    </button>
                </div>
            </div>

            <!-- 메인 콘텐츠 -->
            <div class="flex-1 overflow-auto">
                <!-- 대시보드 섹션 -->
                <div id="dashboard-section" class="section-content p-8">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-gray-800">📊 대시보드</h2>
                        <div class="flex gap-2">
                            <button onclick="goToPage('index.html')" class="px-4 py-2 bg-blue-500 text-white rounded-lg font-semibold hover:bg-blue-600 transition">
                                🏠 메인페이지로
                            </button>
                            <button onclick="goToPage('member-dashboard.html')" class="px-4 py-2 bg-green-500 text-white rounded-lg font-semibold hover:bg-green-600 transition">
                                👤 회원대시보드로
                            </button>
                            <button onclick="testFirebaseConnection()" class="px-4 py-2 bg-purple-500 text-white rounded-lg font-semibold hover:bg-purple-600 transition">
                                🔥 Firebase 연결 테스트
                            </button>
                            <button onclick="clearCacheAndReload()" class="px-4 py-2 bg-orange-500 text-white rounded-lg font-semibold hover:bg-orange-600 transition">
                                🧹 캐시 정리 & 새로고침
                            </button>
                        </div>
                    </div>
                    
                    <!-- 통계 카드 -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                        <div class="bg-white rounded-xl shadow-lg p-6">
                            <div class="flex items-center">
                                <div class="p-3 bg-blue-100 rounded-lg">
                                    <span class="text-2xl">📋</span>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm text-gray-500">총 의뢰</p>
                                    <p class="text-2xl font-bold text-gray-800" id="total-requests">0</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-white rounded-xl shadow-lg p-6">
                            <div class="flex items-center">
                                <div class="p-3 bg-green-100 rounded-lg">
                                    <span class="text-2xl">✅</span>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm text-gray-500">완료된 의뢰</p>
                                    <p class="text-2xl font-bold text-gray-800" id="completed-requests">0</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-white rounded-xl shadow-lg p-6">
                            <div class="flex items-center">
                                <div class="p-3 bg-orange-100 rounded-lg">
                                    <span class="text-2xl">👥</span>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm text-gray-500">총 회원</p>
                                    <p class="text-2xl font-bold text-gray-800" id="total-members">0</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-white rounded-xl shadow-lg p-6">
                            <div class="flex items-center">
                                <div class="p-3 bg-purple-100 rounded-lg">
                                    <span class="text-2xl">💬</span>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm text-gray-500">미답변 문의</p>
                                    <p class="text-2xl font-bold text-gray-800" id="pending-inquiries">0</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 최근 활동 -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div class="bg-white rounded-xl shadow-lg p-6">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4">최근 의뢰</h3>
                            <div id="recent-requests" class="space-y-3">
                                <!-- 동적으로 생성됨 -->
                            </div>
                        </div>
                        
                        <div class="bg-white rounded-xl shadow-lg p-6">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4">최근 문의</h3>
                            <div id="recent-inquiries" class="space-y-3">
                                <!-- 동적으로 생성됨 -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 의뢰 관리 섹션 -->
                <div id="requests-section" class="section-content p-8 hidden">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-gray-800">📋 의뢰 관리</h2>
                        <div class="flex gap-2">
                            <button onclick="goToPage('index.html')" class="px-4 py-2 bg-blue-500 text-white rounded-lg font-semibold hover:bg-blue-600 transition">
                                🏠 메인페이지로
                            </button>
                            <button onclick="goToPage('request.html')" class="px-4 py-2 bg-green-500 text-white rounded-lg font-semibold hover:bg-green-600 transition">
                                📝 의뢰페이지로
                            </button>
                        </div>
                    </div>
                    
                    <!-- 의뢰 목록 -->
                    <div class="bg-white rounded-xl shadow-lg overflow-hidden">
                        <div class="font-bold text-gray-700 p-4 border-b">접수된 의뢰 목록</div>
                        <div class="grid grid-cols-8 gap-2 px-4 py-2 bg-pink-100 text-sm font-bold text-pink-700">
                            <div class="col-span-1">선택</div>
                            <div class="col-span-2">의뢰번호/회원명</div>
                            <div class="col-span-1 text-center">의뢰일시</div>
                            <div class="col-span-1 text-center">진행상황</div>
                            <div class="col-span-1 text-center">구매방식</div>
                            <div class="col-span-1 text-center">구매상태</div>
                            <div class="col-span-1 text-center">알림상태</div>
                        </div>
                        <ul id="request-list" class="bg-pink-50 divide-y divide-pink-100">
                            <!-- 동적으로 생성됨 -->
                        </ul>
                    </div>
                    
                    <!-- 의뢰 상세 및 결과 입력 -->
                    <div id="detail-section" class="w-full hidden mt-6">
                        <div class="bg-white rounded-xl shadow-lg p-6 mb-4">
                            <div class="mb-2 text-gray-700 font-bold">의뢰 상세</div>
                            <div class="grid grid-cols-2 gap-4 text-sm">
                                <div><span class="font-semibold">의뢰번호:</span> <span id="detail-num"></span></div>
                                <div><span class="font-semibold">제품명:</span> <span id="detail-name"></span></div>
                                <div><span class="font-semibold">제품설명:</span> <span id="detail-desc"></span></div>
                                <div><span class="font-semibold">참고사이트:</span> <span id="detail-url"></span></div>
                                <div><span class="font-semibold">가격:</span> <span id="detail-price"></span></div>
                                <div><span class="font-semibold">이름:</span> <span id="detail-username"></span></div>
                                <div><span class="font-semibold">이메일:</span> <span id="detail-email"></span></div>
                                <div><span class="font-semibold">휴대폰:</span> <span id="detail-phone"></span></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 1:1 문의 섹션 -->
                <div id="inquiries-section" class="section-content p-8 hidden">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-gray-800">💬 1:1 문의 관리</h2>
                        <div class="flex gap-2">
                            <button onclick="goToPage('index.html')" class="px-4 py-2 bg-blue-500 text-white rounded-lg font-semibold hover:bg-blue-600 transition">
                                🏠 메인페이지로
                            </button>
                            <button onclick="goToPage('support.html')" class="px-4 py-2 bg-green-500 text-white rounded-lg font-semibold hover:bg-green-600 transition">
                                💬 문의페이지로
                            </button>
                        </div>
                    </div>
                    
                    <!-- 문의 목록 -->
                    <div class="bg-white rounded-xl shadow-lg overflow-hidden">
                        <div class="overflow-x-auto">
                            <table class="w-full">
                                <thead class="bg-blue-50">
                                    <tr>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-blue-700 uppercase tracking-wider">문의번호</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-blue-700 uppercase tracking-wider">회원명</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-blue-700 uppercase tracking-wider">제목</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-blue-700 uppercase tracking-wider">상태</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-blue-700 uppercase tracking-wider">등록일시</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-blue-700 uppercase tracking-wider">작업</th>
                                    </tr>
                                </thead>
                                <tbody id="inquiries-table-body" class="bg-white divide-y divide-gray-200">
                                    <!-- 동적으로 생성됨 -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <!-- 문의 상세 및 답변 -->
                    <div id="inquiry-detail-section" class="w-full hidden mt-6">
                        <div class="bg-white rounded-xl shadow-lg p-6 mb-4">
                            <div class="mb-4">
                                <h3 class="text-lg font-bold text-gray-800 mb-2">문의 상세</h3>
                                <div class="grid grid-cols-2 gap-4 text-sm">
                                    <div><span class="font-semibold">문의번호:</span> <span id="inquiry-id"></span></div>
                                    <div><span class="font-semibold">제목:</span> <span id="inquiry-title"></span></div>
                                    <div><span class="font-semibold">회원명:</span> <span id="inquiry-username"></span></div>
                                    <div><span class="font-semibold">이메일:</span> <span id="inquiry-email"></span></div>
                                    <div><span class="font-semibold">전화번호:</span> <span id="inquiry-phone"></span></div>
                                    <div><span class="font-semibold">문의일시:</span> <span id="inquiry-date"></span></div>
                                </div>
                            </div>
                            
                            <div class="mb-4">
                                <h4 class="font-semibold text-gray-700 mb-2">문의 내용</h4>
                                <div id="inquiry-content" class="bg-gray-50 p-4 rounded-lg text-gray-700"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 회원 관리 섹션 -->
                <div id="members-section" class="section-content p-8 hidden">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-gray-800">👥 회원 관리</h2>
                        <div class="flex gap-2">
                            <button onclick="goToPage('index.html')" class="px-4 py-2 bg-blue-500 text-white rounded-lg font-semibold hover:bg-blue-600 transition">
                                🏠 메인페이지로
                            </button>
                            <button onclick="goToPage('member-dashboard.html')" class="px-4 py-2 bg-green-500 text-white rounded-lg font-semibold hover:bg-green-600 transition">
                                👤 회원대시보드로
                            </button>
                        </div>
                    </div>
                    
                    <!-- 회원 목록 -->
                    <div class="bg-white rounded-xl shadow-lg overflow-hidden">
                        <div class="overflow-x-auto">
                            <table class="w-full">
                                <thead class="bg-green-50">
                                    <tr>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-green-700 uppercase tracking-wider">프로필</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-green-700 uppercase tracking-wider">회원명</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-green-700 uppercase tracking-wider">로그인 방식</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-green-700 uppercase tracking-wider">이메일</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-green-700 uppercase tracking-wider">휴대폰</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-green-700 uppercase tracking-wider">가입일</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-green-700 uppercase tracking-wider">의뢰수</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-green-700 uppercase tracking-wider">작업</th>
                                    </tr>
                                </thead>
                                <tbody id="members-table-body" class="bg-white divide-y divide-gray-200">
                                    <!-- 동적으로 생성됨 -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 사이드바 클릭 이벤트
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('.sidebar-item').forEach(item => {
                item.addEventListener('click', function() {
                    const section = this.getAttribute('data-section');
                    switchSection(section);
                });
            });
        });
    </script>
</body>
</html>
