import{o as e,s as t,a as n,d as o,b as s,c as a,e as c,g as l}from"./firebase.D0v-ztDH.js";let r=null;function d(e){console.log("ğŸ”„ ì¸ì¦ ìƒíƒœ ë³€ê²½:",e?e.email:"ë¡œê·¸ì•„ì›ƒ"),e?(r=e,function(e){const t=document.getElementById("loginSection"),n=document.getElementById("userSection"),o=document.getElementById("requestSection"),s=document.getElementById("inquirySection");t&&(t.style.display="none");n&&(n.style.display="block");o&&(o.style.display="block");s&&(s.style.display="block");const a=document.getElementById("userInfo");a&&(a.innerHTML=`\n      <div class="text-center">\n        <h3 class="text-lg font-semibold text-gray-800">í™˜ì˜í•©ë‹ˆë‹¤!</h3>\n        <p class="text-gray-600">${e.email}</p>\n        <p class="text-sm text-gray-500">${e.displayName||"ì‚¬ìš©ì"}</p>\n      </div>\n    `)}(e),async function(e,t={}){try{console.log("ğŸ“ íšŒì› ì •ë³´ Firestore ì €ì¥ ì‹œì‘:",e.uid);const n={email:e.email,name:t.name||e.displayName||e.email.split("@")[0],provider:t.provider||"email",role:"viewer",status:"active",profileImage:e.photoURL||null,createdAt:c(),updatedAt:c()};console.log("ğŸ“ ì €ì¥í•  íšŒì› ë°ì´í„°:",n),await a(o(s,"members",e.uid),n,{merge:!0}),console.log("âœ… íšŒì› ì •ë³´ Firestore ì €ì¥ ì™„ë£Œ:",e.uid);const r=await l(o(s,"members",e.uid));r.exists()?console.log("âœ… ì €ì¥ í™•ì¸ë¨:",r.data()):console.error("âŒ ì €ì¥ í™•ì¸ ì‹¤íŒ¨: ë¬¸ì„œê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŒ")}catch(n){console.error("âŒ íšŒì› ì •ë³´ Firestore ì €ì¥ ì‹¤íŒ¨:",n),y("íšŒì› ì •ë³´ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: "+n.message)}}(e)):(r=null,function(){const e=document.getElementById("loginSection"),t=document.getElementById("userSection"),n=document.getElementById("requestSection"),o=document.getElementById("inquirySection");e&&(e.style.display="block");t&&(t.style.display="none");n&&(n.style.display="none");o&&(o.style.display="none")}())}async function i(){try{await t(n),console.log("âœ… ë¡œê·¸ì•„ì›ƒ ì™„ë£Œ")}catch(e){console.error("âŒ ë¡œê·¸ì•„ì›ƒ ì‹¤íŒ¨:",e)}}async function m(e){if(e.preventDefault(),!r)return void y("ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");const t=new FormData(e.target),n={productName:t.get("productName"),productUrl:t.get("productUrl"),description:t.get("description"),budget:t.get("budget"),createdBy:r.uid,createdByEmail:r.email,status:"pending",createdAt:c(),updatedAt:c()};try{console.log("ğŸ”„ ì˜ë¢° ì œì¶œ ì‹œì‘...");const t=o(s,"requests",Date.now().toString());await a(t,n),console.log("âœ… ì˜ë¢° ì œì¶œ ì™„ë£Œ:",t.id),g("ì˜ë¢°ê°€ ì„±ê³µì ìœ¼ë¡œ ì œì¶œë˜ì—ˆìŠµë‹ˆë‹¤!"),e.target.reset()}catch(l){console.error("âŒ ì˜ë¢° ì œì¶œ ì‹¤íŒ¨:",l),y("ì˜ë¢° ì œì¶œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: "+l.message)}}async function u(e){if(e.preventDefault(),!r)return void y("ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");const t=new FormData(e.target),n={subject:t.get("subject"),message:t.get("message"),category:t.get("category"),createdBy:r.uid,createdByEmail:r.email,status:"pending",createdAt:c(),updatedAt:c()};try{console.log("ğŸ”„ ë¬¸ì˜ ì œì¶œ ì‹œì‘...");const t=o(s,"inquiries",Date.now().toString());await a(t,n),console.log("âœ… ë¬¸ì˜ ì œì¶œ ì™„ë£Œ:",t.id),g("ë¬¸ì˜ê°€ ì„±ê³µì ìœ¼ë¡œ ì œì¶œë˜ì—ˆìŠµë‹ˆë‹¤!"),e.target.reset()}catch(l){console.error("âŒ ë¬¸ì˜ ì œì¶œ ì‹¤íŒ¨:",l),y("ë¬¸ì˜ ì œì¶œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: "+l.message)}}function g(e){const t=document.getElementById("message");t&&(t.className="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4",t.textContent=e,t.style.display="block",setTimeout(()=>{t.style.display="none"},3e3))}function y(e){const t=document.getElementById("message");t&&(t.className="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",t.textContent=e,t.style.display="block",setTimeout(()=>{t.style.display="none"},5e3))}document.addEventListener("DOMContentLoaded",function(){console.log("ğŸš€ ë©”ì¸ ì•± ì´ˆê¸°í™” ì‹œì‘..."),function(){const e=document.getElementById("logoutBtn");e&&e.addEventListener("click",i);const t=document.getElementById("requestForm");t&&t.addEventListener("submit",m);const n=document.getElementById("inquiryForm");n&&n.addEventListener("submit",u)}(),e(n,d)});
