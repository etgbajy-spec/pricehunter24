import{o as e,a as o,k as t,f as n,s,e as a,c,d as l,b as i,g as r,l as d}from"./firebase.D0v-ztDH.js";function m(e){console.log("ğŸ”„ ì¸ì¦ ìƒíƒœ ë³€ê²½:",e?e.email:"ë¡œê·¸ì•„ì›ƒ"),e?(!function(e){const o=document.getElementById("signupSection"),t=document.getElementById("loginSection"),n=document.getElementById("dashboardSection"),s=document.getElementById("userInfo");o&&(o.style.display="none");t&&(t.style.display="none");n&&(n.style.display="block");s&&(s.innerHTML=`\n      <div class="text-center">\n        <h3 class="text-lg font-semibold text-gray-800">í™˜ì˜í•©ë‹ˆë‹¤!</h3>\n        <p class="text-gray-600">${e.email}</p>\n        <p class="text-sm text-gray-500">${e.displayName||"ì‚¬ìš©ì"}</p>\n      </div>\n    `)}(e),p(e)):function(){const e=document.getElementById("signupSection"),o=document.getElementById("loginSection"),t=document.getElementById("dashboardSection");e&&(e.style.display="block");o&&(o.style.display="block");t&&(t.style.display="none")}()}async function u(e){e.preventDefault();const n=document.getElementById("signupEmail").value,s=document.getElementById("signupPassword").value,a=document.getElementById("signupName").value;try{console.log("ğŸ”„ ì´ë©”ì¼ íšŒì›ê°€ì… ì‹œë„:",n);const e=(await t(o,n,s)).user;console.log("âœ… ì´ë©”ì¼ íšŒì›ê°€ì… ì„±ê³µ:",e.uid),await p(e,{name:a,provider:"email"}),b("íšŒì›ê°€ì…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!")}catch(c){console.error("âŒ ì´ë©”ì¼ íšŒì›ê°€ì… ì‹¤íŒ¨:",c),k("íšŒì›ê°€ì…ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: "+c.message)}}async function g(e){e.preventDefault();const t=document.getElementById("loginEmail").value,s=document.getElementById("loginPassword").value;try{console.log("ğŸ”„ ì´ë©”ì¼ ë¡œê·¸ì¸ ì‹œë„:",t);const e=(await n(o,t,s)).user;console.log("âœ… ì´ë©”ì¼ ë¡œê·¸ì¸ ì„±ê³µ:",e.uid),await p(e)}catch(a){console.error("âŒ ì´ë©”ì¼ ë¡œê·¸ì¸ ì‹¤íŒ¨:",a),k("ë¡œê·¸ì¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: "+a.message)}}async function y(){try{await s(o),console.log("âœ… ë¡œê·¸ì•„ì›ƒ ì™„ë£Œ")}catch(e){console.error("âŒ ë¡œê·¸ì•„ì›ƒ ì‹¤íŒ¨:",e)}}async function p(e,o={}){try{console.log("ğŸ“ íšŒì› ì •ë³´ Firestore ì €ì¥ ì‹œì‘:",e.uid);const t={email:e.email,name:o.name||e.displayName||e.email.split("@")[0],provider:o.provider||"email",role:"viewer",status:"active",profileImage:e.photoURL||null,createdAt:a(),updatedAt:a()};console.log("ğŸ“ ì €ì¥í•  íšŒì› ë°ì´í„°:",t),await c(l(i,"members",e.uid),t,{merge:!0}),console.log("âœ… íšŒì› ì •ë³´ Firestore ì €ì¥ ì™„ë£Œ:",e.uid);const n=await r(l(i,"members",e.uid));n.exists()?console.log("âœ… ì €ì¥ í™•ì¸ë¨:",n.data()):console.error("âŒ ì €ì¥ í™•ì¸ ì‹¤íŒ¨: ë¬¸ì„œê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŒ")}catch(t){console.error("âŒ íšŒì› ì •ë³´ Firestore ì €ì¥ ì‹¤íŒ¨:",t),k("íšŒì› ì •ë³´ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: "+t.message)}}function f(){if("undefined"==typeof Kakao)return console.log("â³ Kakao SDK ë¡œë”© ëŒ€ê¸°..."),void setTimeout(f,1e3);try{Kakao.init("6917a034b74fafd0ac80ab855af5ed6d"),console.log("âœ… Kakao SDK ì´ˆê¸°í™” ì™„ë£Œ");const e=document.getElementById("kakaoLoginBtn");e&&e.addEventListener("click",E)}catch(e){console.error("âŒ Kakao SDK ì´ˆê¸°í™” ì‹¤íŒ¨:",e)}}function E(){try{console.log("ğŸ”„ ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ ì‹œì‘..."),Kakao.Auth.login({success:function(e){console.log("âœ… ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ ì„±ê³µ:",e),async function(e){try{console.log("ğŸ”„ ì¹´ì¹´ì˜¤ í† í° êµí™˜ ì‹œì‘...");const t=await fetch("/.netlify/functions/kakao-exchange",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({accessToken:e})});if(!t.ok)throw new Error(`HTTP ${t.status}: ${t.statusText}`);const n=await t.json();if(!n.success)throw new Error(n.error||"í† í° êµí™˜ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");console.log("âœ… ì¹´ì¹´ì˜¤ í† í° êµí™˜ ì„±ê³µ"),console.log("ğŸ“ êµí™˜ëœ ì‚¬ìš©ì ì •ë³´:",n.user),await d(o,n.customToken),b("ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!")}catch(t){console.error("âŒ ì¹´ì¹´ì˜¤ í† í° êµí™˜ ì‹¤íŒ¨:",t),k("ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: "+t.message)}}(e.access_token)},fail:function(e){console.error("âŒ ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ ì‹¤íŒ¨:",e),k("ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: "+e.error_description)}})}catch(e){console.error("âŒ ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ ì˜¤ë¥˜:",e),k("ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")}}function b(e){const o=document.getElementById("message");o&&(o.className="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4",o.textContent=e,o.style.display="block")}function k(e){const o=document.getElementById("message");o&&(o.className="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",o.textContent=e,o.style.display="block")}document.addEventListener("DOMContentLoaded",function(){console.log("ğŸš€ íšŒì›ê°€ì… í˜ì´ì§€ ì´ˆê¸°í™” ì‹œì‘..."),function(){const e=document.getElementById("emailSignupForm");e&&e.addEventListener("submit",u);const o=document.getElementById("emailLoginForm");o&&o.addEventListener("submit",g);const t=document.getElementById("logoutBtn");t&&t.addEventListener("click",y)}(),e(o,m),f()});
