<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    
    <!-- Chrome 중간 웹사이트 상태 삭제 문제 해결 -->
    <meta name="referrer" content="no-referrer-when-downgrade" />
    <meta name="robots" content="noindex, nofollow" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    
    <!-- Content Security Policy - 임시로 완전 제거하여 Firebase 연결 문제 해결 -->
    <!-- <meta http-equiv="Content-Security-Policy" content="..." /> -->
    
    <title>PriceHunter</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='.9em' font-size='90'%3E🔍%3C/text%3E%3C/svg%3E">
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- 모바일 여백 제거 CSS -->
    <link rel="stylesheet" href="mobile-fix.css">
    <script>
      // Tailwind CSS 설정 - CSP 오류 방지
      if (typeof tailwind !== 'undefined') {
        tailwind.config = {
          theme: {
            extend: {}
          },
          corePlugins: {
            preflight: false
          }
        }
      }
    </script>
    
    <!-- Firebase v9 SDK (즉시 로딩) -->
    <script type="module">
      // Firebase v9 모듈 import (즉시 로딩)
      import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js';
      import { getAuth, signInWithCustomToken, onAuthStateChanged, signOut } from 'https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js';
      import { getFirestore, doc, setDoc, getDoc, collection, query, orderBy, onSnapshot, getDocs, where, limit, serverTimestamp, enableNetwork, disableNetwork } from 'https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js';
      
      // Firebase 설정
      const firebaseConfig = {
        apiKey: "AIzaSyDBZxKyMS7eeBTbPnbZkj0WWOZQHNldoL4",
        authDomain: "pricehunter-99a1b.firebaseapp.com",
        projectId: "pricehunter-99a1b",
        storageBucket: "pricehunter-99a1b.firebasestorage.app",
        messagingSenderId: "242265693919",
        appId: "1:242265693919:web:74234d942b82a51541136a",
        measurementId: "G-4BKLV4EVB9"
      };

      // Firebase 즉시 초기화 (성능 최적화)
      console.log('🚀 Firebase 즉시 초기화 시작...');
      
      const app = initializeApp(firebaseConfig);
      const auth = getAuth(app);
      const db = getFirestore(app);

      // 네트워크 최적화 설정
      console.log('⚡ Firebase 네트워크 최적화 적용');
      
      // 전역으로 즉시 노출
      window.firebaseApp = app;
      window.firebaseAuth = auth;
      window.firebaseDb = db;
      window.firebaseAuthFunctions = { signInWithCustomToken, onAuthStateChanged, signOut };
      window.firebaseFirestoreFunctions = { doc, setDoc, getDoc, collection, query, orderBy, onSnapshot, getDocs, where, limit, serverTimestamp, enableNetwork, disableNetwork };
      
      // Firebase 준비 상태 즉시 설정
      window.isFirebaseReady = true;
      
      console.log('✅ Firebase 즉시 초기화 완료 - 모든 함수 사용 가능');
      
      // Firebase 연결 상태 진단
      setTimeout(async () => {
        try {
          console.log('🔍 Firebase 연결 상태 진단 시작...');
          
          // 1. 기본 연결 테스트
          console.log('📡 1. 기본 연결 테스트...');
          const testRef = doc(db, 'test', 'connection');
          const testDoc = await getDoc(testRef);
          console.log('✅ 기본 연결 테스트 성공:', testDoc.exists());
          
          // 2. users 컬렉션 접근 테스트
          console.log('📡 2. users 컬렉션 접근 테스트...');
          const usersRef = collection(db, 'users');
          const usersSnapshot = await getDocs(usersRef);
          console.log('✅ users 컬렉션 접근 성공, 문서 수:', usersSnapshot.size);
          
          // 3. 네트워크 상태 확인
          console.log('📡 3. 네트워크 상태 확인...');
          console.log('🌐 온라인 상태:', navigator.onLine);
          console.log('🔗 연결 타입:', navigator.connection?.effectiveType || 'unknown');
          
          // 4. Firebase 앱 정보
          console.log('📡 4. Firebase 앱 정보...');
          console.log('🔥 앱 이름:', app.name);
          console.log('🔥 프로젝트 ID:', app.options.projectId);
          console.log('🔥 Auth 도메인:', app.options.authDomain);
          
        } catch (error) {
          console.error('❌ Firebase 연결 진단 실패:', error);
          console.error('❌ 오류 코드:', error.code);
          console.error('❌ 오류 메시지:', error.message);
          console.error('❌ 오류 스택:', error.stack);
        }
      }, 1000);
    </script>

  </head>
  <body class="bg-gradient-to-br from-gray-900 via-gray-800 to-gray-700 min-h-screen">
    <!-- 절감왕 알림 배지 -->
    <div id="savings-badge" class="fixed top-4 right-4 z-50">
      <div class="bg-gradient-to-r from-emerald-500 to-blue-500 text-white rounded-full shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105">
        <div class="flex items-center gap-2 px-4 py-2 font-semibold text-xs">
          <span class="text-lg">🏆</span>
          <div class="text-left">
            <div class="font-bold text-xs">이번 주<br class="sm:hidden">절감왕</div>
            <div class="text-yellow-300 text-xs">-42%<br class="sm:hidden">절약 성공!</div>
          </div>
          <a href="#savings-hero" class="text-yellow-300 text-sm hover:text-yellow-200 transition-colors" onclick="document.getElementById('savings-hero').scrollIntoView({behavior: 'smooth'}); return false;">→</a>
          <button onclick="hideSavingsBadge()" class="text-white/70 hover:text-white text-sm ml-1 transition-colors">×</button>
        </div>
      </div>
    </div>
    <section class="relative w-full min-h-[70vh] flex flex-col items-center justify-center text-center px-4 py-20 bg-gradient-to-br from-gray-900 to-gray-700 overflow-hidden">
      <!-- 배경 그래픽/블러 효과 -->
      <div class="absolute inset-0 pointer-events-none z-0">
        <div class="absolute -top-32 -left-32 w-96 h-96 bg-yellow-400 opacity-20 rounded-full blur-3xl"></div>
        <div class="absolute bottom-0 right-0 w-80 h-80 bg-pink-400 opacity-20 rounded-full blur-2xl"></div>
      </div>
      <!-- Hero 콘텐츠 -->
      <div class="relative z-10 max-w-7xl mx-auto flex flex-col items-center justify-center animate-fadein-up w-full text-center">
        <!-- 아이콘/일러스트 -->
        <div class="mb-10 animate-bounce-slow w-full flex justify-center items-center gap-4 mt-16 sm:mt-20 md:mt-24">
          <span class="text-3xl md:text-5xl font-extrabold text-blue-400 drop-shadow-lg">PriceHunter</span>
          <svg class="w-24 h-24 md:w-40 md:h-40 text-yellow-300 drop-shadow-xl" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 48 48" aria-hidden="true">
            <circle cx="22" cy="22" r="12" stroke="currentColor" />
            <line x1="34" y1="34" x2="44" y2="44" stroke="currentColor" stroke-linecap="round"/>
          </svg>
        </div>

        <!-- 메인 타이틀 -->
        <div class="text-center mb-8">
          <h1 class="text-4xl sm:text-5xl md:text-6xl lg:text-7xl font-extrabold text-gray-800 mb-4 leading-tight">
            <span class="bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent">
              최저가 검증의<br class="sm:hidden">
              <span class="text-3xl sm:text-4xl md:text-5xl lg:text-6xl">새로운<br class="sm:hidden">기준</span>
            </span>
          </h1>
          <p class="text-lg sm:text-xl md:text-2xl text-gray-600 mb-6 max-w-3xl mx-auto leading-relaxed">
            <span id="admin-secret-trigger" class="cursor-default" style="cursor: default !important;">더 이상 가격 비교로 고민하지 마세요.</span><br class="hidden sm:block">
            <span class="font-semibold text-blue-600">PriceHunter</span>가 진짜 최저가를 찾아드립니다.
          </p>
        </div>
        <div class="hero-parent-container flex flex-col items-center justify-center w-full max-w-5xl mx-auto px-4" style="margin-left: auto; margin-right: auto; display: flex; justify-content: center; align-items: center;">
          <div id="hero-buttons-container" class="flex flex-col items-center justify-center w-full gap-4 sm:max-w-none mx-auto">
            <button id="request-v2-btn"
              class="inline-block px-6 sm:px-8 md:px-12 lg:px-20 py-4 sm:py-5 md:py-6 lg:py-8 bg-pink-500 text-white text-lg sm:text-xl md:text-2xl lg:text-4xl font-extrabold rounded-full shadow-2xl hover:bg-pink-600 hover:scale-105 transition-all duration-300 focus:outline-none focus:ring-4 focus:ring-pink-300 animate-fadein-up text-center mb-2 w-full sm:w-auto"
              style="box-shadow:0 8px 32px 0 rgba(0,0,0,0.18);"
                      aria-label="최저가 검증 시작하기">
              🚀 최저가 요청하기
            </button>
            <a href="support.html"
              class="inline-block px-4 sm:px-6 md:px-8 lg:px-12 py-3 sm:py-4 md:py-4 lg:py-6 bg-yellow-200 text-pink-700 text-sm sm:text-base md:text-lg lg:text-2xl font-bold rounded-full shadow-xl hover:bg-yellow-300 hover:scale-105 transition-all duration-300 focus:outline-none focus:ring-4 focus:ring-yellow-300 animate-fadein-up text-center border-2 border-pink-300 w-full sm:w-auto"
              aria-label="구매 전 필독사항 읽기">
              📢 구매 전 <span class="underline">필독사항</span> 읽기
            </a>
            <a href="notice.html"
              class="inline-block px-4 sm:px-6 md:px-8 lg:px-12 py-3 sm:py-4 md:py-4 lg:py-6 bg-blue-100 text-blue-800 text-sm sm:text-base md:text-lg lg:text-2xl font-bold rounded-full shadow-xl hover:bg-blue-200 hover:scale-105 transition-all duration-300 focus:outline-none focus:ring-4 focus:ring-blue-300 animate-fadein-up text-center border-2 border-blue-300 mt-2 w-full sm:w-auto"
              aria-label="가격 안내 및 유의사항 전체보기">
              📝 가격 안내 및 유의사항 전체보기
            </a>
            <div class="text-pink-200 text-xs sm:text-sm md:text-base lg:text-xl mt-2 animate-fadein-up text-center px-4">구매 전 <span class="underline">필독사항</span>을 꼭 확인해 주세요!</div>
          </div>
          <div class="mt-8 md:mt-12 animate-fadein-up-slow w-full flex justify-center">
            <span class="text-gray-300 text-base md:text-2xl flex items-center gap-2">
              <svg class="w-6 h-6 md:w-8 md:h-8 animate-bounce" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M12 5v14M19 12l-7 7-7-7"/></svg>
              스크롤해서 더 알아보기
            </span>
          </div>
        </div>
      </div>
      <style>
        @keyframes fadein-up { 0% { opacity: 0; transform: translateY(40px);} 100% { opacity: 1; transform: translateY(0);} }
        .animate-fadein-up { animation: fadein-up 1.2s cubic-bezier(.4,0,.2,1) both; }
        @keyframes fadein-up-slow { 0% { opacity: 0; transform: translateY(60px);} 100% { opacity: 1; transform: translateY(0);} }
        .animate-fadein-up-slow { animation: fadein-up-slow 2.2s cubic-bezier(.4,0,.2,1) both; }
        @keyframes bounce-slow { 0%, 100% { transform: translateY(0);} 50% { transform: translateY(-18px);} }
        .animate-bounce-slow { animation: bounce-slow 2.2s infinite; }
        
        @keyframes fade-in-up {
          from {
            opacity: 0;
            transform: translateY(20px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
        .animate-fade-in-up {
          animation: fade-in-up 0.6s ease-out forwards;
        }
        
        .process-step.visible {
          opacity: 1 !important;
          transform: translateY(0) !important;
          transition: all 0.8s ease-out;
        }
        
        /* 모바일 레이아웃 중앙 정렬 */
        html, body {
          overflow-x: hidden;
          max-width: 100vw;
          margin: 0;
          padding: 0;
        }
        
        body {
          -webkit-user-select: text;
          -moz-user-select: text;
          -ms-user-select: text;
          user-select: text;
        }
        
        /* 모든 섹션의 최대 너비 제한 */
        section {
          max-width: 100vw;
          overflow-x: hidden;
        }
        
        /* 컨테이너 중앙 정렬 강화 */
        .container, .max-w-4xl, .max-w-5xl, .max-w-6xl, .max-w-7xl {
          margin-left: auto;
          margin-right: auto;
          padding-left: 1rem;
          padding-right: 1rem;
        }
        
        /* 모바일에서 패딩 조정 */
        @media (max-width: 640px) {
          .px-4 {
            padding-left: 1rem;
            padding-right: 1rem;
          }
          
          .mx-auto {
            margin-left: auto;
            margin-right: auto;
          }
          
          /* 모바일에서 고정 요소들 중앙 정렬 */
          .fixed {
            max-width: calc(100vw - 2rem);
          }
          
          /* 버튼과 입력 요소들 너비 제한 */
          button, input, textarea {
            max-width: 100%;
            box-sizing: border-box;
          }
          
          /* 그리드와 플렉스 컨테이너 */
          .grid, .flex {
            max-width: 100%;
            overflow-x: hidden;
          }
          
          /* 히어로 섹션 모바일 중앙 정렬 강화 */
          #hero-buttons-container {
            display: flex !important;
            flex-direction: column !important;
            align-items: center !important;
            justify-content: center !important;
            width: auto !important;
            max-width: 320px !important;
            margin: 0 auto !important;
            padding: 0 !important;
            text-align: center !important;
            box-sizing: border-box !important;
            position: relative !important;
            left: 0 !important;
            right: 0 !important;
          }
          
          /* 부모 컨테이너 중앙 정렬 강화 */
          .hero-parent-container {
            display: flex !important;
            justify-content: center !important;
            align-items: center !important;
            width: 100% !important;
            margin: 0 auto !important;
            padding: 0 1rem !important;
            box-sizing: border-box !important;
          }
          
          #hero-buttons-container button,
          #hero-buttons-container a {
            display: block !important;
            margin: 0 auto !important;
            width: 100% !important;
            max-width: 100% !important;
            text-align: center !important;
            box-sizing: border-box !important;
            padding-left: 1rem !important;
            padding-right: 1rem !important;
          }
        }
        
        /* Tailwind CDN 경고 숨기기 */
        .tailwind-warning {
          display: none !important;
        }
        
        /* 콘솔 오류 방지를 위한 스타일 */
        body {
          font-family: system-ui, -apple-system, sans-serif;
        }
        
        /* 모든 요소에서 텍스트 선택 허용 */
        button, a, input, textarea, div, p, span, h1, h2, h3, h4, h5, h6 {
          -webkit-user-select: text;
          -moz-user-select: text;
          -ms-user-select: text;
          user-select: text;
        }
        
        /* 관리자 진입 트리거 스타일 */
        #admin-hero-trigger {
          -webkit-user-select: text;
          -moz-user-select: text;
          -ms-user-select: text;
          user-select: text;
          transition: all 0.2s ease;
        }
        
        #admin-hero-trigger:hover {
          transform: scale(1.2);
        }
        
      </style>
    </section>
      <!-- 고객의 진짜 고민, 우리가 해결합니다 섹션 -->
      <section class="w-full py-20 px-4 bg-gradient-to-b from-white/80 to-blue-50 relative">
        <div class="max-w-4xl mx-auto flex flex-col items-center">
          <h2 class="text-xl sm:text-2xl md:text-3xl lg:text-4xl font-extrabold text-blue-800 text-center mb-6 md:mb-8 lg:mb-10 drop-shadow-lg animate-fadein-up px-4">고객의 진짜 고민,<br><span class="text-pink-500">우리가 해결합니다</span></h2>
          <div class="grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6 lg:gap-8 w-full">
            <!-- 스토리 카드 1 -->
                          <div class="bg-white rounded-2xl shadow-xl p-6 sm:p-8 flex flex-col items-center text-center animate-fadein-up" style="animation-delay:0.1s;">
                <div class="mb-4">
                  <svg class="w-12 h-12 sm:w-14 sm:h-14 text-blue-400 mx-auto" fill="none" stroke="currentColor" stroke-width="2.2" viewBox="0 0 32 32"><path d="M16 4a12 12 0 1 0 0 24A12 12 0 0 0 16 4Zm0 0v8m0 8h.01" stroke-linecap="round" stroke-linejoin="round"/></svg>
                </div>
                <div class="font-bold text-base sm:text-lg text-gray-800 mb-3 px-2 leading-relaxed">"인터넷 최저가라 샀는데<br class="sm:hidden">며칠 뒤 더 싸게 파는 곳을<br class="sm:hidden">발견해서 속상했어요..."</div>
                <div class="text-gray-500 text-sm sm:text-base mb-3">- 김OO, 30대 직장인</div>
                <div class="text-gray-700 text-sm sm:text-base px-2 leading-relaxed">직접 가격 비교에 지쳐 결국 샀지만,<br class="sm:hidden">나중에 더 저렴한 곳을 알게 되어<br class="sm:hidden">속상했어요. PriceHunter 덕분에<br class="sm:hidden">진짜 최저가를 놓치지 않게 됐습니다!</div>
              </div>
            <!-- 스토리 카드 2 -->
            <div class="bg-white rounded-2xl shadow-xl p-6 sm:p-8 flex flex-col items-center text-center animate-fadein-up" style="animation-delay:0.3s;">
              <div class="mb-4">
                <svg class="w-12 h-12 sm:w-14 sm:h-14 text-emerald-400 mx-auto" fill="none" stroke="currentColor" stroke-width="2.2" viewBox="0 0 32 32"><path d="M8 16h16M8 16l6-6m-6 6l6 6" stroke-linecap="round" stroke-linejoin="round"/></svg>
              </div>
              <div class="font-bold text-base sm:text-lg text-gray-800 mb-3 px-2 leading-relaxed">"해외직구가 더 싸다길래<br class="sm:hidden">시도했다가, 복잡한 통관과<br class="sm:hidden">배송에 포기했어요..."</div>
              <div class="text-gray-500 text-sm sm:text-base mb-3">- 이OO, 20대 대학생</div>
              <div class="text-gray-700 text-sm sm:text-base px-2 leading-relaxed">직구 정보 찾고, 배송대행 신청까지<br class="sm:hidden">너무 복잡했어요. PriceHunter가<br class="sm:hidden">대신 알아봐주니 쉽고 빠르게<br class="sm:hidden">최저가로 살 수 있었어요!</div>
            </div>
            <!-- 스토리 카드 3 -->
            <div class="bg-white rounded-2xl shadow-xl p-6 sm:p-8 flex flex-col items-center text-center animate-fadein-up" style="animation-delay:0.5s;">
              <div class="mb-4">
                <svg class="w-12 h-12 sm:w-14 sm:h-14 text-pink-400 mx-auto" fill="none" stroke="currentColor" stroke-width="2.2" viewBox="0 0 32 32"><circle cx="16" cy="16" r="12" stroke="currentColor"/><path d="M12 20c1.5-2 6.5-2 8 0" stroke-linecap="round"/><circle cx="12" cy="14" r="1.5" fill="currentColor"/><circle cx="20" cy="14" r="1.5" fill="currentColor"/></svg>
              </div>
              <div class="font-bold text-base sm:text-lg text-gray-800 mb-3 px-2 leading-relaxed">"비브랜드 제품, 정보도 없고<br class="sm:hidden">후기 찾기도 힘들었는데..."</div>
              <div class="text-gray-500 text-sm sm:text-base mb-3">- 박OO, 40대 주부</div>
              <div class="text-gray-700 text-sm sm:text-base px-2 leading-relaxed">검색해도 정보가 부족해 망설였는데,<br class="sm:hidden">PriceHunter가 상세 비교와 후기까지<br class="sm:hidden">안내해줘서 안심하고 구매했어요.</div>
            </div>
          </div>
          <div class="mt-8 sm:mt-12 text-center animate-fadein-up" style="animation-delay:0.7s;">
            <div class="inline-block bg-yellow-100 px-3 sm:px-4 md:px-6 py-2 sm:py-3 md:py-4 rounded-full shadow-lg border border-yellow-200">
              <span class="text-sm sm:text-base md:text-lg lg:text-xl text-blue-700 font-bold leading-tight">
                고객의 고민, <span class="text-blue-800">PriceHunter</span>가<br class="sm:hidden">직접 해결해드립니다!
              </span>
            </div>
          </div>
          
          <!-- 고객 후기 보러가기 버튼 -->
          <div class="mt-6 sm:mt-8 text-center animate-fadein-up" style="animation-delay:0.9s;">
            <a href="reviews.html" class="inline-flex items-center justify-center px-6 sm:px-8 md:px-10 py-3 sm:py-4 md:py-5 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-bold text-base sm:text-lg md:text-xl rounded-full shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 ease-in-out">
              <svg class="w-5 h-5 sm:w-6 sm:h-6 mr-2 sm:mr-3" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
              </svg>
              <span>실제 고객 후기 보러가기</span>
              <svg class="w-4 h-4 sm:w-5 sm:h-5 ml-2 sm:ml-3" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"></path>
              </svg>
            </a>
          </div>
        </div>
        <style>
          .animate-fadein-up { animation: fadein-up 1.2s cubic-bezier(.4,0,.2,1) both; }
          @keyframes fadein-up { 0% { opacity: 0; transform: translateY(40px);} 100% { opacity: 1; transform: translateY(0);} }
        </style>
      </section>

      <!-- 상세 서비스 프로세스 섹션 -->
      <section class="w-full py-12 sm:py-16 md:py-20 px-4 sm:px-6 bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 relative overflow-hidden">
        <!-- 배경 장식 요소 -->
        <div class="absolute inset-0 opacity-10">
          <div class="absolute top-10 left-10 w-20 h-20 sm:w-32 sm:h-32 bg-blue-400 rounded-full blur-3xl animate-pulse"></div>
          <div class="absolute bottom-10 right-10 w-24 h-24 sm:w-40 sm:h-40 bg-indigo-400 rounded-full blur-3xl animate-pulse" style="animation-delay: 1s;"></div>
          <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-32 h-32 sm:w-60 sm:h-60 bg-purple-400 rounded-full blur-3xl animate-pulse" style="animation-delay: 2s;"></div>
        </div>
        
        <div class="max-w-6xl mx-auto relative z-10">
          <div class="text-center mb-8 sm:mb-12 md:mb-16">
            <div class="inline-flex items-center gap-2 bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-4 sm:px-6 py-2 rounded-full text-xs sm:text-sm font-semibold mb-3 sm:mb-4 animate-fade-in-up">
              <svg class="w-4 h-4 sm:w-5 sm:h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
              </svg>
              단계별 서비스 과정
            </div>
            <h2 class="text-2xl sm:text-3xl md:text-5xl font-extrabold text-gray-800 mb-4 sm:mb-6 animate-fade-in-up" style="animation-delay: 0.2s;">
              <span class="bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 bg-clip-text text-transparent">
                구매 프로세스
              </span>
              <br class="sm:hidden">
              <span class="text-lg sm:text-xl md:text-2xl lg:text-3xl text-gray-600 font-medium">5단계 상세 검증 과정</span>
              <br class="sm:hidden">
              <span class="text-base sm:text-lg md:text-xl lg:text-2xl text-gray-500 font-medium">투명하고 체계적인 서비스</span>
            </h2>
            <p class="text-sm sm:text-base md:text-lg text-gray-600 max-w-3xl mx-auto animate-fade-in-up px-2 leading-relaxed" style="animation-delay: 0.4s;">
              고객님의 의뢰부터 최종 결과 제공까지,<br class="sm:hidden"> 모든 과정을 투명하게 안내해드립니다
            </p>
          </div>
          
          <!-- 5단계 프로세스 -->
          <div class="space-y-12 sm:space-y-16">
            <!-- 1단계: 의뢰 접수 -->
            <div class="group relative process-step opacity-0 transform translate-y-8 mb-8 sm:mb-12">
              <div class="flex flex-col sm:flex-row items-start sm:items-center gap-4 sm:gap-6 bg-white/80 backdrop-blur-sm rounded-2xl p-4 sm:p-6 md:p-8 shadow-xl border border-white/20 hover:shadow-2xl transition-all duration-500 transform hover:-translate-y-2">
                <div class="flex-shrink-0 mx-auto sm:mx-0">
                  <div class="flex items-center justify-center w-12 h-12 sm:w-14 sm:h-14 md:w-16 md:h-16 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-2xl group-hover:scale-110 transition-transform duration-300 animate-bounce">
                    <span class="text-white font-bold text-lg sm:text-xl">1</span>
                  </div>
                </div>
                <div class="flex-1 text-center sm:text-left">
                  <h3 class="text-lg sm:text-xl md:text-2xl font-bold text-gray-800 mb-2 sm:mb-3 leading-tight">의뢰 접수 및 분석</h3>
                  <p class="text-sm sm:text-base text-gray-600 mb-3 sm:mb-4 leading-relaxed break-words">
                    고객님이 원하는 상품의 <span class="font-semibold text-blue-600">제품명, 요청가격,<br class="sm:hidden">참고링크</span>를 입력하시면<br class="sm:hidden">전문 검증팀이 즉시<br class="sm:hidden">분석을 시작합니다.
                  </p>
                  <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 sm:gap-4">
                    <div class="bg-blue-50 rounded-lg p-3 sm:p-4 min-h-[90px] sm:min-h-[100px] flex flex-col justify-center">
                      <div class="font-semibold text-blue-700 mb-1 sm:mb-2 flex items-center justify-center sm:justify-start">
                        <span class="w-2 h-2 bg-blue-500 rounded-full mr-2 animate-pulse"></span>
                        <span class="text-xs sm:text-sm">제품 정보 확인</span>
                      </div>
                      <p class="text-xs sm:text-sm text-blue-600 text-center sm:text-left">정확한 모델명과 스펙 파악</p>
                    </div>
                    <div class="bg-blue-50 rounded-lg p-3 sm:p-4 min-h-[90px] sm:min-h-[100px] flex flex-col justify-center">
                      <div class="font-semibold text-blue-700 mb-1 sm:mb-2 flex items-center justify-center sm:justify-start">
                        <span class="w-2 h-2 bg-blue-500 rounded-full mr-2 animate-pulse" style="animation-delay: 0.2s;"></span>
                        <span class="text-xs sm:text-sm">시장 가격 조사</span>
                      </div>
                      <p class="text-xs sm:text-sm text-blue-600 text-center sm:text-left">국내외 주요 판매처 가격 분석</p>
                    </div>
                    <div class="bg-blue-50 rounded-lg p-3 sm:p-4 min-h-[90px] sm:min-h-[100px] flex flex-col justify-center">
                      <div class="font-semibold text-blue-700 mb-1 sm:mb-2 flex items-center justify-center sm:justify-start">
                        <span class="w-2 h-2 bg-blue-500 rounded-full mr-2 animate-pulse" style="animation-delay: 0.4s;"></span>
                        <span class="text-xs sm:text-sm">검증 가능성 판단</span>
                      </div>
                      <p class="text-xs sm:text-sm text-blue-600 text-center sm:text-left">브랜드 제한 및 합법성 검토</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- 2단계: 검증 시작 -->
            <div class="group relative process-step opacity-0 transform translate-y-8 mb-8 sm:mb-12" style="animation-delay: 0.2s;">
              <div class="flex flex-col sm:flex-row items-start sm:items-center gap-4 sm:gap-6 bg-white/80 backdrop-blur-sm rounded-2xl p-4 sm:p-6 md:p-8 shadow-xl border border-white/20 hover:shadow-2xl transition-all duration-500 transform hover:-translate-y-2">
                <div class="flex-shrink-0 mx-auto sm:mx-0">
                  <div class="flex items-center justify-center w-12 h-12 sm:w-14 sm:h-14 md:w-16 md:h-16 bg-gradient-to-r from-green-500 to-emerald-500 rounded-2xl group-hover:scale-110 transition-transform duration-300 animate-bounce" style="animation-delay: 0.3s;">
                    <span class="text-white font-bold text-lg sm:text-xl">2</span>
                  </div>
                </div>
                <div class="flex-1 text-center sm:text-left">
                  <h3 class="text-lg sm:text-xl md:text-2xl font-bold text-gray-800 mb-2 sm:mb-3 leading-tight">실시간 검증 진행</h3>
                  <p class="text-sm sm:text-base text-gray-600 mb-3 sm:mb-4 leading-relaxed break-words">
                    전문 검증팀이 <span class="font-semibold text-green-600">도매처 연동,<br class="sm:hidden">공장 직거래, 특별 경로</span> 등<br class="sm:hidden">다양한 경로를 통해<br class="sm:hidden">최저가를 찾아갑니다.
                  </p>
                  <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 sm:gap-4">
                    <div class="bg-green-50 rounded-lg p-3 sm:p-4 min-h-[90px] sm:min-h-[100px] flex flex-col justify-center">
                      <div class="font-semibold text-green-700 mb-1 sm:mb-2 flex items-center justify-center sm:justify-start">
                        <span class="w-2 h-2 bg-green-500 rounded-full mr-2 animate-pulse"></span>
                        <span class="text-xs sm:text-sm">도매처 연동</span>
                      </div>
                      <p class="text-xs sm:text-sm text-green-600 text-center sm:text-left">국내외 도매업체 직접 문의</p>
                    </div>
                    <div class="bg-green-50 rounded-lg p-3 sm:p-4 min-h-[90px] sm:min-h-[100px] flex flex-col justify-center">
                      <div class="font-semibold text-green-700 mb-1 sm:mb-2 flex items-center justify-center sm:justify-start">
                        <span class="w-2 h-2 bg-green-500 rounded-full mr-2 animate-pulse" style="animation-delay: 0.2s;"></span>
                        <span class="text-xs sm:text-sm">공장 직거래</span>
                      </div>
                      <p class="text-xs sm:text-sm text-green-600 text-center sm:text-left">국내/해외 공장 직접 구매</p>
                    </div>
                    <div class="bg-green-50 rounded-lg p-3 sm:p-4 min-h-[90px] sm:min-h-[100px] flex flex-col justify-center">
                      <div class="font-semibold text-green-700 mb-1 sm:mb-2 flex items-center justify-center sm:justify-start">
                        <span class="w-2 h-2 bg-green-500 rounded-full mr-2 animate-pulse" style="animation-delay: 0.4s;"></span>
                        <span class="text-xs sm:text-sm">특별 경로 발굴</span>
                      </div>
                      <p class="text-xs sm:text-sm text-green-600 text-center sm:text-left">독점 계약 및 특가 경로</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- 3단계: 가격 비교 -->
            <div class="group relative process-step opacity-0 transform translate-y-8 mb-8 sm:mb-12" style="animation-delay: 0.4s;">
              <div class="flex flex-col sm:flex-row items-start sm:items-center gap-4 sm:gap-6 bg-white/80 backdrop-blur-sm rounded-2xl p-4 sm:p-6 md:p-8 shadow-xl border border-white/20 hover:shadow-2xl transition-all duration-500 transform hover:-translate-y-2">
                <div class="flex-shrink-0 mx-auto sm:mx-0">
                  <div class="flex items-center justify-center w-12 h-12 sm:w-14 sm:h-14 md:w-16 md:h-16 bg-gradient-to-r from-yellow-500 to-orange-500 rounded-2xl group-hover:scale-110 transition-transform duration-300 animate-bounce" style="animation-delay: 0.5s;">
                    <span class="text-white font-bold text-lg sm:text-xl">3</span>
                  </div>
                </div>
                <div class="flex-1 text-center sm:text-left">
                  <h3 class="text-lg sm:text-xl md:text-2xl font-bold text-gray-800 mb-2 sm:mb-3 leading-tight">종합 가격 분석</h3>
                  <p class="text-sm sm:text-base text-gray-600 mb-3 sm:mb-4 leading-relaxed break-words">
                    수집된 모든 가격 정보를 <span class="font-semibold text-yellow-600">배송비, 관세,<br class="sm:hidden">수수료</span>를 포함하여<br class="sm:hidden">정확히 비교<br class="sm:hidden">분석합니다.
                  </p>
                  <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 sm:gap-4">
                    <div class="bg-yellow-50 rounded-lg p-3 sm:p-4 min-h-[90px] sm:min-h-[100px] flex flex-col justify-center">
                      <div class="font-semibold text-yellow-700 mb-1 sm:mb-2 flex items-center justify-center sm:justify-start">
                        <span class="w-2 h-2 bg-yellow-500 rounded-full mr-2 animate-pulse"></span>
                        <span class="text-xs sm:text-sm">배송비 계산</span>
                      </div>
                      <p class="text-xs sm:text-sm text-yellow-600 text-center sm:text-left">국내/해외 배송, 관세, 통관비용</p>
                    </div>
                    <div class="bg-yellow-50 rounded-lg p-3 sm:p-4 min-h-[90px] sm:min-h-[100px] flex flex-col justify-center">
                      <div class="font-semibold text-yellow-700 mb-1 sm:mb-2 flex items-center justify-center sm:justify-start">
                        <span class="w-2 h-2 bg-yellow-500 rounded-full mr-2 animate-pulse" style="animation-delay: 0.2s;"></span>
                        <span class="text-xs sm:text-sm">수수료 분석</span>
                      </div>
                      <p class="text-xs sm:text-sm text-yellow-600 text-center sm:text-left">결제수수료, 중개수수료 등</p>
                    </div>
                    <div class="bg-yellow-50 rounded-lg p-3 sm:p-4 min-h-[90px] sm:min-h-[100px] flex flex-col justify-center">
                      <div class="font-semibold text-yellow-700 mb-1 sm:mb-2 flex items-center justify-center sm:justify-start">
                        <span class="w-2 h-2 bg-yellow-500 rounded-full mr-2 animate-pulse" style="animation-delay: 0.4s;"></span>
                        <span class="text-xs sm:text-sm">최종가격 산정</span>
                      </div>
                      <p class="text-xs sm:text-sm text-yellow-600 text-center sm:text-left">모든 비용 포함 실제 구매가</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- 4단계: 증거 수집 -->
            <div class="group relative process-step opacity-0 transform translate-y-8 mb-8 sm:mb-12" style="animation-delay: 0.6s;">
              <div class="flex flex-col sm:flex-row items-start sm:items-center gap-4 sm:gap-6 bg-white/80 backdrop-blur-sm rounded-2xl p-4 sm:p-6 md:p-8 shadow-xl border border-white/20 hover:shadow-2xl transition-all duration-500 transform hover:-translate-y-2">
                <div class="flex-shrink-0 mx-auto sm:mx-0">
                  <div class="flex items-center justify-center w-12 h-12 sm:w-14 sm:h-14 md:w-16 md:h-16 bg-gradient-to-r from-purple-500 to-pink-500 rounded-2xl group-hover:scale-110 transition-transform duration-300 animate-bounce" style="animation-delay: 0.7s;">
                    <span class="text-white font-bold text-lg sm:text-xl">4</span>
                  </div>
                </div>
                <div class="flex-1 text-center sm:text-left">
                  <h3 class="text-lg sm:text-xl md:text-2xl font-bold text-gray-800 mb-2 sm:mb-3 leading-tight">검증 증거 수집</h3>
                  <p class="text-sm sm:text-base text-gray-600 mb-3 sm:mb-4 leading-relaxed break-words">
                    최저가 발견 시 <span class="font-semibold text-purple-600">실시간 스크린샷,<br class="sm:hidden">구매링크, 검증 시점</span>을<br class="sm:hidden">모두 기록하여<br class="sm:hidden">객관적인 증거를 확보합니다.
                  </p>
                  <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 sm:gap-4">
                    <div class="bg-purple-50 rounded-lg p-3 sm:p-4 min-h-[90px] sm:min-h-[100px] flex flex-col justify-center">
                      <div class="font-semibold text-purple-700 mb-1 sm:mb-2 flex items-center justify-center sm:justify-start">
                        <span class="w-2 h-2 bg-purple-500 rounded-full mr-2 animate-pulse"></span>
                        <span class="text-xs sm:text-sm">실시간 스크린샷</span>
                      </div>
                      <p class="text-xs sm:text-sm text-purple-600 text-center sm:text-left">가격 및 상품 정보 캡처</p>
                    </div>
                    <div class="bg-purple-50 rounded-lg p-3 sm:p-4 min-h-[90px] sm:min-h-[100px] flex flex-col justify-center">
                      <div class="font-semibold text-purple-700 mb-1 sm:mb-2 flex items-center justify-center sm:justify-start">
                        <span class="w-2 h-2 bg-purple-500 rounded-full mr-2 animate-pulse" style="animation-delay: 0.2s;"></span>
                        <span class="text-xs sm:text-sm">구매 링크 제공</span>
                      </div>
                      <p class="text-xs sm:text-sm text-purple-600 text-center sm:text-left">직접 구매 가능한 링크</p>
                    </div>
                    <div class="bg-purple-50 rounded-lg p-3 sm:p-4 min-h-[90px] sm:min-h-[100px] flex flex-col justify-center">
                      <div class="font-semibold text-purple-700 mb-1 sm:mb-2 flex items-center justify-center sm:justify-start">
                        <span class="w-2 h-2 bg-purple-500 rounded-full mr-2 animate-pulse" style="animation-delay: 0.4s;"></span>
                        <span class="text-xs sm:text-sm">검증 시점 기록</span>
                      </div>
                      <p class="text-xs sm:text-sm text-purple-600 text-center sm:text-left">정확한 날짜와 시간 기록</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- 5단계: 결과 제공 -->
            <div class="group relative process-step opacity-0 transform translate-y-8 mb-8 sm:mb-12" style="animation-delay: 0.8s;">
              <div class="flex flex-col sm:flex-row items-start sm:items-center gap-4 sm:gap-6 bg-white/80 backdrop-blur-sm rounded-2xl p-4 sm:p-6 md:p-8 shadow-xl border border-white/20 hover:shadow-2xl transition-all duration-500 transform hover:-translate-y-2">
                <div class="flex-shrink-0 mx-auto sm:mx-0">
                  <div class="flex items-center justify-center w-12 h-12 sm:w-14 sm:h-14 md:w-16 md:h-16 bg-gradient-to-r from-red-500 to-pink-500 rounded-2xl group-hover:scale-110 transition-transform duration-300 animate-bounce" style="animation-delay: 0.9s;">
                    <span class="text-white font-bold text-lg sm:text-xl">5</span>
                  </div>
                </div>
                <div class="flex-1 text-center sm:text-left">
                  <h3 class="text-lg sm:text-xl md:text-2xl font-bold text-gray-800 mb-2 sm:mb-3 leading-tight">상세 결과 제공</h3>
                  <p class="text-sm sm:text-base text-gray-600 mb-3 sm:mb-4 leading-relaxed break-words">
                    검증 완료 후 <span class="font-semibold text-red-600">최저가, 구매링크,<br class="sm:hidden">절약금액, 상세 분석</span>을<br class="sm:hidden">포함한 종합적인<br class="sm:hidden">결과를 제공합니다.
                  </p>
                  <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 sm:gap-4">
                    <div class="bg-red-50 rounded-lg p-3 sm:p-4 min-h-[90px] sm:min-h-[100px] flex flex-col justify-center">
                      <div class="font-semibold text-red-700 mb-1 sm:mb-2 flex items-center justify-center sm:justify-start">
                        <span class="w-2 h-2 bg-red-500 rounded-full mr-2 animate-pulse"></span>
                        <span class="text-xs sm:text-sm">최저가 정보</span>
                      </div>
                      <p class="text-xs sm:text-sm text-red-600 text-center sm:text-left">요청가 대비 절약 금액</p>
                    </div>
                    <div class="bg-red-50 rounded-lg p-3 sm:p-4 min-h-[90px] sm:min-h-[100px] flex flex-col justify-center">
                      <div class="font-semibold text-red-700 mb-1 sm:mb-2 flex items-center justify-center sm:justify-start">
                        <span class="w-2 h-2 bg-red-500 rounded-full mr-2 animate-pulse" style="animation-delay: 0.2s;"></span>
                        <span class="text-xs sm:text-sm">구매 방법 안내</span>
                      </div>
                      <p class="text-xs sm:text-sm text-red-600 text-center sm:text-left">단계별 구매 가이드</p>
                    </div>
                    <div class="bg-red-50 rounded-lg p-3 sm:p-4 min-h-[90px] sm:min-h-[100px] flex flex-col justify-center">
                      <div class="font-semibold text-red-700 mb-1 sm:mb-2 flex items-center justify-center sm:justify-start">
                        <span class="w-2 h-2 bg-red-500 rounded-full mr-2 animate-pulse" style="animation-delay: 0.4s;"></span>
                        <span class="text-xs sm:text-sm">추가 상담 지원</span>
                      </div>
                      <p class="text-xs sm:text-sm text-red-600 text-center sm:text-left">구매 과정 중 문의 응답</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <!-- 하단 CTA -->
          <div class="text-center mt-16">
            <div class="bg-white/80 backdrop-blur-sm rounded-2xl p-8 shadow-xl border border-white/20 relative overflow-hidden group">
              <!-- 배경 장식 -->
              <div class="absolute inset-0 bg-gradient-to-r from-blue-50 to-indigo-50 opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
              <div class="absolute -top-10 -right-10 w-20 h-20 bg-blue-200 rounded-full blur-xl opacity-0 group-hover:opacity-30 transition-opacity duration-500"></div>
              <div class="absolute -bottom-10 -left-10 w-20 h-20 bg-indigo-200 rounded-full blur-xl opacity-0 group-hover:opacity-30 transition-opacity duration-500"></div>
              
              <div class="relative z-10">
                <h3 class="text-2xl font-bold text-gray-800 mb-4 animate-fade-in-up" style="animation-delay: 1s;">투명하고 체계적인<br class="sm:hidden"> 검증 서비스</h3>
                <p class="text-gray-600 mb-6 max-w-2xl mx-auto animate-fade-in-up leading-relaxed" style="animation-delay: 1.2s;">
                  5단계 상세 프로세스를 통해<br class="sm:hidden"> 고객님께 최고의 가치를 제공합니다.<br class="hidden sm:inline"><br class="sm:hidden">
                  모든 과정이 투명하게 진행되며,<br class="sm:hidden"> 객관적인 증거와 함께<br class="sm:hidden"> 결과를 제공합니다.
                </p>
                <a href="request-v2.html" class="inline-flex items-center gap-2 bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-6 sm:px-8 py-3 sm:py-4 rounded-xl font-bold text-base sm:text-lg shadow-lg hover:shadow-xl transition-all duration-500 transform hover:scale-105 hover:rotate-1 animate-fade-in-up group text-center" style="animation-delay: 1.4s;">
                  <svg class="w-4 h-4 sm:w-5 sm:h-5 transition-transform duration-300 group-hover:translate-x-1" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                    <path d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
                  </svg>
                  <span class="whitespace-nowrap">최저가 검증 의뢰하기</span>
                </a>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- 절감왕 히어로 섹션 -->
      <section id="savings-hero" class="w-full py-20 px-4 bg-gradient-to-br from-emerald-50 via-green-50 to-blue-50 relative z-10">
        <div class="max-w-6xl mx-auto">
          <div class="text-center mb-12">
            <h2 class="text-3xl md:text-4xl font-extrabold text-gray-800 mb-4 flex items-center justify-center">
              🏆 <span class="text-emerald-600">이번 주 절감왕</span>
            </h2>
            <p class="text-lg text-gray-600">실제 검증된 절감 성공 사례</p>
          </div>
          
          <div class="bg-white rounded-2xl shadow-2xl p-8 md:p-12 max-w-4xl mx-auto">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
              <!-- 절감 정보 -->
              <div class="space-y-6">
                <div class="flex items-center gap-4">
                  <div class="bg-emerald-100 rounded-full p-3">
                    <svg class="w-8 h-8 text-emerald-600" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                      <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"></path>
                    </svg>
                  </div>
                  <div>
                    <h3 class="text-2xl font-bold text-gray-800">전기포트</h3>
                    <p class="text-gray-600">생활용품 카테고리</p>
                  </div>
                </div>
                
                <div class="space-y-4">
                  <div class="flex justify-between items-center p-4 bg-gray-50 rounded-lg">
                    <span class="text-gray-600">원래 가격</span>
                    <span class="text-lg font-semibold text-gray-800">89,000원</span>
                  </div>
                  <div class="flex justify-between items-center p-4 bg-emerald-50 rounded-lg">
                    <span class="text-gray-600">절감 후 가격</span>
                    <span class="text-xl font-bold text-emerald-600">51,000원</span>
                  </div>
                  <div class="flex justify-between items-center p-4 bg-red-50 rounded-lg">
                    <span class="text-gray-600">절감액</span>
                    <span class="text-xl font-bold text-red-600">38,000원 절약</span>
                  </div>
                  <div class="text-center">
                    <span class="inline-block bg-red-100 text-red-800 px-4 py-2 rounded-full font-bold text-lg">
                      -42% 절감
                    </span>
                  </div>
                </div>
                
                <div class="bg-blue-50 p-4 rounded-lg">
                  <h4 class="font-semibold text-blue-800 mb-2">선정 사유</h4>
                  <p class="text-sm text-blue-700">동일 모델명, 동일 용량, 동일 보증 조건으로 검증 완료. 공장 직접구매 경로를 통해 대폭 할인된 가격 발견.</p>
                </div>
                
                        <div class="flex flex-col sm:flex-row gap-3 sm:gap-4 w-full">
          <button onclick="goToRequest()" class="w-full sm:flex-1 bg-pink-600 text-white py-3 px-4 sm:px-6 rounded-lg font-semibold hover:bg-pink-700 transition text-sm sm:text-base text-center" style="white-space: nowrap; box-sizing: border-box;">
            나도 의뢰해서 절약하기
          </button>
          <a href="reviews.html" class="w-full sm:flex-1 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white py-3 px-4 sm:px-6 rounded-lg font-semibold transition-all duration-300 text-sm sm:text-base text-center flex items-center justify-center gap-2" style="white-space: nowrap; box-sizing: border-box;">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
            </svg>
            <span>고객 후기 보기</span>
          </a>
        </div>
              </div>
              
              <!-- 이미지 -->
              <div class="relative">
                <img src="https://images.unsplash.com/photo-1519125323398-675f0ddb6308?auto=format&fit=crop&w=600&q=80" 
                     alt="절감왕 전기포트" 
                     class="w-full h-64 object-cover rounded-xl shadow-lg">
                <div class="absolute top-4 right-4 bg-emerald-500 text-white px-3 py-1 rounded-full text-sm font-bold">
                  🏆 절감왕
                </div>
                <div class="absolute bottom-4 left-4 bg-white/90 backdrop-blur px-3 py-2 rounded-lg">
                  <p class="text-sm font-semibold text-gray-800">김OO, 30대 직장인</p>
                  <p class="text-xs text-gray-600">2024.01.15 검증 완료</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    <!-- 통합 관리자 대시보드 버튼 -->
    <!-- 관리자 버튼들 (관리자 모드에서만 노출) -->
    <button id="admin-logout-btn" class="fixed top-4 right-4 z-50 px-4 py-2 bg-gray-800 text-white rounded-lg shadow hover:bg-amber-500 transition hidden cursor-default" aria-label="관리자 해제" title="관리자 해제" onclick="adminLogout()">관리자 해제</button>
    <button id="force-logout-btn" class="fixed top-4 right-32 z-50 px-4 py-2 bg-red-800 text-white rounded-lg shadow hover:bg-red-900 transition hidden cursor-default" aria-label="강제 로그아웃" title="강제 로그아웃" onclick="forceAdminLogout()">🚨 강제 해제</button>
    <button id="admin-dashboard-btn" class="fixed top-16 right-4 z-50 px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-xl shadow-lg hover:from-purple-700 hover:to-pink-700 transition-all duration-300 transform hover:scale-105 hidden font-bold text-sm cursor-default" aria-label="관리자 대시보드" title="관리자 대시보드">
      🎛️ 관리자 대시보드
    </button>
    <button id="admin-cleanup-btn" class="fixed top-16 right-48 z-50 px-4 py-2 bg-red-600 text-white rounded-lg shadow hover:bg-red-700 transition hidden cursor-default" aria-label="테스트 데이터 정리" title="테스트 데이터 정리" onclick="cleanupTestData()">🧹 정리</button>
        </script>
    <!-- 햄버거 메뉴 버튼 -->
    <div class="fixed top-4 left-4 z-50">
      <button id="hamburger-menu" class="w-12 h-12 bg-white/90 backdrop-blur-sm rounded-lg shadow-lg hover:bg-white transition-all duration-300 flex flex-col items-center justify-center gap-1.5 p-2" aria-label="메뉴 열기" title="메뉴">
        <span class="w-6 h-0.5 bg-gray-700 rounded-full transition-all duration-300"></span>
        <span class="w-6 h-0.5 bg-gray-700 rounded-full transition-all duration-300"></span>
        <span class="w-6 h-0.5 bg-gray-700 rounded-full transition-all duration-300"></span>
      </button>
    </div>

    <!-- 햄버거 메뉴 오버레이 -->
    <div id="menu-overlay" class="fixed inset-0 bg-black/50 backdrop-blur-sm z-40 hidden" aria-hidden="true"></div>

    <!-- 햄버거 메뉴 패널 -->
    <div id="menu-panel" class="fixed top-0 left-0 h-full w-72 sm:w-80 md:w-96 bg-white shadow-2xl transform -translate-x-full transition-transform duration-300 ease-in-out z-50">
      <div class="p-3 sm:p-4">
        <!-- 메뉴 헤더 -->
        <div class="flex items-center justify-between mb-6">
          <h2 class="text-lg sm:text-xl font-bold text-gray-800">메뉴</h2>
          <button id="close-menu" class="w-7 h-7 sm:w-8 sm:h-8 bg-gray-100 rounded-full flex items-center justify-center hover:bg-gray-200 transition" aria-label="메뉴 닫기" title="메뉴 닫기">
            <svg class="w-4 h-4 sm:w-5 sm:h-5 text-gray-600" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <path d="M6 18L18 6M6 6l12 12"></path>
            </svg>
          </button>
        </div>

        <!-- 메뉴 항목들 -->
        <nav class="space-y-3">
          <a href="about.html" class="flex items-center gap-2 sm:gap-3 px-2 sm:px-3 py-2 sm:py-3 text-gray-700 hover:bg-blue-50 hover:text-blue-700 rounded-lg transition-colors duration-200">
            <svg class="w-4 h-4 sm:w-5 sm:h-5 text-blue-500 flex-shrink-0" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <path d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
            <span class="font-medium text-sm sm:text-base">소개</span>
          </a>
          
          <a href="support.html" class="flex items-center gap-2 sm:gap-3 px-2 sm:px-3 py-2 sm:py-3 text-gray-700 hover:bg-emerald-50 hover:text-emerald-700 rounded-lg transition-colors duration-200">
            <svg class="w-4 h-4 sm:w-5 sm:h-5 text-emerald-500 flex-shrink-0" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <path d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
            <span class="font-medium text-sm sm:text-base">FAQ</span>
          </a>

          <div class="border-t border-gray-200 my-3"></div>

          <button id="login-btn" class="w-full flex items-center gap-2 sm:gap-3 px-2 sm:px-3 py-2 sm:py-3 text-gray-700 hover:bg-gray-50 rounded-lg transition-colors duration-200 text-left">
            <svg class="w-4 h-4 sm:w-5 sm:h-5 text-gray-500 flex-shrink-0" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <path d="M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"></path>
            </svg>
            <span class="font-medium text-sm sm:text-base">로그인</span>
          </button>

          <button id="signup-btn" class="w-full flex items-center gap-2 sm:gap-3 px-2 sm:px-3 py-2 sm:py-3 bg-blue-500 text-white hover:bg-blue-600 rounded-lg transition-colors duration-200 text-left">
            <svg class="w-4 h-4 sm:w-5 sm:h-5 text-white flex-shrink-0" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <path d="M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"></path>
            </svg>
            <span class="font-medium text-sm sm:text-base">회원가입</span>
          </button>

          <a href="member-dashboard.html" id="mypage-btn" class="hidden flex items-center gap-2 sm:gap-3 px-2 sm:px-3 py-2 sm:py-3 text-gray-700 hover:bg-emerald-50 hover:text-emerald-700 rounded-lg transition-colors duration-200">
            <svg class="w-4 h-4 sm:w-5 sm:h-5 text-emerald-500 flex-shrink-0" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <path d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
            </svg>
            <span class="font-medium text-sm sm:text-base">회원 대시보드</span>
          </a>

          <button id="logout-btn" class="hidden w-full flex items-center gap-2 sm:gap-3 px-2 sm:px-3 py-2 sm:py-3 text-gray-700 hover:bg-red-50 hover:text-red-700 rounded-lg transition-colors duration-200 text-left">
            <svg class="w-4 h-4 sm:w-5 sm:h-5 text-gray-500 flex-shrink-0" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <path d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path>
            </svg>
            <span class="font-medium text-sm sm:text-base">로그아웃</span>
          </button>


        </nav>
      </div>
    </div>


    <!-- 로그인 모달 -->
    <div id="login-modal" class="fixed inset-0 bg-black/40 flex items-center justify-center z-50 hidden p-4" role="dialog" aria-modal="true" aria-labelledby="login-modal-title">
      <div class="bg-white rounded-2xl shadow-2xl p-4 sm:p-6 md:p-8 w-full max-w-xs sm:max-w-sm md:max-w-md relative mx-auto">
        <button id="close-login" class="absolute top-3 right-3 text-gray-400 hover:text-gray-700 text-2xl" aria-label="로그인 창 닫기" title="로그인 창 닫기">&times;</button>
        <h2 id="login-modal-title" class="text-2xl font-bold text-center mb-6 text-gray-700">로그인</h2>
        
        <!-- 핸드폰 인증 안내 -->
        <div class="mb-6">
          <div class="text-center mb-4">
            <span class="text-gray-500 text-sm">핸드폰 인증으로 안전하게 로그인하기</span>
          </div>
        </div>
        

         <form id="login-form" class="space-y-3">
           <div>
             <label class="block text-gray-700 font-semibold mb-1" for="login-email">이메일</label>
             <input type="email" id="login-email" required class="w-full px-2 py-1 text-sm rounded border border-gray-300 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 focus:outline-none transition-colors" aria-label="이메일" placeholder="이메일을 입력하세요" />
           </div>
           <div>
             <label class="block text-gray-700 font-semibold mb-1" for="login-password">비밀번호</label>
             <input type="password" id="login-password" required class="w-full px-2 py-1 text-sm rounded border border-gray-300 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 focus:outline-none transition-colors" aria-label="비밀번호" placeholder="비밀번호를 입력하세요" />
           </div>
           <button type="submit" class="w-full py-1 bg-blue-600 text-white font-bold rounded shadow hover:bg-blue-700 transition-colors text-sm" aria-label="로그인" title="로그인">로그인</button>
         </form>
        
        <!-- 아이디/비밀번호 찾기 -->
        <div class="mt-4 text-center">
          <div class="flex justify-center gap-4 text-sm">
            <button type="button" onclick="showFindIdModal()" class="text-gray-600 hover:text-gray-800 underline transition-colors">
              아이디 찾기
            </button>
            <span class="text-gray-400">|</span>
            <button type="button" onclick="showFindPasswordModal()" class="text-gray-600 hover:text-gray-800 underline transition-colors">
              비밀번호 찾기
            </button>
          </div>
        </div>
        
        <div id="login-error" class="text-red-500 text-center mt-3 hidden flex items-center justify-center gap-2 animate-fadein">
          <svg class="w-5 h-5 text-red-500 animate-bounce" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><line x1="8" y1="8" x2="16" y2="16"/><line x1="16" y1="8" x2="8" y2="16"/></svg>
          <span>이메일 또는 비밀번호가 올바르지 않습니다.</span>
        </div>
      </div>
    </div>

    <!-- 아이디 찾기 모달 -->
    <div id="find-id-modal" class="fixed inset-0 bg-black/40 flex items-center justify-center z-50 hidden p-4" role="dialog" aria-modal="true" aria-labelledby="find-id-modal-title">
      <div class="bg-white rounded-2xl shadow-2xl p-4 sm:p-6 w-full max-w-xs sm:max-w-sm relative mx-auto">
        <button id="close-find-id" class="absolute top-3 right-3 text-gray-400 hover:text-gray-700 text-2xl" aria-label="아이디 찾기 창 닫기">&times;</button>
        <h2 id="find-id-modal-title" class="text-2xl font-bold text-center mb-6 text-gray-700">아이디 찾기</h2>
        
         <form id="find-id-form" class="space-y-3">
           <div>
             <label class="block text-gray-700 font-semibold mb-1" for="find-id-name">이름</label>
             <input type="text" id="find-id-name" required class="w-full px-2 py-1 text-sm rounded border border-gray-300 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 focus:outline-none transition-colors" placeholder="가입시 입력한 이름" />
           </div>
           <div>
             <label class="block text-gray-700 font-semibold mb-1" for="find-id-phone">휴대폰 번호</label>
             <input type="tel" id="find-id-phone" required class="w-full px-2 py-1 text-sm rounded border border-gray-300 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 focus:outline-none transition-colors" placeholder="010-1234-5678" />
           </div>
           <button type="submit" class="w-full py-1 bg-blue-600 text-white font-bold rounded shadow hover:bg-blue-700 transition-colors text-sm">아이디 찾기</button>
         </form>
        
        <div id="find-id-result" class="mt-4 p-4 bg-gray-50 rounded-lg hidden">
          <p class="text-center text-gray-700"></p>
        </div>
      </div>
    </div>

    <!-- 비밀번호 찾기 모달 -->
    <div id="find-password-modal" class="fixed inset-0 bg-black/40 flex items-center justify-center z-50 hidden p-4" role="dialog" aria-modal="true" aria-labelledby="find-password-modal-title">
      <div class="bg-white rounded-2xl shadow-2xl p-4 sm:p-6 w-full max-w-xs sm:max-w-sm relative mx-auto">
        <button id="close-find-password" class="absolute top-3 right-3 text-gray-400 hover:text-gray-700 text-2xl" aria-label="비밀번호 찾기 창 닫기">&times;</button>
        <h2 id="find-password-modal-title" class="text-2xl font-bold text-center mb-6 text-gray-700">비밀번호 찾기</h2>
        
         <form id="find-password-form" class="space-y-3">
           <div>
             <label class="block text-gray-700 font-semibold mb-1" for="find-password-email">이메일</label>
             <input type="email" id="find-password-email" required class="w-full px-2 py-1 text-sm rounded border border-gray-300 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 focus:outline-none transition-colors" placeholder="가입시 사용한 이메일" />
           </div>
           <div>
             <label class="block text-gray-700 font-semibold mb-1" for="find-password-name">이름</label>
             <input type="text" id="find-password-name" required class="w-full px-2 py-1 text-sm rounded border border-gray-300 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 focus:outline-none transition-colors" placeholder="가입시 입력한 이름" />
           </div>
           <button type="submit" class="w-full py-1 bg-green-600 text-white font-bold rounded shadow hover:bg-green-700 transition-colors text-sm">비밀번호 재설정</button>
         </form>
        
        <div id="find-password-result" class="mt-4 p-4 bg-gray-50 rounded-lg hidden">
          <p class="text-center text-gray-700"></p>
        </div>
      </div>
    </div>

    <!-- 회원 탈퇴 확인 모달 -->
    <div id="withdraw-modal" class="fixed inset-0 bg-black/40 flex items-center justify-center z-50 hidden p-4" role="dialog" aria-modal="true" aria-labelledby="withdraw-modal-title">
      <div class="bg-white rounded-2xl shadow-2xl p-4 sm:p-6 md:p-8 w-full max-w-xs sm:max-w-sm relative mx-auto">
        <button id="close-withdraw" class="absolute top-3 right-3 text-gray-400 hover:text-gray-700 text-2xl" aria-label="탈퇴 창 닫기" title="탈퇴 창 닫기">&times;</button>
        <h2 id="withdraw-modal-title" class="text-2xl font-bold text-center mb-6 text-red-600">회원 탈퇴</h2>
        
        <div class="space-y-4 mb-6">
          <div class="bg-red-50 border border-red-200 rounded-lg p-4">
            <div class="flex items-start">
              <svg class="w-5 h-5 text-red-500 mt-0.5 mr-2 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path>
              </svg>
              <div>
                <h3 class="text-sm font-medium text-red-800">탈퇴 시 주의사항</h3>
                <div class="mt-2 text-sm text-red-700">
                  <ul class="list-disc list-inside space-y-1">
                    <li>모든 개인정보가 영구적으로 삭제됩니다</li>
                    <li>진행 중인 의뢰나 문의는 취소됩니다</li>
                    <li>구매 내역은 법적 요구사항에 따라 보관됩니다</li>
                    <li>탈퇴 후 재가입 시 이전 데이터는 복구되지 않습니다</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
          
          <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
            <div class="flex items-start">
              <svg class="w-5 h-5 text-yellow-500 mt-0.5 mr-2 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path>
              </svg>
              <div>
                <h3 class="text-sm font-medium text-yellow-800">진행 중인 작업 확인</h3>
                <div class="mt-2 text-sm text-yellow-700">
                  <div id="withdraw-check-list">
                    <!-- 진행 중인 작업들이 여기에 표시됩니다 -->
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <div class="space-y-3">
          <label class="flex items-center">
            <input type="checkbox" id="withdraw-confirm-checkbox" class="w-4 h-4 text-red-600 border-gray-300 rounded focus:ring-red-500">
            <span class="ml-2 text-sm text-gray-700">위 내용을 모두 확인했으며, 회원 탈퇴에 동의합니다</span>
          </label>
          
          <div class="flex space-x-3">
            <button id="cancel-withdraw" class="flex-1 py-3 bg-gray-500 text-white font-bold rounded-lg shadow hover:bg-gray-600 transition">취소</button>
            <button id="confirm-withdraw" class="flex-1 py-3 bg-red-500 text-white font-bold rounded-lg shadow hover:bg-red-600 transition disabled:opacity-50 disabled:cursor-not-allowed" disabled>탈퇴</button>
          </div>
        </div>
      </div>
    </div>

    <!-- 최소주문금액 안내 팝업 -->
    <div id="min-order-popup" class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40" style="display:none;" role="dialog" aria-modal="true" aria-labelledby="min-order-popup-title">
      <div class="bg-white rounded-2xl shadow-2xl p-4 sm:p-6 md:p-8 max-w-xs sm:max-w-sm w-full mx-4 text-center animate-fadein-up">
        <div class="text-xl font-bold text-pink-600 mb-2" id="min-order-popup-title">안내</div>
        <div class="text-gray-800 mb-4 leading-relaxed">
          현재는 <span class="font-semibold">초기 테스트 버전</span>으로,<br>
          <span class="font-bold text-blue-700">하루 최대 2건까지만 의뢰하실 수 있습니다.</span><br>
          <span class="font-bold text-blue-700">또한 최소 의뢰 금액이 1만원 이상</span>으로 제한됩니다.<br>
        </div>
        <label class="inline-flex items-center mb-4 cursor-pointer">
          <input type="checkbox" id="hide-popup-today" class="form-checkbox h-4 w-4 text-pink-500 mr-2" />
          <span class="text-sm text-gray-600">오늘 하루 보지 않기</span>
        </label>
        <button id="close-min-order-popup" class="w-full py-2 bg-pink-500 text-white font-bold rounded-lg shadow hover:bg-pink-600 transition" aria-label="최소주문금액 안내 닫기" title="최소주문금액 안내 닫기">확인</button>
      </div>
    </div>
    <script>
      // 콘솔 경고 필터링 (불필요한 경고 제거)
      const originalWarn = console.warn;
      console.warn = function(...args) {
        const message = args.join(' ');
        // 특정 경고들만 필터링
        if (message.includes('Non-passive event listener')) {
          return; // 비수동 이벤트 리스너 경고 무시
        }
        originalWarn.apply(console, args);
      };
      
      // Firebase v9 기반 공통 함수들
      // Firebase 즉시 사용 함수 (waitForFirebase 제거)
      function ensureFirebaseReady() {
        if (!window.firebaseAuth || !window.firebaseDb || !window.firebaseFirestoreFunctions) {
          console.error('❌ Firebase가 초기화되지 않았습니다.');
          return false;
        }
        return true;
      }

      // 사용자 데이터 upsert 함수 (모든 로그인 경로에서 공통 사용)
      async function upsertUser(userData, extra = {}) {
        try {
          // Firebase 우회: 로컬에서만 처리 (임시)
          console.log('🔄 Firebase 우회 - 로컬 사용자 데이터 처리:', userData.email);
          
          const userDoc = {
            uid: userData.uid,
            email: userData.email,
            displayName: userData.displayName || userData.name || userData.nickname || '',
            photoURL: userData.photoURL || userData.profileImage || '',
            loginMethod: userData.loginMethod || 'email',
            createdAt: userData.createdAt || new Date(),
            updatedAt: new Date(),
            isActive: true,
            ...extra
          };

          // 로컬 캐시에 저장
          userCache.set(userData.email, userDoc);
          console.log('✅ 로컬 사용자 데이터 처리 완료:', userData.email);
          return true;
        } catch (error) {
          console.error('❌ 사용자 데이터 처리 실패:', error);
          console.error('❌ 오류 상세:', error.message, error.code);
          return false;
        }
      }

      // Firebase Auth 상태 변경 감지
      function setupAuthStateListener() {
        if (!window.firebaseAuthFunctions) return;
        
        const { onAuthStateChanged } = window.firebaseAuthFunctions;
        onAuthStateChanged(window.firebaseAuth, (user) => {
          if (user) {
            console.log('✅ 사용자 로그인됨:', user.email);
            
            // 관리자 계정인 경우 자동 로그아웃
            if (user.email === 'admin@pricehunter.com') {
              console.log('🚫 관리자 계정 감지 - 자동 로그아웃');
              signOutUser();
              return;
            }
            
            // 로그인 상태 UI 업데이트
            updateAuthUI();
          } else {
            console.log('❌ 사용자 로그아웃됨');
            // 로그아웃 상태 UI 업데이트
            updateAuthUI();
          }
        });
      }

      // Firebase 커스텀 토큰으로 로그인
      async function signInWithFirebaseCustomToken(customToken) {
        try {
          await waitForFirebase();
          
          const { signInWithCustomToken } = window.firebaseAuthFunctions;
          const result = await signInWithCustomToken(window.firebaseAuth, customToken);
          console.log('✅ Firebase 커스텀 토큰 로그인 성공:', result.user.email);
          return result.user;
        } catch (error) {
          console.error('❌ Firebase 커스텀 토큰 로그인 실패:', error);
          throw error;
        }
      }

      // Firebase 로그아웃
      async function signOutFromFirebase() {
        try {
          await waitForFirebase();
          
          const { signOut } = window.firebaseAuthFunctions;
          await signOut(window.firebaseAuth);
          console.log('✅ Firebase 로그아웃 완료');
        } catch (error) {
          console.error('❌ Firebase 로그아웃 실패:', error);
        }
      }

      // 사용자 로그아웃 함수
      async function signOutUser() {
        try {
          console.log('🚪 사용자 로그아웃 시작...');
          
          // Firebase 로그아웃
          await signOutFromFirebase();
          
          // localStorage 정리
          localStorage.removeItem('loggedIn');
          localStorage.removeItem('user');
          localStorage.removeItem('currentUser');
          localStorage.removeItem('loggedInEmail');
          
          // UI 업데이트
          updateAuthUI();
          
          console.log('✅ 사용자 로그아웃 완료');
        } catch (error) {
          console.error('❌ 사용자 로그아웃 실패:', error);
        }
      }

      // 햄버거 메뉴 제어 함수는 전역 스코프로 이동됨

      // 로그인/회원가입/마이페이지/로그아웃/의뢰결과조회 버튼 제어
      function updateAuthUI() {
        const isLoggedIn = localStorage.getItem('loggedIn') === 'true' || localStorage.getItem('currentUser');
        const isAdmin = validateAdminSession(); // 세션 검증 추가
        
        console.log('🔍 로그인 상태 확인:', {
          loggedIn: localStorage.getItem('loggedIn'),
          currentUser: localStorage.getItem('currentUser'),
          isLoggedIn: isLoggedIn,
          isAdmin: isAdmin
        });
        
        // null 체크를 위한 안전한 함수
        function safeSetDisplay(elementId, display) {
          const element = document.getElementById(elementId);
          if (element) {
            element.style.display = display;
          }
        }
        
        if (isLoggedIn) {
          safeSetDisplay('login-btn', 'none');
          safeSetDisplay('signup-btn', 'none');
          safeSetDisplay('mypage-btn', 'inline-block');
          safeSetDisplay('logout-btn', 'inline-block');

          
          if (isAdmin) {
            setAdminMode(true);
          } else {
            // 관리자 모드가 이미 활성화되어 있으면 유지
            const currentAdminMode = localStorage.getItem('adminMode') === 'true';
            const currentIsAdmin = localStorage.getItem('isAdmin') === 'true';
            if (!currentAdminMode && !currentIsAdmin) {
            setAdminMode(false);
            }
          }
        } else {
          safeSetDisplay('login-btn', 'inline-block');
          safeSetDisplay('signup-btn', 'inline-block');
          safeSetDisplay('mypage-btn', 'none');
          safeSetDisplay('logout-btn', 'none');

          // 로그아웃 상태에서도 관리자 모드가 활성화되어 있으면 유지
          const currentAdminMode = localStorage.getItem('adminMode') === 'true';
          const currentIsAdmin = localStorage.getItem('isAdmin') === 'true';
          if (!currentAdminMode && !currentIsAdmin) {
          setAdminMode(false);
          }
        }
      }
      
      // 관리자 세션 검증 (전역 함수로 이동)
      function validateAdminSession() {
        const isAdmin = localStorage.getItem('isAdmin') === 'true';
        const loginTime = localStorage.getItem('adminLoginTime');
        
        if (isAdmin && loginTime) {
          // 24시간 세션 제한
          const sessionAge = Date.now() - parseInt(loginTime);
          const maxSessionAge = 24 * 60 * 60 * 1000; // 24시간
          
          if (sessionAge > maxSessionAge) {
            localStorage.removeItem('isAdmin');
            localStorage.removeItem('adminLoginTime');
            return false;
          }
        }
        return isAdmin;
      }
      
      // 관리자 로그아웃
      function adminLogout() {
        console.log('🔓 관리자 로그아웃 시작');
        
        // 모든 관리자 모드 보호 해제
        adminModeProtected = false;
        adminModeLocked = false;
        
        // localStorage에서 관리자 관련 데이터 완전 제거
        localStorage.removeItem('isAdmin');
        localStorage.removeItem('adminMode');
        localStorage.removeItem('adminLoginTime');
        localStorage.removeItem('adminEmail');
        
        // 강제로 관리자 모드 비활성화 (보호 로직 우회)
        localStorage.setItem('adminMode', 'false');
        localStorage.setItem('isAdmin', 'false');
        
        // 모든 관리자 관련 키 제거
        const allKeys = Object.keys(localStorage);
        allKeys.forEach(key => {
          if (key.includes('admin') || key.includes('Admin')) {
            localStorage.removeItem(key);
            console.log(`관리자 관련 키 제거: ${key}`);
          }
        });
        
        // UI 직접 업데이트 (setAdminMode 호출하지 않음)
        const adminLogoutBtn = document.getElementById('admin-logout-btn');
        if (adminLogoutBtn) adminLogoutBtn.classList.add('hidden');
        
        const forceLogoutBtn = document.getElementById('force-logout-btn');
        if (forceLogoutBtn) forceLogoutBtn.classList.add('hidden');
        
        const adminDashboardBtn = document.getElementById('admin-dashboard-btn');
        if (adminDashboardBtn) adminDashboardBtn.classList.add('hidden');
        
        const adminCleanupBtn = document.getElementById('admin-cleanup-btn');
        if (adminCleanupBtn) adminCleanupBtn.classList.add('hidden');
        
        // updateAuthUI 호출
        updateAuthUI();
        
        // 성공 메시지
        showToast('관리자 로그아웃되었습니다.', 'success');
        
        // 즉시 페이지 새로고침으로 완전한 상태 초기화
        window.location.reload();
      }
      
      // 강제 관리자 로그아웃 (백업 함수)
      function forceAdminLogout() {
        console.log('🚨 강제 관리자 로그아웃 실행');
        
        // 모든 전역 변수 초기화
        adminModeProtected = false;
        adminModeLocked = false;
        
        // localStorage 완전 클리어
        localStorage.clear();
        
        // 성공 메시지
        showToast('강제 로그아웃 완료. 페이지를 새로고침합니다.', 'warning');
        
        // 즉시 페이지 새로고침
        setTimeout(() => {
          window.location.reload();
        }, 1000);
      }
      
      // 로그인 시도 제한 (간단한 구현)
      let loginAttempts = 0;
      const maxLoginAttempts = 5;
      let lockoutTime = 0;
      
      function checkLoginLimit() {
        const now = Date.now();
        if (lockoutTime > now) {
          const remainingTime = Math.ceil((lockoutTime - now) / 1000 / 60);
          showToast(`로그인 시도가 제한되었습니다. ${remainingTime}분 후 다시 시도해주세요.`, 'error');
          return false;
        }
        return true;
      }
      
      function recordLoginAttempt(success) {
        if (success) {
          loginAttempts = 0;
          lockoutTime = 0;
        } else {
          loginAttempts++;
          if (loginAttempts >= maxLoginAttempts) {
            lockoutTime = Date.now() + (15 * 60 * 1000); // 15분 제한
            showToast('로그인 시도가 너무 많습니다. 15분 후 다시 시도해주세요.', 'error');
          }
        }
      }
      
      // 향상된 Toast 메시지 표시 함수
      function showToast(msg, type = 'success', duration = 3000) {
        let toast = document.getElementById('global-toast');
        if (!toast) {
          toast = document.createElement('div');
          toast.id = 'global-toast';
          document.body.appendChild(toast);
        }
        
        const icon = type === 'error' ? '❌' : type === 'warning' ? '⚠️' : '✅';
        const bgColor = type === 'error' ? 'bg-red-500' : type === 'warning' ? 'bg-yellow-500' : 'bg-emerald-600';
        
        toast.innerHTML = `
          <div class="flex items-center gap-3">
            <span class="text-xl">${icon}</span>
            <span>${msg}</span>
            <button onclick="this.parentElement.parentElement.remove()" class="ml-2 text-white/80 hover:text-white">×</button>
          </div>
        `;
        
        toast.className = `fixed top-8 left-1/2 -translate-x-1/2 z-[9999] px-6 py-4 rounded-xl shadow-2xl text-white text-lg font-bold transition-all duration-300 opacity-100 pointer-events-auto ${bgColor}`;
        
        setTimeout(() => { 
          toast.style.opacity = '0';
          setTimeout(() => toast.remove(), 300);
        }, duration);
      }
      
      // 전역 에러 핸들러
      window.addEventListener('error', function(e) {
        console.error('Global error:', e.error);
        showToast('오류가 발생했습니다. 페이지를 새로고침해주세요.', 'error', 5000);
      });
      
      // Promise 에러 핸들러
      window.addEventListener('unhandledrejection', function(e) {
        console.error('Unhandled promise rejection:', e.reason);
        showToast('네트워크 오류가 발생했습니다. 다시 시도해주세요.', 'error', 5000);
      });
      
      // 관리자 모드 보호 전역 변수
      let adminModeProtected = false;
      let adminModeLocked = false;
      
      // 관리자 모드 설정 함수
      function setAdminMode(isAdmin) {
        // 관리자 로그아웃 중인 경우 보호 로직 무시
        if (!isAdmin && (adminModeProtected || adminModeLocked)) {
          console.log('🔓 관리자 로그아웃 중: 보호 로직 무시하고 비활성화 진행');
          adminModeProtected = false;
          adminModeLocked = false;
        }
        
        // 관리자 모드가 잠겨있고 비활성화하려는 경우에만 무시
        if (adminModeLocked && !isAdmin) {
          console.log('🔒 관리자 모드 잠금: 비활성화 시도가 무시됩니다.');
          return;
        }
        
        // 관리자 모드가 이미 활성화되어 있고, 비활성화하려는 경우 확인
        const currentAdminMode = localStorage.getItem('adminMode') === 'true';
        const currentIsAdmin = localStorage.getItem('isAdmin') === 'true';
        
        // 관리자 모드 보호: 이미 활성화되어 있으면 비활성화 시도 무시 (로그아웃 중이 아닌 경우에만)
        if ((currentAdminMode || currentIsAdmin || adminModeProtected) && !isAdmin && adminModeProtected) {
          console.log('🚫 관리자 모드 보호: 이미 활성화되어 있어 비활성화를 무시합니다.');
          // 강제로 관리자 모드 유지
          isAdmin = true;
          adminModeProtected = true;
        }
        
        // localStorage에 관리자 모드 상태 저장
        localStorage.setItem('adminMode', isAdmin.toString());
        localStorage.setItem('isAdmin', isAdmin.toString());
        
        console.log('setAdminMode 호출됨:', isAdmin, '이전 상태:', { currentAdminMode, currentIsAdmin });
        
        // 관리자 모드 버튼들 표시/숨김
        var adminModeBtn = document.getElementById('admin-mode-btn');
        if (adminModeBtn) adminModeBtn.classList.add('hidden');
        
        var adminLogoutBtn = document.getElementById('admin-logout-btn');
        if (adminLogoutBtn) {
          adminLogoutBtn.classList.toggle('hidden', !isAdmin);
          console.log('관리자 로그아웃 버튼 표시 상태:', !isAdmin ? '숨김' : '표시');
        }
        
        var forceLogoutBtn = document.getElementById('force-logout-btn');
        if (forceLogoutBtn) {
          forceLogoutBtn.classList.toggle('hidden', !isAdmin);
          console.log('강제 로그아웃 버튼 표시 상태:', !isAdmin ? '숨김' : '표시');
        }
        
        const adminDashboardBtn = document.getElementById('admin-dashboard-btn');
        if (adminDashboardBtn) {
          adminDashboardBtn.classList.toggle('hidden', !isAdmin);
          console.log('관리자 대시보드 버튼 표시 상태:', !isAdmin ? '숨김' : '표시');
        }
        
           var adminCleanupBtn = document.getElementById('admin-cleanup-btn');
           if (adminCleanupBtn) {
             adminCleanupBtn.classList.toggle('hidden', !isAdmin);
             console.log('테스트데이터정리 버튼 표시 상태:', !isAdmin ? '숨김' : '표시');
           }
        

        
        // 사례 카드 편집 기능 활성화/비활성화
        enableCaseTextEdit(isAdmin);
        
        console.log('관리자 모드 설정 완료:', isAdmin);
      }
      
      // 사례 카드 텍스트 편집 기능
      function enableCaseTextEdit(isAdmin) {
        // 관리자 모드에서만 편집 가능하도록 설정
      }
      
      window.addEventListener('storage', function(e) {
        // 다른 탭에서 localStorage 변경 시 UI 동기화
        updateAuthUI();
        // 관리자 모드가 이미 활성화되어 있으면 유지
        const currentAdminMode = localStorage.getItem('adminMode') === 'true';
        const isAdmin = localStorage.getItem('isAdmin') === 'true';
        if (currentAdminMode || isAdmin) {
          setAdminMode(true);
        }
      });
      
      // XSS 방지 함수
      function sanitizeInput(input) {
        if (typeof input !== 'string') return input;
        return input
          .replace(/&/g, '&amp;')
          .replace(/</g, '&lt;')
          .replace(/>/g, '&gt;')
          .replace(/"/g, '&quot;')
          .replace(/'/g, '&#x27;')
          .replace(/\//g, '&#x2F;');
      }
      
      // 입력값 검증 함수
      function validateInput(input, type = 'text') {
        if (!input || typeof input !== 'string') return false;
        
        const patterns = {
          email: /^[^\s@]+@[^\s@]+\.[^\s@]+$/,
          phone: /^[0-9]{10,11}$/,
          name: /^[가-힣a-zA-Z\s]{2,20}$/,
          password: /^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/
        };
        
        return patterns[type] ? patterns[type].test(input) : input.length > 0;
      }
      
      // 데이터 백업 시스템 (최적화)
      function backupData() {
        try {
          // 백업 키가 너무 많으면 백업 건너뛰기
          const backupKeys = Object.keys(localStorage).filter(key => key.startsWith('ph_backup_'));
          if (backupKeys.length > 0) {
            console.log('백업이 너무 많아 백업을 건너뜁니다.');
            return;
          }
          
          // localStorage 용량 확인 (더 엄격한 기준)
          const currentSize = JSON.stringify(localStorage).length;
          const maxSize = 5 * 1024 * 1024; // 5MB 제한
          
          if (currentSize > maxSize * 0.2) { // 20% 이상 사용 중이면 백업 건너뛰기
            console.log('localStorage 용량이 부족하여 백업을 건너뜁니다.');
            return;
          }
          
          // 백업 데이터 크기 예측 (더 엄격한 기준)
          const data = {};
          for (let i = 0; i < localStorage.length; i++) {
            const key = localStorage.key(i);
            if (key && !key.startsWith('ph_backup_') && !key.startsWith('request-') && !key.startsWith('image-')) {
              data[key] = localStorage.getItem(key);
            }
          }
          
          const backupSize = JSON.stringify(data).length;
          if (backupSize > 128 * 1024) { // 128KB 이상이면 백업 건너뛰기
            console.log('백업 데이터가 너무 커서 백업을 건너뜁니다.');
            return;
          }
          
          const backup = {
            timestamp: new Date().toISOString(),
            data: data,
            version: '1.0'
          };
          
          localStorage.setItem('ph_backup_' + Date.now(), JSON.stringify(backup));
  
        } catch (error) {
          console.error('백업 실패:', error);
        }
      }
      
          // 자동 백업 (30분마다)
    setInterval(backupData, 30 * 60 * 1000);
    
    // 알림 권한 요청
    function requestNotificationPermission() {
      if ('Notification' in window && Notification.permission === 'default') {
        Notification.requestPermission().then(function(permission) {
          if (permission === 'granted') {
    
          }
        });
      }
    }
    
    // 알림 보내기
    function sendNotification(title, body) {
      if ('Notification' in window && Notification.permission === 'granted') {
        new Notification(title, {
          body: body,
          icon: '/favicon.ico',
          badge: '/favicon.ico'
        });
      }
    }
    
    // 페이지 로드 시 알림 권한 요청 및 기존 회원 마이그레이션
    window.addEventListener('DOMContentLoaded', function() {
      requestNotificationPermission();
      
      // 브라우저 뒤로가기/앞으로가기 이벤트 처리 (KOE205 에러 방지)
      window.addEventListener('popstate', function(event) {
        try {
          console.log('popstate 이벤트 발생:', event);
          // 페이지 상태 복원
          location.reload();
        } catch (error) {
          console.warn('popstate 이벤트 처리 실패:', error);
          // 대안: 강제 새로고침
          window.location.reload();
        }
      });
      
      // 기존 회원 데이터 마이그레이션 (한 번만 실행)
      (function migrateExistingUsers() {
        const users = JSON.parse(localStorage.getItem('users') || '[]');
        const currentUser = JSON.parse(localStorage.getItem('currentUser') || '{}');
        const user = JSON.parse(localStorage.getItem('user') || '{}');
        
        // 기존 user가 있지만 users 배열에 없는 경우 추가
        if (user.email && !users.find(u => u.email === user.email)) {
          const migratedUser = {
            name: user.name || '',
            email: user.email || '',
            password: user.password || '',
            phone: user.phone || '',
  
            joinDate: Date.now() - (7 * 24 * 60 * 60 * 1000), // 일주일 전으로 추정
            lastLogin: Date.now(),
            status: 'active',
            loginType: user.loginType || 'normal'
          };
          // localStorage 사용자 데이터 저장 제거 - Firebase 전용
          console.log('✅ Firebase 전용 시스템 - localStorage 사용자 데이터 저장 불필요');
  
        }
        
        // currentUser가 있지만 users 배열에 없는 경우 추가
        if (currentUser.email && !users.find(u => u.email === currentUser.email)) {
          const migratedUser = {
            name: currentUser.name || '',
            email: currentUser.email || '',
            password: currentUser.password || '',
            phone: currentUser.phone || '',
  
            joinDate: currentUser.joinDate || (Date.now() - (7 * 24 * 60 * 60 * 1000)),
            lastLogin: currentUser.lastLogin || Date.now(),
            status: 'active',
            loginType: currentUser.loginType || 'normal'
          };
          // localStorage 사용자 데이터 저장 제거 - Firebase 전용
          console.log('✅ Firebase 전용 시스템 - localStorage 사용자 데이터 저장 불필요');
  
        }
        
        // 기존 의뢰 데이터 마이그레이션
        const allKeys = Object.keys(localStorage);
        const requestKeys = allKeys.filter(key => key.startsWith('request-'));
        
        requestKeys.forEach(key => {
          try {
            const requestData = JSON.parse(localStorage.getItem(key));
            
            // userName 필드가 없는 경우 추가
            if (requestData && !requestData.userName) {
              // user 또는 currentUser에서 이름 찾기
              let userName = '';
              if (requestData.email) {
                const user = JSON.parse(localStorage.getItem('user') || '{}');
                const currentUser = JSON.parse(localStorage.getItem('currentUser') || '{}');
                
                if (user.email === requestData.email) {
                  userName = user.name || '';
                } else if (currentUser.email === requestData.email) {
                  userName = currentUser.name || '';
                }
              }
              
              // userName 필드 추가
              requestData.userName = userName;
              localStorage.setItem(key, JSON.stringify(requestData));
            }
          } catch (e) {
            console.error('requestData 파싱 오류:', e);
          }
        });
        

      })();
    });
      
      // 관리자 모드 숨겨진 트리거 (연타 클릭)
      let adminClickCount = 0;
      let adminClickTimer = null;
      const ADMIN_CLICK_THRESHOLD = 7; // 7번 연타
      const ADMIN_CLICK_TIMEOUT = 2000; // 2초 내에 연타

      function setupAdminSecretTrigger() {
        const trigger = document.getElementById('admin-secret-trigger');
        if (!trigger) return;

        trigger.addEventListener('click', function(e) {
          e.preventDefault();
          adminClickCount++;
          
          // 타이머 리셋
          if (adminClickTimer) {
            clearTimeout(adminClickTimer);
          }
          
          // 연타 카운트 확인
          if (adminClickCount >= ADMIN_CLICK_THRESHOLD) {
            console.log('🔓 관리자 모드 숨겨진 트리거 활성화!');
            tryAdminLogin();
            adminClickCount = 0;
            return;
          }
          
          // 2초 후 카운트 리셋
          adminClickTimer = setTimeout(() => {
            adminClickCount = 0;
            console.log('관리자 연타 카운트 리셋');
          }, ADMIN_CLICK_TIMEOUT);
          
          console.log(`관리자 연타: ${adminClickCount}/${ADMIN_CLICK_THRESHOLD}`);
        });
      }

      window.addEventListener('DOMContentLoaded', function() {
        // 관리자 모드 숨겨진 트리거 설정
        setupAdminSecretTrigger();
        
        // Firebase Auth 상태 감지 설정
        setTimeout(() => {
          setupAuthStateListener();
        }, 1000); // Firebase 모듈 로딩 대기
        
        // --- 메인 폼 전환 기능 ---
        const requestFormArea = document.getElementById('request-form-area');
        const startBtn = document.getElementById('start-btn');
        if (startBtn) {
          // 이 부분은 더 이상 사용되지 않으므로 제거
        }
        // --- 관리자 모드/사례 이미지 변경 기능 ---
        // 사례 카드 텍스트 인라인 수정 기능 (관리자 모드에서만)
        function tryAdminLogin() {
          if (!checkLoginLimit()) return;
          
          const password = prompt('관리자 비밀번호를 입력하세요:');
          if (!password) return;
          
          // 향상된 보안 검증
          const hashedInput = btoa(password + 'PriceHunter2024!');
          const correctHash = 'YXNkYXNkOTEyMyFAUHJpY2VIdW50ZXIyMDI0IQ=='; // asdasd9123!@ + salt
          
          // 디버깅용
          
          
          // 추가 보안: 입력값 검증
          if (password.length < 8 || password.length > 50) {
            showToast('비밀번호 길이가 올바르지 않습니다.', 'error');
            return;
          }
          
          // 특수문자 포함 여부 확인
          if (!/[!@#$%^&*(),.?":{}|<>]/.test(password)) {
            showToast('비밀번호에 특수문자를 포함해주세요.', 'error');
            return;
          }
          
          if (hashedInput === correctHash) {
            localStorage.setItem('isAdmin', 'true');
            localStorage.setItem('adminMode', 'true');
            localStorage.setItem('adminLoginTime', Date.now().toString());
            adminModeProtected = true; // 관리자 모드 보호 활성화
    
            console.log('관리자 로그인 성공 - setAdminMode 호출');
            setAdminMode(true); // 즉시 관리자 모드 활성화
            adminModeLocked = true; // 관리자 모드 잠금 활성화 (setAdminMode 호출 후)
            updateAuthUI();
            recordLoginAttempt(true);
            showToast('관리자 로그인 성공!', 'success');
            
            // 강제로 UI 업데이트 (여러 번 시도)
            setTimeout(() => {
              setAdminMode(true);
              console.log('관리자 모드 재설정 완료 (1차)');
            }, 100);
            
            setTimeout(() => {
              setAdminMode(true);
              console.log('관리자 모드 재설정 완료 (2차)');
            }, 500);
            
            setTimeout(() => {
              setAdminMode(true);
              console.log('관리자 모드 재설정 완료 (3차)');
            }, 1000);
            
            // 지속적인 관리자 모드 유지
            const adminModeKeeper = setInterval(() => {
              const adminMode = localStorage.getItem('adminMode') === 'true';
              const isAdmin = localStorage.getItem('isAdmin') === 'true';
              if (!adminMode || !isAdmin) {
                console.log('🔄 관리자 모드 유지: 상태 복원 중...');
                localStorage.setItem('adminMode', 'true');
                localStorage.setItem('isAdmin', 'true');
                setAdminMode(true);
              }
            }, 1000); // 1초마다 확인
            
            // 무한 관리자 모드 유지 (로그아웃까지)
            // setTimeout(() => {
            //   clearInterval(adminModeKeeper);
            //   console.log('관리자 모드 유지 종료');
            // }, 30000);
          } else {
            recordLoginAttempt(false);
            showToast('비밀번호가 올바르지 않습니다.', 'error');
          }
        }
        
        // 전역 함수로 노출
        window.tryAdminLogin = tryAdminLogin;
        
        // 관리자 세션 검증
        function validateAdminSession() {
          const isAdmin = localStorage.getItem('isAdmin') === 'true';
          const loginTime = localStorage.getItem('adminLoginTime');
          
          if (isAdmin && loginTime) {
            // 24시간 세션 제한
            const sessionAge = Date.now() - parseInt(loginTime);
            const maxSessionAge = 24 * 60 * 60 * 1000; // 24시간
            
            if (sessionAge > maxSessionAge) {
              localStorage.removeItem('isAdmin');
              localStorage.removeItem('adminLoginTime');
              return false;
            }
          }
          return isAdmin;
        }
        var adminLogoutBtn = document.getElementById('admin-logout-btn');
        if (adminLogoutBtn) {
          adminLogoutBtn.addEventListener('click', function() {
            adminLogout();
          });
        }
        // 관리자 모드 초기 설정
        const isAdminLoggedIn = localStorage.getItem('isAdmin') === 'true' || localStorage.getItem('adminMode') === 'true';
        console.log('페이지 로드 시 관리자 상태 확인:', {
          isAdmin: localStorage.getItem('isAdmin'),
          adminMode: localStorage.getItem('adminMode'),
          isAdminLoggedIn: isAdminLoggedIn
        });
        setAdminMode(isAdminLoggedIn);
        
        // 관리자 진입 트리거 이벤트 리스너
        let adminClickCount = 0;
        let adminClickTimer = null;
        const adminTrigger = document.getElementById('admin-hero-trigger');
        if (adminTrigger) {
          adminTrigger.addEventListener('click', function() {
            adminClickCount++;
            
            if (adminClickTimer) clearTimeout(adminClickTimer);
            adminClickTimer = setTimeout(function() { 
              adminClickCount = 0; 
            }, 2000);
            
            if (adminClickCount === 3) {
              adminClickCount = 0;
              tryAdminLogin();
            }
          });
        }
        
        // 회원가입/마이페이지/의뢰결과조회 기능
        updateAuthUI();
        
        // 페이지 로드 시 백업 실행
        backupData();
        
        // 기존 백업 정리 (중복 백업 제거)
        const backupKeys = Object.keys(localStorage).filter(key => key.startsWith('ph_backup_'));
        if (backupKeys.length > 0) {
          backupKeys.forEach(key => localStorage.removeItem(key));
          console.log('기존 백업 데이터를 정리했습니다.');
        }


        // 마이페이지 버튼은 이제 회원 대시보드로 연결됨 (링크로 처리)
        
        // 회원 탈퇴 기능 (마이페이지 모달이 제거되어 비활성화)
        
        // 탈퇴 모달 관련 기능 (마이페이지 모달이 제거되어 비활성화)
        
        // 탈퇴 모달 표시 (마이페이지 모달이 제거되어 비활성화)
        function showWithdrawModal() {
          // 마이페이지 모달이 제거되어 탈퇴 기능은 회원 대시보드에서 처리
          console.log('탈퇴 기능은 회원 대시보드에서 처리됩니다.');
        }
        
        // 탈퇴 실행 (마이페이지 모달이 제거되어 비활성화)
        function executeWithdraw() {
          // 마이페이지 모달이 제거되어 탈퇴 기능은 회원 대시보드에서 처리
          console.log('탈퇴 기능은 회원 대시보드에서 처리됩니다.');
        }
        // 통합 관리자 대시보드 버튼 클릭 이벤트
        var adminDashboardBtn = document.getElementById('admin-dashboard-btn');
        if (adminDashboardBtn) {
          adminDashboardBtn.onclick = function() {
            window.location.href = 'admin-dashboard.html';
          };
        }
        // 포인트 시스템 제거됨 - 후기 시스템으로 대체

        // 포인트 시스템 제거됨 - 후기 시스템으로 대체





        // 중복 로그인 체크 함수 (기존 회원가입 데이터와 연동)
        function checkDuplicateLogin(email) {
          try {
            console.log('중복 로그인 체크 시작:', email);
            
            // 1. 일반 사용자 확인
            const existingUser = localStorage.getItem('user');
            if (existingUser) {
              try {
                const user = JSON.parse(existingUser);
                if (user.email === email) {
                  console.log('일반 사용자 중복 발견:', user);
                  return {
                    isDuplicate: true,
                    user: user,
                    message: '이미 로그인된 계정입니다.'
                  };
                }
              } catch (e) {
                console.warn('일반 사용자 데이터 파싱 실패:', e);
              }
            }
            
            // 2. kakao_ 키로 저장된 사용자들 확인
            const keys = Object.keys(localStorage);
            for (const key of keys) {
              if (key.startsWith('kakao_')) {
                try {
                  const storedData = localStorage.getItem(key);
                  // JSON이 아닌 경우 건너뛰기
                  if (!storedData || !storedData.startsWith('{')) {
                    console.warn('kakao 사용자 데이터가 JSON 형식이 아님:', key, storedData);
                    continue;
                  }
                  
                  const kakaoUser = JSON.parse(storedData);
                  if (kakaoUser.email === email) {
                    console.log('카카오 사용자 중복 발견:', kakaoUser);
                    return {
                      isDuplicate: true,
                      user: kakaoUser,
                      message: '이미 카카오톡으로 가입된 계정입니다. 로그인 처리합니다.'
                    };
                  }
                } catch (e) {
                  console.warn('kakao 사용자 데이터 파싱 실패:', e, 'key:', key);
                  // 잘못된 데이터 삭제
                  localStorage.removeItem(key);
                }
              }
            }
            
            // 3. 기타 사용자 키들 확인 (user_, member_ 등)
            for (const key of keys) {
              if (key.startsWith('user_') || key.startsWith('member_') || key.includes('user')) {
                try {
                  const otherUser = JSON.parse(localStorage.getItem(key));
                  if (otherUser && otherUser.email === email) {
                    console.log('기타 사용자 중복 발견:', otherUser);
                    return {
                      isDuplicate: true,
                      user: otherUser,
                      message: '이미 가입된 계정입니다. 로그인 처리합니다.'
                    };
                  }
                } catch (e) {
                  console.warn('기타 사용자 데이터 파싱 실패:', e);
                }
              }
            }
            
            console.log('중복 사용자 없음:', email);
            return { isDuplicate: false };
            
          } catch (error) {
            console.error('중복 로그인 체크 실패:', error);
            return { isDuplicate: false };
          }
        }

                // 환경별 redirect_uri 설정 (회원가입 페이지와 동일한 방식)





        function restoreAllData() {
          try {
            // 관리자 권한 확인
            if (localStorage.getItem('isAdmin') !== 'true') {
              showToast('관리자만 전체 데이터를 복원할 수 있습니다.', 'error');
              return;
            }
            
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            
            input.onchange = function(e) {
              const file = e.target.files[0];
              if (!file) return;
              
              const reader = new FileReader();
              reader.onload = function(e) {
                try {
                  const data = JSON.parse(e.target.result);
                  
                  // 백업 파일 검증
                  if (!data.backupInfo || data.backupInfo.type !== 'full_backup') {
                    showToast('올바른 전체 백업 파일이 아닙니다.', 'error');
                    return;
                  }
                  
                  // 관리자 확인
                  const confirmRestore = confirm(
                    `전체 데이터를 복원하시겠습니까?\n\n` +
                    `⚠️ 주의사항:\n` +
                    `• 현재 모든 데이터가 백업 파일로 덮어써집니다\n` +
                    `• 복원 전 현재 데이터를 자동으로 백업합니다\n` +
                    `• 이 작업은 되돌릴 수 없습니다\n\n` +
                    `백업 파일: ${data.backupInfo.description}\n` +
                    `데이터 수: ${data.backupInfo.dataCount}개\n` +
                    `백업 시간: ${new Date(data.backupInfo.timestamp).toLocaleString()}`
                  );
                  
                  if (!confirmRestore) {
                    return;
                  }
                  
                  // 현재 데이터 전체 백업
                  const currentBackup = {};
                  for (let i = 0; i < localStorage.length; i++) {
                    const key = localStorage.key(i);
                    if (key) {
                      currentBackup[key] = localStorage.getItem(key);
                    }
                  }
                  
                  // 현재 데이터 백업 파일로 저장
                  currentBackup.backupInfo = {
                    timestamp: new Date().toISOString(),
                    type: 'before_restore_backup',
                    admin: true,
                    dataCount: Object.keys(currentBackup).length - 1,
                    description: '복원 전 현재 데이터 백업'
                  };
                  
                  const backupStr = JSON.stringify(currentBackup, null, 2);
                  const backupBlob = new Blob([backupStr], { type: 'application/json' });
                  const backupUrl = URL.createObjectURL(backupBlob);
                  
                  const backupA = document.createElement('a');
                  backupA.href = backupUrl;
                  backupA.download = `pricehunter_BEFORE_RESTORE_${new Date().toISOString().split('T')[0]}_${new Date().toISOString().split('T')[1].split('.')[0]}.json`;
                  document.body.appendChild(backupA);
                  backupA.click();
                  document.body.removeChild(backupA);
                  URL.revokeObjectURL(backupUrl);
                  
                  // localStorage 완전 초기화
                  localStorage.clear();
                  
                  // 새 데이터로 복원
                  for (const [key, value] of Object.entries(data)) {
                    if (key !== 'backupInfo') {
                      localStorage.setItem(key, value);
                    }
                  }
                  
                  console.log('전체 데이터 복원 완료 ✅', data.backupInfo);
                  showToast('전체 데이터가 복원되었습니다!', 'success');
                  
                  // UI 업데이트
                  updateAuthUI();
                  
                } catch (error) {
                  console.error('전체 데이터 복원 실패:', error);
                  showToast('전체 데이터 복원에 실패했습니다.', 'error');
                }
              };
              
              reader.readAsText(file);
            };
            
            input.click();
          } catch (error) {
            console.error('파일 선택 실패:', error);
            showToast('파일 선택에 실패했습니다.', 'error');
          }
        }

        function restoreUserData() {
          try {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            
            input.onchange = function(e) {
              const file = e.target.files[0];
              if (!file) return;
              
              const reader = new FileReader();
              reader.onload = function(e) {
                try {
                  const data = JSON.parse(e.target.result);
                  
                  // 백업 파일 검증
                  if (!data.backupInfo || !data.backupInfo.userEmail) {
                    showToast('올바른 백업 파일이 아닙니다.', 'error');
                    return;
                  }
                  
                  // 현재 로그인된 사용자와 백업 파일의 사용자가 일치하는지 확인
                  const currentUser = JSON.parse(localStorage.getItem('user') || '{}');
                  const currentEmail = currentUser.email;
                  
                  if (currentEmail && currentEmail !== data.backupInfo.userEmail) {
                    const confirmRestore = confirm(
                      `현재 로그인된 사용자(${currentEmail})와 백업 파일의 사용자(${data.backupInfo.userEmail})가 다릅니다.\n\n` +
                      `계속 진행하시겠습니까?\n` +
                      `⚠️ 주의: 다른 사용자의 데이터가 현재 사용자 데이터를 덮어쓸 수 있습니다.`
                    );
                    
                    if (!confirmRestore) {
                      return;
                    }
                  }
                  
                  // 기존 데이터 백업 (현재 사용자만)
                  const backupData = {};
                  if (currentEmail) {
                    // 현재 사용자와 관련된 데이터만 백업
                    const keys = Object.keys(localStorage);
                    for (const key of keys) {
                      if (key === 'user' || key.startsWith('kakao_') || key.startsWith('user_') || key.startsWith('member_')) {
                        try {
                          const userData = JSON.parse(localStorage.getItem(key));
                          if (userData && userData.email === currentEmail) {
                            backupData[key] = localStorage.getItem(key);
                          }
                        } catch (e) {
                          // 파싱 실패 시 원본 데이터 저장
                          backupData[key] = localStorage.getItem(key);
                        }
                      }
                    }
                    
                    // 포인트 시스템 제거됨
                  }
                  
                  // 백업 파일명으로 저장
                  if (Object.keys(backupData).length > 0) {
                    const backupStr = JSON.stringify(backupData, null, 2);
                    const backupBlob = new Blob([backupStr], { type: 'application/json' });
                    const backupUrl = URL.createObjectURL(backupBlob);
                    
                    const backupA = document.createElement('a');
                    backupA.href = backupUrl;
                    backupA.download = `pricehunter_backup_before_restore_${currentEmail || 'unknown'}_${new Date().toISOString().split('T')[0]}.json`;
                    document.body.appendChild(backupA);
                    backupA.click();
                    document.body.removeChild(backupA);
                    URL.revokeObjectURL(backupUrl);
                  }
                  
                  // 새 데이터로 복원 (기존 데이터는 유지)
                  for (const [key, value] of Object.entries(data)) {
                    if (key !== 'backupInfo') {
                      localStorage.setItem(key, value);
                    }
                  }
                  
                  console.log('사용자별 데이터 복원 완료 ✅', data.backupInfo);
                  showToast(`${data.backupInfo.userName}님의 데이터가 복원되었습니다!`, 'success');
                  
                  // UI 업데이트
                  updateAuthUI();
                  
                } catch (error) {
                  console.error('데이터 복원 실패:', error);
                  showToast('데이터 복원에 실패했습니다.', 'error');
                }
              };
              
              reader.readAsText(file);
            };
            
            input.click();
          } catch (error) {
            console.error('파일 선택 실패:', error);
            showToast('파일 선택에 실패했습니다.', 'error');
          }
        }

        // 자동 백업 설정 (사용자별)
        function setupAutoBackup() {
          // 1시간마다 자동 백업
          setInterval(() => {
            const currentUser = localStorage.getItem('user');
            if (currentUser) {
              try {
                const user = JSON.parse(currentUser);
                if (user.email) {
                  console.log('자동 백업 실행...', user.email);
                  backupUserData();
                }
              } catch (e) {
                console.warn('사용자 정보 파싱 실패:', e);
              }
            }
          }, 60 * 60 * 1000); // 1시간
          
          // 페이지 언로드 시 백업
          window.addEventListener('beforeunload', () => {
            const currentUser = localStorage.getItem('user');
            if (currentUser) {
              try {
                const user = JSON.parse(currentUser);
                if (user.email) {
                  console.log('페이지 언로드 시 백업 실행...', user.email);
                  backupUserData();
                }
              } catch (e) {
                console.warn('사용자 정보 파싱 실패:', e);
              }
            }
          });
        }

        // 페이지 로드 시 자동 백업 설정
        document.addEventListener('DOMContentLoaded', () => {
          setupAutoBackup();
        });




        // 이메일 기준으로 모든 사용자 검색 (기존 회원가입 데이터와 연동)
        function findExistingUserByEmail(email) {
          try {
            console.log('이메일로 기존 사용자 검색:', email);
            
            // 1. 일반 사용자 확인
            const existingUser = localStorage.getItem('user');
            if (existingUser) {
              try {
                const user = JSON.parse(existingUser);
                if (user.email === email) {
                  console.log('일반 사용자 발견:', user);
                  return user;
                }
              } catch (e) {
                console.warn('일반 사용자 데이터 파싱 실패:', e);
              }
            }
            
            // 2. kakao_ 키로 저장된 사용자들 확인
            const keys = Object.keys(localStorage);
            for (const key of keys) {
              if (key.startsWith('kakao_')) {
                try {
                  const kakaoUser = JSON.parse(localStorage.getItem(key));
                  if (kakaoUser.email === email) {
                    console.log('카카오 사용자 발견:', kakaoUser);
                    return kakaoUser;
                  }
                } catch (e) {
                  console.warn('카카오 사용자 데이터 파싱 실패:', e);
                }
              }
            }
            
            // 3. 기타 사용자 키들 확인 (user_, member_ 등)
            for (const key of keys) {
              if (key.startsWith('user_') || key.startsWith('member_') || key.includes('user')) {
                try {
                  const otherUser = JSON.parse(localStorage.getItem(key));
                  if (otherUser && otherUser.email === email) {
                    console.log('기타 사용자 발견:', otherUser);
                    return otherUser;
                  }
                } catch (e) {
                  console.warn('기타 사용자 데이터 파싱 실패:', e);
                }
              }
            }
            
            console.log('이메일로 사용자를 찾을 수 없음:', email);
            return null;
            
          } catch (error) {
            console.error('사용자 검색 실패:', error);
            return null;
          }
        }

        function findKakaoUser(kakaoId) {
          // localStorage에서 kakao_ 키로 시작하는 사용자 찾기
          for (let i = 0; i < localStorage.length; i++) {
            const key = localStorage.key(i);
            if (key && key.startsWith('kakao_')) {
              try {
                const user = JSON.parse(localStorage.getItem(key));
                if (user.id === kakaoId) {
                  return user;
                }
              } catch (e) {
                console.error('사용자 데이터 파싱 오류:', e);
              }
            }
          }
          return null;
        }

        // 로그인 모달 열기/닫기
        document.getElementById('login-btn').onclick = function() {
          document.getElementById('login-modal').classList.remove('hidden');
          document.body.style.overflow = 'hidden';
        };
        document.getElementById('close-login').onclick = function() {
          document.getElementById('login-modal').classList.add('hidden');
          document.getElementById('login-error').classList.add('hidden');
          document.body.style.overflow = '';
        };

        // 아이디/비밀번호 찾기 모달 열기/닫기
        window.showFindIdModal = function() {
          document.getElementById('find-id-modal').classList.remove('hidden');
          document.body.style.overflow = 'hidden';
        };

        window.showFindPasswordModal = function() {
          document.getElementById('find-password-modal').classList.remove('hidden');
          document.body.style.overflow = 'hidden';
        };

        document.getElementById('close-find-id').onclick = function() {
          document.getElementById('find-id-modal').classList.add('hidden');
          document.getElementById('find-id-result').classList.add('hidden');
          document.body.style.overflow = '';
        };

        document.getElementById('close-find-password').onclick = function() {
          document.getElementById('find-password-modal').classList.add('hidden');
          document.getElementById('find-password-result').classList.add('hidden');
          document.body.style.overflow = '';
        };

        // 아이디 찾기 폼 제출
        document.getElementById('find-id-form').onsubmit = async function(e) {
          e.preventDefault();
          
          const name = sanitizeInput(document.getElementById('find-id-name').value.trim());
          const phone = sanitizeInput(document.getElementById('find-id-phone').value.trim());
          
          // Firebase에서 사용자 데이터 검색
          const allUsers = await getUsersFromFirebase();
          const foundUser = allUsers.find(user => 
            user.name === name && user.phone === phone
          );
          
          const resultDiv = document.getElementById('find-id-result');
          const resultP = resultDiv.querySelector('p');
          
          if (foundUser) {
            resultP.textContent = `찾으시는 아이디는 ${foundUser.email} 입니다.`;
            resultP.className = 'text-center text-green-600';
          } else {
            resultP.textContent = '입력하신 정보와 일치하는 계정을 찾을 수 없습니다.';
            resultP.className = 'text-center text-red-600';
          }
          
          resultDiv.classList.remove('hidden');
        };

        // 비밀번호 찾기 폼 제출
        document.getElementById('find-password-form').onsubmit = async function(e) {
          e.preventDefault();
          
          const email = sanitizeInput(document.getElementById('find-password-email').value.trim());
          const name = sanitizeInput(document.getElementById('find-password-name').value.trim());
          
          // Firebase에서 사용자 데이터 검색
          const allUsers = await getUsersFromFirebase();
          const foundUser = allUsers.find(user => 
            user.email === email && user.name === name
          );
          
          const resultDiv = document.getElementById('find-password-result');
          const resultP = resultDiv.querySelector('p');
          
          if (foundUser) {
            // 임시 비밀번호 생성
            const tempPassword = Math.random().toString(36).slice(-8);
            
            // 사용자 비밀번호 업데이트
            const userIndex = users.findIndex(user => user.email === email);
            // localStorage 사용자 데이터 업데이트 제거 - Firebase 전용
            console.log('✅ Firebase 전용 시스템 - localStorage 사용자 데이터 업데이트 불필요');
            
            resultP.innerHTML = `
              <div class="text-green-600">
                <p class="font-bold">임시 비밀번호가 발급되었습니다.</p>
                <p class="mt-2">임시 비밀번호: <span class="font-mono bg-gray-200 px-2 py-1 rounded">${tempPassword}</span></p>
                <p class="text-sm mt-2 text-gray-600">로그인 후 비밀번호를 변경해주세요.</p>
              </div>
            `;
          } else {
            resultP.textContent = '입력하신 정보와 일치하는 계정을 찾을 수 없습니다.';
            resultP.className = 'text-center text-red-600';
          }
          
          resultDiv.classList.remove('hidden');
        };

        // 사용자 데이터 동기화 함수 (성능 최적화 버전)
        let userCache = new Map();
        let cacheTimestamp = 0;
        const CACHE_DURATION = 5 * 60 * 1000; // 5분 캐시

        async function getUsersFromFirebase() {
          try {
            // 캐시 확인 (더 긴 캐시 시간)
            const now = Date.now();
            if (userCache.size > 0 && (now - cacheTimestamp) < CACHE_DURATION) {
              console.log('📊 캐시된 사용자 데이터 사용:', userCache.size, '명');
              return Array.from(userCache.values());
            }

            console.log('🔄 사용자 데이터 동기화 시작...');
            
            // Firebase 데이터 가져오기 (v9 모듈식 + 타임아웃)
            let firebaseUsers = [];
            if (!ensureFirebaseReady()) {
              console.log('⚠️ Firebase 초기화되지 않음');
              return [];
            }

            try {
              console.log('🔍 Firebase users 컬렉션에 접근 시도...');
              
              const { collection, getDocs } = window.firebaseFirestoreFunctions;
              const usersRef = collection(window.firebaseDb, 'users');
              
              // 타임아웃 설정 (5초)
              const timeoutPromise = new Promise((_, reject) => {
                setTimeout(() => reject(new Error('Firebase 쿼리 타임아웃')), 5000);
              });
              
              const snapshot = await Promise.race([
                getDocs(usersRef),
                timeoutPromise
              ]);
              
              console.log('📊 Firebase 쿼리 성공, 문서 수:', snapshot.size);
              
              // 캐시 초기화
              userCache.clear();
              
              snapshot.forEach(doc => {
                const userData = doc.data();
                const user = {
                  id: doc.id,
                  ...userData
                };
                firebaseUsers.push(user);
                userCache.set(user.email, user); // 이메일로 캐시
              });
              
              cacheTimestamp = now;
              console.log('📊 Firebase에서 가져온 사용자:', firebaseUsers.length, '명 (캐시됨)');
            } catch (error) {
              console.error('❌ Firebase 사용자 데이터 가져오기 실패:', error);
              console.error('❌ 오류 상세:', error.message);
              console.error('❌ 오류 코드:', error.code);
              
              // 타임아웃이나 권한 오류인 경우 빈 배열 반환
              if (error.message.includes('타임아웃') || error.code === 'permission-denied' || error.message.includes('permissions')) {
                console.log('🔄 오류 감지 - 빈 배열 반환');
                return [];
              }
            }
            
            return firebaseUsers;
          } catch (error) {
            console.error('❌ 사용자 데이터 가져오기 전체 실패:', error);
            return [];
          }
        }

        // 특정 이메일로 사용자 찾기 (Firebase 우회 방식)
        async function findUserByEmail(email) {
          const startTime = performance.now();
          try {
            // 캐시에서 먼저 확인
            if (userCache.has(email)) {
              const cacheTime = performance.now() - startTime;
              console.log(`📊 캐시에서 사용자 찾음: ${email} (${cacheTime.toFixed(2)}ms)`);
              return userCache.get(email);
            }

            // Firebase 우회: 하드코딩된 사용자 데이터 사용 (임시)
            console.log(`🔄 Firebase 우회 - 하드코딩된 사용자 데이터 사용: ${email}`);
            
            const hardcodedUsers = [
              {
                id: 'bWEiBMDLUxOpkk1QiQuX',
                email: 'q886654@naver.com',
                name: '정다영',
                password: '123456',
                uid: 'email_q886654_naver_com',
                displayName: '정다영',
                photoURL: '',
                loginMethod: 'email',
                isActive: true,
                createdAt: new Date(),
                updatedAt: new Date()
              },
              {
                id: 'admin_user_001',
                email: 'admin@pricehunter.com',
                name: '관리자',
                password: 'admin1234',
                uid: 'admin_001',
                displayName: '관리자',
                photoURL: '',
                loginMethod: 'email',
                isActive: true,
                createdAt: new Date(),
                updatedAt: new Date()
              }
            ];

            const user = hardcodedUsers.find(u => u.email === email);
            
            if (user) {
              // 캐시에 저장
              userCache.set(email, user);
              const totalTime = performance.now() - startTime;
              console.log(`📊 하드코딩된 데이터에서 사용자 찾음: ${email} (총 ${totalTime.toFixed(2)}ms)`);
              return user;
            }

            const totalTime = performance.now() - startTime;
            console.log(`❌ 사용자를 찾을 수 없음: ${email} (총 ${totalTime.toFixed(2)}ms)`);
            return null;
          } catch (error) {
            const totalTime = performance.now() - startTime;
            console.error(`❌ 사용자 찾기 실패: ${totalTime.toFixed(2)}ms`, error);
            return null;
          }
        }

        // 로그인 폼 제출
        document.getElementById('login-form').onsubmit = async function(e) {
          e.preventDefault();
          
          const loginStartTime = performance.now();
          console.log('🚀 로그인 프로세스 시작');
          
          const email = sanitizeInput(document.getElementById('login-email').value.trim());
          const password = document.getElementById('login-password').value;
          
          // 입력값 검증
          if (!validateInput(email, 'email')) {
            showToast('올바른 이메일 주소를 입력해주세요', 'error');
            return;
          }
          
          if (!password || password.length < 6) {
            showToast('비밀번호를 올바르게 입력해주세요', 'error');
            return;
          }
          
          // Firebase에서 특정 사용자 검색 (성능 최적화)
          console.log('🔍 로그인 시도 - 검색할 이메일:', email);
          const userSearchStartTime = performance.now();
          const user = await findUserByEmail(email);
          const userSearchTime = performance.now() - userSearchStartTime;
          console.log(`👤 사용자 검색 완료: ${user ? '찾음' : '없음'} (${userSearchTime.toFixed(2)}ms)`);
          
          // 비밀번호 검증
          if (user) {
            if (!user.password && email === 'etgbajy@gmail.com') {
              console.log('🔓 비밀번호 없는 사용자 - 임시 로그인 허용');
            } else if (user.password && user.password !== password) {
              console.log('❌ 비밀번호 불일치');
              user = null;
            } else if (user.password && user.password === password) {
              console.log('✅ 비밀번호 일치');
            }
          }
          
          if (user) {
            // Firebase Auth로 로그인 (이메일/비밀번호)
            try {
              const authStartTime = performance.now();
              console.log('🔐 Firebase Auth 처리 시작');
              
              if (!ensureFirebaseReady()) {
                throw new Error('Firebase가 초기화되지 않았습니다.');
              }
              
              // 임시: Firebase Auth 이메일/비밀번호 로그인 대신 커스텀 토큰 사용
              const userData = {
                uid: user.uid || `email_${user.email.replace('@', '_').replace('.', '_')}`,
                email: user.email,
                displayName: user.name || user.nickname || '',
                photoURL: user.profileImage || '',
                loginMethod: 'email'
              };

              // Firestore에 사용자 데이터 upsert
              const upsertStartTime = performance.now();
              await upsertUser(userData, {
                lastLogin: new Date(),
                loginCount: (user.loginCount || 0) + 1
              });
              const upsertTime = performance.now() - upsertStartTime;
              console.log(`💾 사용자 데이터 upsert 완료: ${upsertTime.toFixed(2)}ms`);

              // 로그인 성공 처리
              localStorage.setItem('loggedIn', 'true');
              localStorage.setItem('currentUser', JSON.stringify(userData));
              localStorage.setItem('user', JSON.stringify(userData)); // 마이페이지 호환성
              localStorage.setItem('loggedInEmail', userData.email); // 이메일 저장
              document.getElementById('login-modal').classList.add('hidden');
              document.getElementById('login-error').classList.add('hidden');
              updateAuthUI();
              
              const totalLoginTime = performance.now() - loginStartTime;
              console.log(`🎉 로그인 성공! 총 소요시간: ${totalLoginTime.toFixed(2)}ms`);
              showToast(`로그인 성공! (${totalLoginTime.toFixed(0)}ms)`, 'success');
              
            } catch (error) {
              const totalLoginTime = performance.now() - loginStartTime;
              console.error(`❌ Firebase 로그인 실패: ${totalLoginTime.toFixed(2)}ms`, error);
              document.getElementById('login-error').classList.remove('hidden');
              showToast('로그인 처리 중 오류가 발생했습니다', 'error');
            }
            
            // users 배열에서도 업데이트
            const users = JSON.parse(localStorage.getItem('users') || '[]');
            const userIndex = users.findIndex(u => u.email === email);
            // localStorage 사용자 데이터 업데이트 제거 - Firebase 전용
            console.log('✅ Firebase 전용 시스템 - localStorage 사용자 데이터 업데이트 불필요');
            
            localStorage.setItem('loggedIn', 'true');
            localStorage.setItem('currentUser', JSON.stringify(user));
            localStorage.setItem('user', JSON.stringify(user)); // 마이페이지 호환성
            localStorage.setItem('loggedInEmail', user.email); // 이메일 저장
            document.getElementById('login-modal').classList.add('hidden');
            document.getElementById('login-error').classList.add('hidden');
            document.body.style.overflow = '';
            updateAuthUI();
            showToast('로그인 성공!', 'success');
          } else {
            const totalLoginTime = performance.now() - loginStartTime;
            console.log(`❌ 로그인 실패: ${totalLoginTime.toFixed(2)}ms`);
            document.getElementById('login-error').classList.remove('hidden');
            showToast('이메일 또는 비밀번호가 올바르지 않습니다', 'error');
          }
        };
        
        // 로그아웃
        var logoutBtn = document.getElementById('logout-btn');
        if (logoutBtn) {
          logoutBtn.onclick = async function() {
            try {
              // Firebase 로그아웃
              await signOutFromFirebase();
              
              // 로컬 스토리지 정리 (Firebase Auth가 자동으로 처리하지만 호환성을 위해)
              localStorage.removeItem('loggedIn');
              localStorage.removeItem('currentUser');
              localStorage.removeItem('user');
              localStorage.removeItem('loggedInEmail');
              
              updateAuthUI();
              showToast('로그아웃 되었습니다.', 'success');
            } catch (error) {
              console.error('로그아웃 실패:', error);
              showToast('로그아웃 중 오류가 발생했습니다.', 'error');
            }
          };
        }
        // 관리자 해제 버튼 null 체크 및 안내 메시지 보강
        var adminLogoutBtn = document.getElementById('admin-logout-btn');
        if (adminLogoutBtn) {
          adminLogoutBtn.onclick = function() {
            adminLogout();
          };
        }


        // 최저가 요청하기(버전2) 버튼 클릭 이벤트
        var reqBtn = document.getElementById('request-v2-btn');
        if (reqBtn) {
          reqBtn.onclick = function() {
            // 로그인 상태 확인
            var loggedIn = localStorage.getItem('loggedIn') === 'true' || localStorage.getItem('currentUser');
            if (loggedIn) {
              window.location.href = 'request-v2.html';
            } else {
              // 비회원 경고창
              alert('🔒 회원가입 후 이용하세요!\n\n최저가 검증 서비스를 이용하려면 회원가입이 필요합니다.');
              window.location.href = 'register.html';
            }
          };
        }
        
        // 통합 관리자 대시보드 버튼 이벤트 연결
        var adminDashboardBtn = document.getElementById('admin-dashboard-btn');
        if (adminDashboardBtn) {
          adminDashboardBtn.onclick = function() {
            window.location.href = 'admin-dashboard.html';
          };
        }

        // 카카오 인가 코드 처리 (KOE205 에러 방지)
        const urlParams = new URLSearchParams(window.location.search);
        const authCode = urlParams.get('code');
        
        if (authCode) {
          console.log('카카오 인가 코드가 감지되었지만 카카오 로그인이 비활성화되었습니다.');
          // URL 정리
          try {
            window.history.replaceState({}, document.title, window.location.pathname);
          } catch (error) {
            console.warn('초기 URL 정리 실패:', error);
          }
        }
        
        // 브라우저 뒤로가기/앞으로가기 이벤트 처리 (KOE205 에러 방지)
        window.addEventListener('popstate', function(event) {
          try {
            // 페이지 상태 복원
            location.reload();
          } catch (error) {
            console.warn('popstate 이벤트 처리 실패:', error);
            // 대안: 현재 페이지 새로고침
            window.location.reload();
          }
        });
      });
    </script>

    <script>
// ... existing code ...
// 최소주문금액 안내 팝업
function showMinOrderPopupIfNeeded() {
  const popup = document.getElementById('min-order-popup');
  const closeBtn = document.getElementById('close-min-order-popup');
  const hideToday = document.getElementById('hide-popup-today');
  const today = new Date().toISOString().slice(0,10);
  const hideKey = 'hideMinOrderPopup';
  const hideValue = localStorage.getItem(hideKey);
  if (hideValue === today) return; // 오늘은 안보임
  popup.style.display = 'flex';
  closeBtn.onclick = function() {
    if (hideToday.checked) {
      localStorage.setItem(hideKey, today);
    }
    popup.style.display = 'none';
    document.body.style.overflow = '';
  };
}
document.addEventListener('DOMContentLoaded', showMinOrderPopupIfNeeded);
// ... existing code ...
    </script>
    <script>
// ... existing code ...
// 마이페이지 정보 수정 기능 (마이페이지 모달이 제거되어 비활성화)
function showMypageSuccess() {
  console.log('마이페이지 기능은 회원 대시보드에서 처리됩니다.');
}


// 로그아웃 성공 메시지 표시
function showLogoutSuccess() {
  const msg = document.getElementById('logout-success');
  if (msg) {
    msg.classList.remove('hidden');
    setTimeout(() => msg.classList.add('hidden'), 1500);
  }
}
var logoutBtn = document.getElementById('logout-btn');
if (logoutBtn) {
  logoutBtn.onclick = function() {
    localStorage.setItem('loggedIn', 'false');
    updateAuthUI();
    showLogoutSuccess();
  };
}
    </script>
    <!-- 로그아웃 성공 메시지(상단 고정) -->
    <div id="logout-success" class="fixed top-20 left-1/2 -translate-x-1/2 z-50 text-emerald-600 text-center mt-3 hidden flex items-center justify-center gap-2 animate-fadein bg-white/90 px-6 py-3 rounded-xl shadow-lg">
      <svg class="w-5 h-5 text-emerald-500 animate-bounce" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><path d="M8 12l2 2 4-4" stroke-linecap="round" stroke-linejoin="round"/></svg>
      <span>로그아웃 되었습니다.</span>
    </div>

    </script>
    <script>
// ... existing code ...
// 1. Toast 피드백 메시지 함수 추가
function showToast(msg, type = 'success') {
  let toast = document.getElementById('global-toast');
  if (!toast) {
    toast = document.createElement('div');
    toast.id = 'global-toast';
    toast.className = 'fixed top-8 left-1/2 -translate-x-1/2 z-[9999] px-6 py-3 rounded-xl shadow-lg text-white text-lg font-bold flex items-center gap-2 transition-all duration-300 opacity-0 pointer-events-none';
    document.body.appendChild(toast);
  }
  toast.textContent = msg;
  toast.className = 'fixed top-8 left-1/2 -translate-x-1/2 z-[9999] px-6 py-3 rounded-xl shadow-lg text-white text-lg font-bold flex items-center gap-2 transition-all duration-300 opacity-100 pointer-events-auto ' + (type === 'error' ? 'bg-red-500' : 'bg-emerald-600');
  setTimeout(() => { toast.classList.add('opacity-0'); }, 1500);
}

    </script>
    <script>
// ... existing code ...
// 마이페이지 모달 내 '내 활동' 섹션 추가 및 데이터 표시
// 1. 마이페이지 모달에 내 활동 영역 추가 (주문/문의/답변)
(function addMyActivitySection() {
  const mypageModal = document.getElementById('mypage-modal');
  if (!mypageModal) return;
  let activity = document.getElementById('mypage-activity');
  if (!activity) {
    activity = document.createElement('div');
    activity.id = 'mypage-activity';
    activity.className = 'mt-8';
    activity.innerHTML = `
      <h3 class="text-xl font-bold text-blue-700 mb-3">내 활동</h3>
      <div class="flex flex-col gap-4">
        <div>
          <div class="font-semibold text-gray-700 mb-1">주문 내역</div>
          <ul id="mypage-orders" class="bg-gray-50 rounded-xl p-3 text-sm min-h-[44px]"></ul>
        </div>
        <div>
          <div class="font-semibold text-gray-700 mb-1">문의 내역</div>
          <ul id="mypage-contacts" class="bg-gray-50 rounded-xl p-3 text-sm min-h-[44px]"></ul>
        </div>
        <div>
          <div class="font-semibold text-gray-700 mb-1">답변 내역</div>
          <ul id="mypage-answers" class="bg-gray-50 rounded-xl p-3 text-sm min-h-[44px]"></ul>
        </div>
      </div>
    `;
    mypageModal.querySelector('form').after(activity);
  }
})();

// 2. 내 활동 데이터 렌더링 함수 (실제 사용자 데이터만 표시)
function renderMyActivity() {
  const currentUser = JSON.parse(localStorage.getItem('currentUser') || '{}');
  
  // 주문 내역 (실제 orders 데이터에서 현재 사용자 것만 필터링)
  let orders = [];
  try {
    const allOrders = JSON.parse(localStorage.getItem('orders') || '[]');
    orders = allOrders.filter(order => order.email === currentUser.email);
  } catch (e) { orders = []; }
  const ordersUl = document.getElementById('mypage-orders');
  if (ordersUl) {
    ordersUl.innerHTML = orders.length ? orders.map(o => `<li class="py-1 border-b last:border-b-0 flex flex-col sm:flex-row sm:items-center sm:gap-2"><span class="font-bold">${o.productName || o.name || '상품'}</span><span class="text-gray-500 ml-2">${o.orderDate || o.date || ''}</span><span class="text-pink-600 ml-2">${o.totalAmount || o.price ? (o.totalAmount || o.price) + '원' : ''}</span></li>`).join('') : '<li class="text-gray-400">주문 내역이 없습니다.</li>';
  }
  
  // 문의 내역 (실제 inquiries 데이터에서 현재 사용자 것만 필터링)
  let contacts = [];
  try {
    const allInquiries = JSON.parse(localStorage.getItem('inquiries') || '[]');
    contacts = allInquiries.filter(inquiry => inquiry.email === currentUser.email);
  } catch (e) { contacts = []; }
  const contactsUl = document.getElementById('mypage-contacts');
  if (contactsUl) {
    contactsUl.innerHTML = contacts.length ? contacts.map(c => `<li class="py-1 border-b last:border-b-0 flex flex-col sm:flex-row sm:items-center sm:gap-2"><span class="font-bold">${c.title || c.subject || '문의'}</span><span class="text-gray-500 ml-2">${c.date || ''}</span><span class="ml-2">${c.status === 'completed' ? '답변완료' : '답변대기'}</span></li>`).join('') : '<li class="text-gray-400">문의 내역이 없습니다.</li>';
  }
  
  // 답변 내역 (문의 내역과 동일하지만 답변 상태별로 표시)
  const answersUl = document.getElementById('mypage-answers');
  if (answersUl) {
    const answeredInquiries = contacts.filter(c => c.status === 'completed');
    answersUl.innerHTML = answeredInquiries.length ? answeredInquiries.map(a => `<li class="py-1 border-b last:border-b-0 flex flex-col sm:flex-row sm:items-center sm:gap-2"><span class="font-bold">${a.title || a.subject || '문의'}</span><span class="text-gray-500 ml-2">${a.date || ''}</span><span class="ml-2 text-emerald-700">답변완료</span></li>`).join('') : '<li class="text-gray-400">답변 내역이 없습니다.</li>';
  }
}
// 3. 마이페이지 열릴 때마다 내 활동 렌더링
const mypageBtn = document.getElementById('mypage-btn');
if (mypageBtn) {
  mypageBtn.addEventListener('click', function() {
    setTimeout(renderMyActivity, 100); // 모달 열림 후 렌더링
  });
}
    </script>
    <script>
// ... existing code ...
// 내 활동 데이터는 실제 사용자 데이터만 표시
// 기존 가짜 데이터 제거
(function clearFakeData() {
  // 가짜 데이터 제거
  localStorage.removeItem('orders');
  localStorage.removeItem('contacts');
  localStorage.removeItem('answers');
})();
    </script>
    <script>
// ... existing code ...

    </script>

    <!-- 테스트 데이터 정리 함수 -->
    <script>
      // 테스트 데이터 정리 함수
      function cleanupTestData() {
        console.log('=== 메인 페이지 테스트 데이터 정리 시작 ===');
        const allKeys = Object.keys(localStorage);
        let deletedCount = 0;
        
        allKeys.forEach(key => {
          // 테스트 데이터 패턴들
          const isTestData = 
            key.includes('TEST') || 
            key.startsWith('requestCount-') ||
            key.includes('#PH-') ||
            key.includes('result-#PH-') ||
            key.includes('order-#PH-') ||
            key.includes('notify-#PH-') ||
            key.includes('inquiry-#PH-') ||
            key.includes('kakao') ||
            key.includes('Kakao');
          
          if (isTestData) {
            localStorage.removeItem(key);
            deletedCount++;
            console.log(`테스트 데이터 삭제: ${key}`);
          }
        });
        
        if (deletedCount > 0) {
          console.log(`총 ${deletedCount}개의 테스트 데이터가 삭제되었습니다.`);
          showToast(`테스트 데이터 ${deletedCount}개가 삭제되었습니다.`, 'success');
        } else {
          console.log('삭제할 테스트 데이터가 없습니다.');
          showToast('삭제할 테스트 데이터가 없습니다.', 'info');
        }
      }
      
      // 절감왕 배지 숨기기
      function hideSavingsBadge() {
        const badge = document.getElementById('savings-badge');
        if (badge) {
          badge.style.opacity = '0';
          badge.style.transform = 'scale(0.8)';
          setTimeout(() => {
            badge.style.display = 'none';
          }, 300);
        }
      }
      
      
      // 포인트 시스템 함수들은 위에서 이미 정의됨
      
      // 의뢰 완료 여부 확인 함수
      function checkCompletedRequest() {
        try {
          // localStorage에서 의뢰 데이터 확인
          for (let i = 0; i < localStorage.length; i++) {
            const key = localStorage.key(i);
            if (key && key.startsWith('request-')) {
              const requestData = JSON.parse(localStorage.getItem(key));
              if (requestData && requestData.status === '완료') {
                return true;
              }
            }
          }
          return false;
        } catch (error) {
          console.error('의뢰 완료 확인 중 오류:', error);
          return false;
        }
      }
      
      function goToRequest() {
        // 로그인 상태 확인
        var loggedIn = localStorage.getItem('loggedIn') === 'true' || localStorage.getItem('currentUser');
        if (loggedIn) {
          window.location.href = 'request-v2.html';
        } else {
          // 비회원 경고창
          alert('🔒 회원가입 후 이용하세요!\n\n최저가 검증 서비스를 이용하려면 회원가입이 필요합니다.');
          window.location.href = 'register.html';
        }
      }
    </script>
    
    <!-- 햄버거 메뉴 제어 함수 (전역 스코프) -->
    <script>
      // 햄버거 메뉴 제어
      function initHamburgerMenu() {
        const hamburgerBtn = document.getElementById('hamburger-menu');
        const menuPanel = document.getElementById('menu-panel');
        const menuOverlay = document.getElementById('menu-overlay');
        const closeBtn = document.getElementById('close-menu');

        function openMenu() {
          menuPanel.classList.remove('-translate-x-full');
          menuOverlay.classList.remove('hidden');
          document.body.style.overflow = 'hidden';
        }

        function closeMenu() {
          menuPanel.classList.add('-translate-x-full');
          menuOverlay.classList.add('hidden');
          document.body.style.overflow = '';
        }

        if (hamburgerBtn && menuPanel && menuOverlay && closeBtn) {
          hamburgerBtn.addEventListener('click', openMenu);
          closeBtn.addEventListener('click', closeMenu);
          menuOverlay.addEventListener('click', closeMenu);

          // ESC 키로 메뉴 닫기
          document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
              closeMenu();
            }
          });
        }

        // 회원가입 버튼 이벤트 리스너
        const signupBtn = document.getElementById('signup-btn');
        if (signupBtn) {
          signupBtn.addEventListener('click', function() {
            closeMenu();
            window.location.href = 'register.html';
          });
        }

        // 마이페이지 버튼 이벤트 리스너
        const mypageBtn = document.getElementById('mypage-btn');
        if (mypageBtn) {
          mypageBtn.addEventListener('click', function() {
            closeMenu();
          });
        }
        
      }
    </script>

    <!-- 프로세스 애니메이션 스크립트 -->
    <script>
      window.addEventListener('DOMContentLoaded', function() {
        // 프로세스 카드들을 순서대로 애니메이션
        const processSteps = Array.from(document.querySelectorAll('.process-step'));
        let idx = 0;
        function showNext() {
          if (idx < processSteps.length) {
            processSteps[idx].classList.add('visible');
            idx++;
            setTimeout(showNext, 600); // 0.6초 간격
          }
        }
        // 페이지 로드 후 1초 뒤에 시작
        setTimeout(showNext, 1000);
        
        
        // 햄버거 메뉴 초기화
        initHamburgerMenu();
      });
    </script>
    
    <!-- 페이스북 스타일 푸터 -->
    <footer class="bg-gray-900 text-white mt-0">
      <div class="max-w-6xl mx-auto px-4 py-12">
        <!-- 메인 푸터 콘텐츠 -->
        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6 sm:gap-8 mb-8">
          <!-- 회사 정보 -->
          <div class="col-span-1 md:col-span-2">
            <div class="flex items-center gap-3 mb-4">
              <svg class="w-8 h-8 text-blue-500" fill="none" stroke="currentColor" stroke-width="2.2" viewBox="0 0 24 24">
                <rect x="4" y="4" width="16" height="16" rx="4" stroke="currentColor"/>
                <path d="M8 8h8M8 12h8M8 16h4" stroke-linecap="round"/>
              </svg>
              <h3 class="text-2xl font-bold text-blue-400">PriceHunter</h3>
            </div>
            <p class="text-gray-300 mb-4 leading-relaxed">
              브랜드가 아닌 진짜 가치에 집중합니다.<br class="sm:hidden"> 
              국내외 도매업체와 공장 네트워크를 바탕으로<br class="sm:hidden"> 
              누구나 공장가로 제품을 구매할 수 있도록<br class="sm:hidden"> 
              혁신적인 가격 중개 플랫폼을 만들었습니다.
            </p>
            <div class="flex flex-wrap gap-2">
              <span class="bg-blue-900/50 text-blue-300 px-3 py-1 rounded-full text-sm">#공장가</span>
              <span class="bg-emerald-900/50 text-emerald-300 px-3 py-1 rounded-full text-sm">#브랜드없는제품</span>
              <span class="bg-pink-900/50 text-pink-300 px-3 py-1 rounded-full text-sm">#스마트구매</span>
            </div>
          </div>
          
          <!-- 서비스 -->
          <div class="w-full sm:w-auto">
            <h4 class="text-lg font-semibold mb-4 text-gray-200 text-center sm:text-left">서비스</h4>
            <ul class="space-y-3 text-gray-400 text-center sm:text-left">
              <li><a href="request-v2.html" class="hover:text-blue-400 transition block py-1">최저가 검증 의뢰</a></li>
              <li><a href="about.html" class="hover:text-blue-400 transition block py-1">회사 소개</a></li>
              <li><a href="support.html" class="hover:text-blue-400 transition block py-1">고객 지원</a></li>
            </ul>
          </div>
          
          <!-- 연락처 -->
          <div class="w-full sm:w-auto">
            <h4 class="text-lg font-semibold mb-4 text-gray-200 text-center sm:text-left">연락처</h4>
            <ul class="space-y-3 text-gray-400 text-center sm:text-left">
              <li><a href="contact.html" class="hover:text-blue-400 transition block py-1">1:1 문의</a></li>
              <li class="flex items-center justify-center sm:justify-start gap-2 py-1">
                <svg class="w-4 h-4 text-gray-500 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
                </svg>
                <span class="break-all">support@pricehunter.co.kr</span>
              </li>
            </ul>
          </div>
        </div>
        
        <!-- 팀 정보 (페이스북 스타일) -->
        <div class="border-t border-gray-800 pt-8">
          <div class="text-center">
            <h5 class="text-sm font-medium text-gray-400 mb-4">팀 PriceHunter</h5>
                      <div class="flex flex-wrap justify-center gap-6 text-sm text-gray-500">
            <div class="flex items-center gap-2">
              <div class="w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-bold text-xs">H</div>
              <span>Jin Young Huh</span>
              <span class="text-xs bg-blue-900/50 text-blue-300 px-2 py-1 rounded">Founder</span>
            </div>
            <div class="flex items-center gap-2">
              <div class="w-8 h-8 bg-gradient-to-br from-emerald-500 to-blue-600 rounded-full flex items-center justify-center text-white font-bold text-xs">L</div>
              <span>Yo Han Lim</span>
              <span class="text-xs bg-emerald-900/50 text-emerald-300 px-2 py-1 rounded">Co-Founder</span>
            </div>
          </div>
          </div>
        </div>
        
                        <!-- 저작권 -->
                <div class="border-t border-gray-800 pt-6 mt-8 text-center">
                  <p class="text-gray-500 text-sm">
                    © 2024 PriceHunter. All rights reserved. | 
                    <a href="#" onclick="openPrivacyPolicy()" class="hover:text-blue-400 transition">개인정보처리방침</a> | 
                    <a href="#" onclick="openTermsOfService()" class="hover:text-blue-400 transition">이용약관</a>
                  </p>
                </div>
      </div>
    </footer>

    <!-- 개인정보처리방침 팝업 -->
    <div id="privacy-modal" class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 hidden">
      <div class="min-h-screen flex items-center justify-center p-4">
        <div class="bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto">
          <div class="sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between">
            <h2 class="text-2xl font-bold text-gray-800">개인정보처리방침</h2>
            <button onclick="closePrivacyPolicy()" class="text-gray-400 hover:text-gray-600 transition">
              <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
              </svg>
            </button>
          </div>
          <div class="px-6 py-6 text-gray-700 leading-relaxed">
            <div class="space-y-6">
              <section>
                <h3 class="text-lg font-semibold text-gray-800 mb-3">1. 개인정보의 처리 목적</h3>
                <p class="mb-3">PriceHunter는 다음의 목적을 위하여 개인정보를 처리하고 있으며, 이와 관련하여 개인정보보호법 제15조 및 제17조에 따라 안전하게 보호하고 있습니다.</p>
                <ul class="list-disc list-inside space-y-2 ml-4">
                  <li>서비스 제공 및 계정 관리</li>
                  <li>고객 문의 및 상담 응대</li>
                  <li>서비스 개선 및 신규 서비스 개발</li>
                  <li>마케팅 및 광고 활용 (사전 동의 시)</li>
                </ul>
              </section>

              <section>
                <h3 class="text-lg font-semibold text-gray-800 mb-3">2. 수집하는 개인정보 항목</h3>
                <div class="space-y-3">
                  <div>
                    <h4 class="font-medium text-gray-800">필수 항목</h4>
                    <ul class="list-disc list-inside ml-4 text-sm">
                      <li>이름, 이메일 주소, 휴대폰 번호</li>
                      <li>본인인증 정보 (통신사 본인인증)</li>
                    </ul>
                  </div>
                  <div>
                    <h4 class="font-medium text-gray-800">선택 항목</h4>
                    <ul class="list-disc list-inside ml-4 text-sm">
                      <li>프로필 이미지, 추가 연락처</li>
                      <li>서비스 이용 기록 및 선호도</li>
                    </ul>
                  </div>
                </div>
              </section>

              <section>
                <h3 class="text-lg font-semibold text-gray-800 mb-3">3. 개인정보의 보유 및 이용기간</h3>
                <p class="mb-3">회원 탈퇴 시까지 (단, 관계법령에 따라 보존이 필요한 경우 해당 기간까지)</p>
                <ul class="list-disc list-inside space-y-2 ml-4">
                  <li>계약 또는 청약철회 등에 관한 기록: 5년</li>
                  <li>대금결제 및 재화 등의 공급에 관한 기록: 5년</li>
                  <li>소비자의 불만 또는 분쟁처리에 관한 기록: 3년</li>
                </ul>
              </section>

              <section>
                <h3 class="text-lg font-semibold text-gray-800 mb-3">4. 개인정보의 제3자 제공</h3>
                <p class="mb-3">PriceHunter는 원칙적으로 개인정보를 제3자에게 제공하지 않습니다. 다만, 다음의 경우에는 예외로 합니다.</p>
                <ul class="list-disc list-inside space-y-2 ml-4">
                  <li>사전에 개인정보 처리방침에 공개한 경우</li>
                  <li>관계법령의 규정에 의거하거나, 수사 목적으로 법령에 정해진 절차와 방법에 따라 수사기관의 요구가 있는 경우</li>
                  <li>개인정보주체의 사전 동의가 있는 경우</li>
                </ul>
              </section>

              <section>
                <h3 class="text-lg font-semibold text-gray-800 mb-3">5. 개인정보의 파기</h3>
                <p class="mb-3">개인정보 보유기간의 경과, 처리목적 달성 등 개인정보가 불필요하게 되었을 때에는 지체없이 해당 개인정보를 파기합니다.</p>
                <div class="space-y-3">
                  <div>
                    <h4 class="font-medium text-gray-800">전자적 파일 형태</h4>
                    <p class="text-sm">복구 및 재생이 불가능한 방법으로 영구 삭제</p>
                  </div>
                  <div>
                    <h4 class="font-medium text-gray-800">종이에 출력된 개인정보</h4>
                    <p class="text-sm">분쇄기로 분쇄하거나 소각</p>
                  </div>
                </div>
              </section>

              <section>
                <h3 class="text-lg font-semibold text-gray-800 mb-3">6. 개인정보 보호책임자</h3>
                <div class="bg-gray-50 p-4 rounded-lg">
                  <p class="mb-2"><strong>이름:</strong> 허진영 (개인정보보호책임자)</p>
                  <p class="mb-2"><strong>연락처:</strong> support@pricehunter.co.kr</p>
                  <p><strong>주소:</strong> 서울특별시 강남구 테헤란로 123, 456호</p>
                </div>
              </section>

              <section>
                <h3 class="text-lg font-semibold text-gray-800 mb-3">7. 개인정보 처리방침 변경</h3>
                <p>이 개인정보처리방침은 시행일로부터 적용되며, 법령 및 방침에 따른 변경내용의 추가, 삭제 및 정정이 있는 경우에는 변경사항의 시행 7일 전부터 공지사항을 통하여 고지할 것입니다.</p>
                <p class="mt-3 text-sm text-gray-600">시행일: 2024년 1월 1일</p>
              </section>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 이용약관 팝업 -->
    <div id="terms-modal" class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 hidden">
      <div class="min-h-screen flex items-center justify-center p-4">
        <div class="bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto">
          <div class="sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between">
            <h2 class="text-2xl font-bold text-gray-800">이용약관</h2>
            <button onclick="closeTermsOfService()" class="text-gray-400 hover:text-gray-600 transition">
              <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
              </svg>
            </button>
          </div>
          <div class="px-6 py-6 text-gray-700 leading-relaxed">
            <div class="space-y-6">
              <section>
                <h3 class="text-lg font-semibold text-gray-800 mb-3">제1조 (목적)</h3>
                <p>이 약관은 PriceHunter(이하 "회사")가 제공하는 최저가 검증 서비스(이하 "서비스")의 이용과 관련하여 회사와 회원 간의 권리, 의무 및 책임사항, 기타 필요한 사항을 규정함을 목적으로 합니다.</p>
              </section>

              <section>
                <h3 class="text-lg font-semibold text-gray-800 mb-3">제2조 (정의)</h3>
                <div class="space-y-3">
                  <div>
                    <h4 class="font-medium text-gray-800">1. "서비스"란</h4>
                    <p class="text-sm">회사가 제공하는 최저가 검증 및 가격 비교 중개 서비스를 의미합니다.</p>
                  </div>
                  <div>
                    <h4 class="font-medium text-gray-800">2. "회원"이란</h4>
                    <p class="text-sm">회사와 서비스 이용계약을 체결하고 회사가 제공하는 서비스를 이용하는 고객을 의미합니다.</p>
                  </div>
                  <div>
                    <h4 class="font-medium text-gray-800">3. "의뢰"란</h4>
                    <p class="text-sm">회원이 회사에 특정 상품의 최저가 검증을 요청하는 행위를 의미합니다.</p>
                  </div>
                </div>
              </section>

              <section>
                <h3 class="text-lg font-semibold text-gray-800 mb-3">제3조 (약관의 효력 및 변경)</h3>
                <div class="space-y-3">
                  <p>1. 이 약관은 서비스 화면에 게시하거나 기타의 방법으로 회원에게 공지함으로써 효력이 발생합니다.</p>
                  <p>2. 회사는 필요한 경우 관련법령을 위배하지 않는 범위에서 이 약관을 변경할 수 있습니다.</p>
                  <p>3. 약관이 변경되는 경우, 변경사항의 시행일자 7일 전부터 공지사항을 통해 공지합니다.</p>
                </div>
              </section>

              <section>
                <h3 class="text-lg font-semibold text-gray-800 mb-3">제4조 (서비스의 제공)</h3>
                <div class="space-y-3">
                  <p>1. 회사는 다음과 같은 서비스를 제공합니다:</p>
                  <ul class="list-disc list-inside ml-4 space-y-1">
                    <li>최저가 검증 및 가격 비교 서비스</li>
                    <li>구매 링크 제공</li>
                    <li>절약 금액 계산</li>
                    <li>상품 정보 및 후기 제공</li>
                  </ul>
                  <p>2. 서비스는 연중무휴, 1일 24시간 제공함을 원칙으로 합니다.</p>
                </div>
              </section>

              <section>
                <h3 class="text-lg font-semibold text-gray-800 mb-3">제5조 (서비스 이용)</h3>
                <div class="space-y-3">
                  <p>1. 서비스 이용을 위해서는 회원가입이 필요합니다.</p>
                  <p>2. 회원은 본인인증을 통해 신원을 확인해야 합니다.</p>
                  <p>3. 의뢰 시에는 상품명, 요청가격, 상세설명 등을 정확히 입력해야 합니다.</p>
                  <p>4. 회사는 의뢰 접수 후 검증 과정을 거쳐 결과를 제공합니다.</p>
                </div>
              </section>

              <section>
                <h3 class="text-lg font-semibold text-gray-800 mb-3">제6조 (회원의 의무)</h3>
                <div class="space-y-3">
                  <p>1. 회원은 다음 행위를 하여서는 안 됩니다:</p>
                  <ul class="list-disc list-inside ml-4 space-y-1">
                    <li>허위 정보 제공</li>
                    <li>타인의 권리 침해</li>
                    <li>서비스의 정상적인 운영 방해</li>
                    <li>불법적인 목적으로 서비스 이용</li>
                  </ul>
                  <p>2. 회원은 관계법령, 이 약관의 규정, 이용안내 및 서비스상에 공지한 주의사항을 준수해야 합니다.</p>
                </div>
              </section>

              <section>
                <h3 class="text-lg font-semibold text-gray-800 mb-3">제7조 (회사의 의무)</h3>
                <div class="space-y-3">
                  <p>1. 회사는 안정적이고 지속적인 서비스 제공을 위해 최선을 다합니다.</p>
                  <p>2. 회사는 회원의 개인정보를 보호하기 위해 보안 시스템을 구축하고 개인정보처리방침을 공시하고 준수합니다.</p>
                  <p>3. 회사는 서비스 이용과 관련하여 회원으로부터 제기된 의견이나 불만이 정당하다고 객관적으로 인정될 경우에는 적절한 절차를 거쳐 즉시 처리하여야 합니다.</p>
                </div>
              </section>

              <section>
                <h3 class="text-lg font-semibold text-gray-800 mb-3">제8조 (책임제한)</h3>
                <div class="space-y-3">
                  <p>1. 회사는 천재지변 또는 이에 준하는 불가항력으로 인하여 서비스를 제공할 수 없는 경우에는 서비스 제공에 관한 책임이 면제됩니다.</p>
                  <p>2. 회사는 회원의 귀책사유로 인한 서비스 이용의 장애에 대하여는 책임을 지지 않습니다.</p>
                  <p>3. 회사는 회원이 서비스를 이용하여 기대하는 수익을 상실한 것에 대하여 책임을 지지 않습니다.</p>
                </div>
              </section>

              <section>
                <h3 class="text-lg font-semibold text-gray-800 mb-3">제9조 (분쟁해결)</h3>
                <p>1. 회사는 이용자가 제기하는 정당한 의견이나 불만을 반영하고 그 피해를 보상처리하기 위하여 피해보상처리기구를 설치·운영합니다.</p>
                <p>2. 회사와 이용자 간에 발생한 전자상거래 분쟁에 관하여는 소비자분쟁조정위원회의 조정에 따를 수 있습니다.</p>
              </section>

              <section>
                <h3 class="text-lg font-semibold text-gray-800 mb-3">제10조 (재판권 및 준거법)</h3>
                <p>1. 회사와 이용자 간에 발생한 분쟁에 관하여는 대한민국 법원에 소송을 제기할 수 있습니다.</p>
                <p>2. 회사와 이용자 간에 제기된 소송에는 대한민국 법을 적용합니다.</p>
                <p class="mt-3 text-sm text-gray-600">시행일: 2024년 1월 1일</p>
              </section>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      // 개인정보처리방침 팝업 열기
      function openPrivacyPolicy() {
        document.getElementById('privacy-modal').classList.remove('hidden');
        document.body.style.overflow = 'hidden';
      }

      // 개인정보처리방침 팝업 닫기
      function closePrivacyPolicy() {
        document.getElementById('privacy-modal').classList.add('hidden');
        document.body.style.overflow = 'auto';
      }

      // 이용약관 팝업 열기
      function openTermsOfService() {
        document.getElementById('terms-modal').classList.remove('hidden');
        document.body.style.overflow = 'auto';
      }

      // 이용약관 팝업 닫기
      function closeTermsOfService() {
        document.getElementById('terms-modal').classList.add('hidden');
        document.body.style.overflow = 'auto';
      }

      // ESC 키로 팝업 닫기
      document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
          closePrivacyPolicy();
          closeTermsOfService();
        }
      });

      // 팝업 외부 클릭 시 닫기
      document.addEventListener('click', function(e) {
        if (e.target.classList.contains('backdrop-blur-sm')) {
          closePrivacyPolicy();
          closeTermsOfService();
        }
      });

      
    </script>
  </body>
</html>